
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A declarative data engineering framework - Explicit over implicit, Stories over magic.">
      
      
      
        <link rel="canonical" href="https://henryodibi11.github.io/Odibi/reference/yaml_schema/">
      
      
        <link rel="prev" href="../cheatsheet/">
      
      
        <link rel="next" href="../templates/">
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.2">
    
    
      
        <title>YAML Schema - Odibi Framework</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="teal">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#odibi-configuration-reference" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Odibi Framework" class="md-header__button md-logo" aria-label="Odibi Framework" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Odibi Framework
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              YAML Schema
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="teal"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="green" data-md-color-accent="teal"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/henryodibi11/Odibi" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    henryodibi11/Odibi
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../.." class="md-tabs__link">
          
  
  
  Start Here

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../philosophy/" class="md-tabs__link">
          
  
  
  Learn

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../guides/the_definitive_guide/" class="md-tabs__link">
          
  
  
  Guides

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../validation/" class="md-tabs__link">
          
  
  
  Operate

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../cheatsheet/" class="md-tabs__link">
          
  
  
  Reference

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Odibi Framework" class="md-nav__button md-logo" aria-label="Odibi Framework" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Odibi Framework
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/henryodibi11/Odibi" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    henryodibi11/Odibi
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Start Here
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Start Here
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../golden_path/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Golden Path
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../playbook/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Playbook
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Installation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/getting_started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Quickstart
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Learn
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Learn
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../philosophy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Philosophy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../explanation/architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/medallion_architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Medallion Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Core Concepts
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Core Concepts
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/pipelines/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Pipelines & Nodes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/connections/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Connections
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/engines/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Engines
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/transformers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Transformers
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/patterns/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Loading Patterns
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Configuration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/state/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    State Management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/stories/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Stories
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/orchestration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Orchestration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/bulk_copy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Bulk Copy (SQL Server)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_5" >
        
          
          <label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Data Engineering 101
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Data Engineering 101
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../learning/curriculum/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Curriculum
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../learning/data_engineering_101/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Data Engineering 101
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../learning/glossary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Glossary
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_6" >
        
          
          <label class="md-nav__link" for="__nav_2_6" id="__nav_2_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Dimensional Modeling (Tutorial)
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Dimensional Modeling (Tutorial)
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/dimensional_modeling/01_introduction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introduction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/dimensional_modeling/02_dimension_pattern/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dimension Pattern
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/dimensional_modeling/03_date_dimension_pattern/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Date Dimension
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/dimensional_modeling/04_fact_pattern/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Fact Pattern
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/dimensional_modeling/05_aggregation_pattern/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Aggregation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/dimensional_modeling/06_full_star_schema/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Full Star Schema
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/dimensional_modeling/07_semantic_layer_intro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Semantic Layer Intro
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/dimensional_modeling/08_defining_metrics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Defining Metrics
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/dimensional_modeling/09_defining_dimensions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Defining Dimensions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/dimensional_modeling/10_querying_metrics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Querying Metrics
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/dimensional_modeling/11_materializing_metrics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Materializing Metrics
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/dimensional_modeling/12_semantic_full_example/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Full Semantic Example
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/dimensional_modeling/13_fk_validation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    FK Validation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Guides
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Guides
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/the_definitive_guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    The Definitive Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/decision_guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Decision Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Tutorials
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Tutorials
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/bronze_layer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Bronze Layer
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/silver_layer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Silver Layer
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/gold_layer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Gold Layer
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/spark_engine/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Spark Engine
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/azure_connections/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Azure Connections
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Examples (Copy/Paste)
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Examples (Copy/Paste)
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/canonical/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/canonical/01_hello_world/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    1. Hello World
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/canonical/02_incremental_sql/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2. Incremental SQL
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/canonical/03_scd2_dimension/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    3. SCD2 Dimension
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/canonical/04_fact_table/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    4. Fact Table
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/canonical/05_full_pipeline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    5. Full Pipeline
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_5" >
        
          
          <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Patterns (Problem → Solution)
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Patterns (Problem → Solution)
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../patterns/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_5_2" >
        
          
          <label class="md-nav__link" for="__nav_3_5_2" id="__nav_3_5_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Data Loading
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Data Loading
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../patterns/append_only_raw/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Append-Only Raw
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../patterns/incremental_stateful/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Incremental Stateful
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../patterns/merge_upsert/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Merge/Upsert
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../patterns/sql_server_merge/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SQL Server Merge
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../patterns/windowed_reprocess/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Windowed Reprocess
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../patterns/smart_read/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Smart Read
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../patterns/skip_if_unchanged/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Skip If Unchanged
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_5_3" >
        
          
          <label class="md-nav__link" for="__nav_3_5_3" id="__nav_3_5_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Dimensional Modeling
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Dimensional Modeling
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../patterns/dimension/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dimension Pattern
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../patterns/date_dimension/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Date Dimension
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../patterns/fact/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Fact Pattern
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../patterns/aggregation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Aggregation Pattern
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../patterns/scd2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SCD2 Pattern
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_5_4" >
        
          
          <label class="md-nav__link" for="__nav_3_5_4" id="__nav_3_5_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Manufacturing
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_5_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Manufacturing
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../patterns/manufacturing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Phase Analysis
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_5_5" >
        
          
          <label class="md-nav__link" for="__nav_3_5_5" id="__nav_3_5_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Engineering
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_5_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Engineering
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/unit_conversion/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Unit Conversion
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/thermodynamics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Thermodynamics
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../patterns/anti_patterns/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Anti-Patterns
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_6" >
        
          
          <label class="md-nav__link" for="__nav_3_6" id="__nav_3_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Common Tasks
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Common Tasks
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/writing_transformations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Writing Transformations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/custom_functions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Custom Functions Reference
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/variable_substitution/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Variable Substitution
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/explanation_feature/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Explanation Feature
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/api_data_sources/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    API Data Sources
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/recipes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Cookbook (Recipes)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Testing Pipelines
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/best_practices/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Best Practices
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_7" >
        
          
          <label class="md-nav__link" for="__nav_3_7" id="__nav_3_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Interfaces
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Interfaces
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/cli_master_guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CLI Master Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/python_api_guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Python API Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_8" >
        
          
          <label class="md-nav__link" for="__nav_3_8" id="__nav_3_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Semantic Layer
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Semantic Layer
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../semantics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../semantics/metrics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Defining Metrics
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../semantics/query/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Querying
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../semantics/materialize/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Materializing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../semantics/runner/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Running Views
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Operate
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Operate
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Data Quality
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Data Quality
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../validation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../validation/contracts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Contracts
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../validation/tests/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Validation Tests
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/quality_gates/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Quality Gates
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/quarantine/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Quarantine
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../validation/fk/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    FK Validation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Observability
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Observability
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/observability/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Observability
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/alerting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Alerting
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/diagnostics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Diagnostics
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/lineage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lineage
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/schema_tracking/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Schema Tracking
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/catalog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Catalog
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/catalog_sync/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Catalog Sync
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Deployment
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Deployment
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/production_deployment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Production Deployment
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/environments/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Environments
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/secrets/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Secrets Management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/setup_azure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Azure Setup
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/performance_tuning/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Performance Tuning
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/wsl_setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    WSL Setup
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../troubleshooting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Troubleshooting
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cheatsheet/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Cheatsheet
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    YAML Schema
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    YAML Schema
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#project-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        Project Structure
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Project Structure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#projectconfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        ProjectConfig
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enterprise-setup-guide" class="md-nav__link">
    <span class="md-ellipsis">
      
        🏢 "Enterprise Setup" Guide
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pipelineconfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        PipelineConfig
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nodeconfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        NodeConfig
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-smart-node-pattern" class="md-nav__link">
    <span class="md-ellipsis">
      
        🧠 "The Smart Node" Pattern
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dag-dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      
        🕸️ DAG &amp; Dependencies
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#smart-read-incremental-loading" class="md-nav__link">
    <span class="md-ellipsis">
      
        🧠 Smart Read &amp; Incremental Loading
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#orchestration-tags" class="md-nav__link">
    <span class="md-ellipsis">
      
        🏷️ Orchestration Tags
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#choosing-your-logic-transformer-vs-transform" class="md-nav__link">
    <span class="md-ellipsis">
      
        🤖 Choosing Your Logic: Transformer vs. Transform
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#chaining-operations" class="md-nav__link">
    <span class="md-ellipsis">
      
        🔗 Chaining Operations
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-app-vs-script" class="md-nav__link">
    <span class="md-ellipsis">
      
        ⚡ Example: App vs. Script
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#transformer-catalog" class="md-nav__link">
    <span class="md-ellipsis">
      
        📚 Transformer Catalog
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#columnmetadata" class="md-nav__link">
    <span class="md-ellipsis">
      
        ColumnMetadata
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#systemconfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        SystemConfig
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#syncfromconfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        SyncFromConfig
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#connections" class="md-nav__link">
    <span class="md-ellipsis">
      
        Connections
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Connections">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#localconnectionconfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        LocalConnectionConfig
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deltaconnectionconfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        DeltaConnectionConfig
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#azureblobconnectionconfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        AzureBlobConnectionConfig
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sqlserverconnectionconfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        SQLServerConnectionConfig
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#httpconnectionconfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        HttpConnectionConfig
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#node-operations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Node Operations
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Node Operations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#readconfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        ReadConfig
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#universal-reader-guide" class="md-nav__link">
    <span class="md-ellipsis">
      
        📖 "Universal Reader" Guide
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#incrementalconfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        IncrementalConfig
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timetravelconfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        TimeTravelConfig
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#transformconfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        TransformConfig
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#transformation-pipeline-guide" class="md-nav__link">
    <span class="md-ellipsis">
      
        🔧 "Transformation Pipeline" Guide
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deletedetectionconfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        DeleteDetectionConfig
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cdc-without-cdc-guide" class="md-nav__link">
    <span class="md-ellipsis">
      
        🔍 "CDC Without CDC" Guide
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#validationconfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        ValidationConfig
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-indestructible-pipeline-pattern" class="md-nav__link">
    <span class="md-ellipsis">
      
        🛡️ "The Indestructible Pipeline" Pattern
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quarantineconfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        QuarantineConfig
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quarantinecolumnsconfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        QuarantineColumnsConfig
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gateconfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        GateConfig
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gatethreshold" class="md-nav__link">
    <span class="md-ellipsis">
      
        GateThreshold
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rowcountgate" class="md-nav__link">
    <span class="md-ellipsis">
      
        RowCountGate
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#writeconfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        WriteConfig
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#big-data-performance-guide" class="md-nav__link">
    <span class="md-ellipsis">
      
        🚀 "Big Data Performance" Guide
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#writemetadataconfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        WriteMetadataConfig
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bronze-metadata-guide" class="md-nav__link">
    <span class="md-ellipsis">
      
        📋 Bronze Metadata Guide
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#streamingwriteconfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        StreamingWriteConfig
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#real-time-pipeline-guide" class="md-nav__link">
    <span class="md-ellipsis">
      
        🚀 "Real-Time Pipeline" Guide
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#triggerconfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        TriggerConfig
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#autooptimizeconfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        AutoOptimizeConfig
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#apioptionsconfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        ApiOptionsConfig
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#apipaginationconfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        ApiPaginationConfig
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#apiratelimitconfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        ApiRateLimitConfig
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#apiresponseconfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        ApiResponseConfig
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#apiretryconfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        ApiRetryConfig
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#privacyconfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        PrivacyConfig
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#privacy-pii-protection" class="md-nav__link">
    <span class="md-ellipsis">
      
        🔐 Privacy &amp; PII Protection
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sqlserverauditcolsconfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        SqlServerAuditColsConfig
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sqlservermergeoptions" class="md-nav__link">
    <span class="md-ellipsis">
      
        SqlServerMergeOptions
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basic-usage" class="md-nav__link">
    <span class="md-ellipsis">
      
        Basic Usage
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conditions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Conditions
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sqlservermergevalidationconfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        SqlServerMergeValidationConfig
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sqlserveroverwriteoptions" class="md-nav__link">
    <span class="md-ellipsis">
      
        SqlServerOverwriteOptions
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strategies" class="md-nav__link">
    <span class="md-ellipsis">
      
        Strategies
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sqlserverschemaevolutionconfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        SqlServerSchemaEvolutionConfig
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#transformstep" class="md-nav__link">
    <span class="md-ellipsis">
      
        TransformStep
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#contracts-data-quality-gates" class="md-nav__link">
    <span class="md-ellipsis">
      
        Contracts (Data Quality Gates)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Contracts (Data Quality Gates)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#contracts-pre-transform-checks" class="md-nav__link">
    <span class="md-ellipsis">
      
        Contracts (Pre-Transform Checks)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#acceptedvaluestest" class="md-nav__link">
    <span class="md-ellipsis">
      
        AcceptedValuesTest
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#customsqltest" class="md-nav__link">
    <span class="md-ellipsis">
      
        CustomSQLTest
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#distributioncontract" class="md-nav__link">
    <span class="md-ellipsis">
      
        DistributionContract
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#freshnesscontract" class="md-nav__link">
    <span class="md-ellipsis">
      
        FreshnessContract
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#notnulltest" class="md-nav__link">
    <span class="md-ellipsis">
      
        NotNullTest
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rangetest" class="md-nav__link">
    <span class="md-ellipsis">
      
        RangeTest
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#regexmatchtest" class="md-nav__link">
    <span class="md-ellipsis">
      
        RegexMatchTest
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rowcounttest" class="md-nav__link">
    <span class="md-ellipsis">
      
        RowCountTest
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schemacontract" class="md-nav__link">
    <span class="md-ellipsis">
      
        SchemaContract
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#uniquetest" class="md-nav__link">
    <span class="md-ellipsis">
      
        UniqueTest
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#volumedroptest" class="md-nav__link">
    <span class="md-ellipsis">
      
        VolumeDropTest
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#global-settings" class="md-nav__link">
    <span class="md-ellipsis">
      
        Global Settings
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Global Settings">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lineageconfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        LineageConfig
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alertconfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        AlertConfig
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loggingconfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        LoggingConfig
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#performanceconfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        PerformanceConfig
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#retryconfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        RetryConfig
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#storyconfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        StoryConfig
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#transformation-reference" class="md-nav__link">
    <span class="md-ellipsis">
      
        Transformation Reference
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Transformation Reference">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#how-to-use-transformers" class="md-nav__link">
    <span class="md-ellipsis">
      
        How to Use Transformers
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#common-operations" class="md-nav__link">
    <span class="md-ellipsis">
      
        📂 Common Operations
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="📂 Common Operations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#casewhencase" class="md-nav__link">
    <span class="md-ellipsis">
      
        CaseWhenCase
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addprefixparams" class="md-nav__link">
    <span class="md-ellipsis">
      
        add_prefix (AddPrefixParams)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addsuffixparams" class="md-nav__link">
    <span class="md-ellipsis">
      
        add_suffix (AddSuffixParams)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#casewhenparams" class="md-nav__link">
    <span class="md-ellipsis">
      
        case_when (CaseWhenParams)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#castcolumnsparams" class="md-nav__link">
    <span class="md-ellipsis">
      
        cast_columns (CastColumnsParams)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cleantextparams" class="md-nav__link">
    <span class="md-ellipsis">
      
        clean_text (CleanTextParams)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#coalescecolumnsparams" class="md-nav__link">
    <span class="md-ellipsis">
      
        coalesce_columns (CoalesceColumnsParams)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#concatcolumnsparams" class="md-nav__link">
    <span class="md-ellipsis">
      
        concat_columns (ConcatColumnsParams)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#converttimezoneparams" class="md-nav__link">
    <span class="md-ellipsis">
      
        convert_timezone (ConvertTimezoneParams)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dateaddparams" class="md-nav__link">
    <span class="md-ellipsis">
      
        date_add (DateAddParams)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#datediffparams" class="md-nav__link">
    <span class="md-ellipsis">
      
        date_diff (DateDiffParams)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#datetruncparams" class="md-nav__link">
    <span class="md-ellipsis">
      
        date_trunc (DateTruncParams)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#derivecolumnsparams" class="md-nav__link">
    <span class="md-ellipsis">
      
        derive_columns (DeriveColumnsParams)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#distinctparams" class="md-nav__link">
    <span class="md-ellipsis">
      
        distinct (DistinctParams)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#parameters" class="md-nav__link">
    <span class="md-ellipsis">
      
        Parameters
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#returns" class="md-nav__link">
    <span class="md-ellipsis">
      
        Returns
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Returns">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dropcolumnsparams" class="md-nav__link">
    <span class="md-ellipsis">
      
        drop_columns (DropColumnsParams)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#extractdateparams" class="md-nav__link">
    <span class="md-ellipsis">
      
        extract_date_parts (ExtractDateParams)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fillnullsparams" class="md-nav__link">
    <span class="md-ellipsis">
      
        fill_nulls (FillNullsParams)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#filterrowsparams" class="md-nav__link">
    <span class="md-ellipsis">
      
        filter_rows (FilterRowsParams)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#limitparams" class="md-nav__link">
    <span class="md-ellipsis">
      
        limit (LimitParams)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#parameters_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Parameters
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#returns_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Returns
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Returns">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#normalizecolumnnamesparams" class="md-nav__link">
    <span class="md-ellipsis">
      
        normalize_column_names (NormalizeColumnNamesParams)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#normalizeschemaparams" class="md-nav__link">
    <span class="md-ellipsis">
      
        normalize_schema (NormalizeSchemaParams)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#renamecolumnsparams" class="md-nav__link">
    <span class="md-ellipsis">
      
        rename_columns (RenameColumnsParams)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#replacevaluesparams" class="md-nav__link">
    <span class="md-ellipsis">
      
        replace_values (ReplaceValuesParams)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sampleparams" class="md-nav__link">
    <span class="md-ellipsis">
      
        sample (SampleParams)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#parameters_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        Parameters
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#returns_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        Returns
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Returns">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#selectcolumnsparams" class="md-nav__link">
    <span class="md-ellipsis">
      
        select_columns (SelectColumnsParams)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sortparams" class="md-nav__link">
    <span class="md-ellipsis">
      
        sort (SortParams)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#parameters_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        Parameters
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#returns_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        Returns
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Returns">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#splitpartparams" class="md-nav__link">
    <span class="md-ellipsis">
      
        split_part (SplitPartParams)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trimwhitespaceparams" class="md-nav__link">
    <span class="md-ellipsis">
      
        trim_whitespace (TrimWhitespaceParams)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#relational-algebra" class="md-nav__link">
    <span class="md-ellipsis">
      
        📂 Relational Algebra
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="📂 Relational Algebra">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aggregateparams" class="md-nav__link">
    <span class="md-ellipsis">
      
        aggregate (AggregateParams)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#joinparams" class="md-nav__link">
    <span class="md-ellipsis">
      
        join (JoinParams)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pivotparams" class="md-nav__link">
    <span class="md-ellipsis">
      
        pivot (PivotParams)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unionparams" class="md-nav__link">
    <span class="md-ellipsis">
      
        union (UnionParams)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unpivotparams" class="md-nav__link">
    <span class="md-ellipsis">
      
        unpivot (UnpivotParams)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-quality" class="md-nav__link">
    <span class="md-ellipsis">
      
        📂 Data Quality
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="📂 Data Quality">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#crosscheckparams" class="md-nav__link">
    <span class="md-ellipsis">
      
        cross_check (CrossCheckParams)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#warehousing-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        📂 Warehousing Patterns
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="📂 Warehousing Patterns">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#auditcolumnsconfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        AuditColumnsConfig
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mergeparams" class="md-nav__link">
    <span class="md-ellipsis">
      
        merge (MergeParams)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gdpr-compliance-guide" class="md-nav__link">
    <span class="md-ellipsis">
      
        ⚖️ "GDPR &amp; Compliance" Guide
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="⚖️ &#34;GDPR &amp; Compliance&#34; Guide">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#scd2params" class="md-nav__link">
    <span class="md-ellipsis">
      
        scd2 (SCD2Params)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-time-machine-pattern" class="md-nav__link">
    <span class="md-ellipsis">
      
        🕰️ The "Time Machine" Pattern
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#manufacturing-iot" class="md-nav__link">
    <span class="md-ellipsis">
      
        📂 Manufacturing &amp; IoT
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="📂 Manufacturing &amp; IoT">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#phaseconfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        PhaseConfig
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#detectsequentialphasesparams" class="md-nav__link">
    <span class="md-ellipsis">
      
        detect_sequential_phases (DetectSequentialPhasesParams)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#advanced-feature-engineering" class="md-nav__link">
    <span class="md-ellipsis">
      
        📂 Advanced &amp; Feature Engineering
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="📂 Advanced &amp; Feature Engineering">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#shiftdefinition" class="md-nav__link">
    <span class="md-ellipsis">
      
        ShiftDefinition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deduplicateparams" class="md-nav__link">
    <span class="md-ellipsis">
      
        deduplicate (DeduplicateParams)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dictmappingparams" class="md-nav__link">
    <span class="md-ellipsis">
      
        dict_based_mapping (DictMappingParams)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#explodeparams" class="md-nav__link">
    <span class="md-ellipsis">
      
        explode_list_column (ExplodeParams)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#numerickeyparams" class="md-nav__link">
    <span class="md-ellipsis">
      
        generate_numeric_key (NumericKeyParams)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#surrogatekeyparams" class="md-nav__link">
    <span class="md-ellipsis">
      
        generate_surrogate_key (SurrogateKeyParams)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geocodeparams" class="md-nav__link">
    <span class="md-ellipsis">
      
        geocode (GeocodeParams)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hashparams" class="md-nav__link">
    <span class="md-ellipsis">
      
        hash_columns (HashParams)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#normalizejsonparams" class="md-nav__link">
    <span class="md-ellipsis">
      
        normalize_json (NormalizeJsonParams)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parsejsonparams" class="md-nav__link">
    <span class="md-ellipsis">
      
        parse_json (ParseJsonParams)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#regexreplaceparams" class="md-nav__link">
    <span class="md-ellipsis">
      
        regex_replace (RegexReplaceParams)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sessionizeparams" class="md-nav__link">
    <span class="md-ellipsis">
      
        sessionize (SessionizeParams)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spliteventsbyperiodparams" class="md-nav__link">
    <span class="md-ellipsis">
      
        split_events_by_period (SplitEventsByPeriodParams)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unpackstructparams" class="md-nav__link">
    <span class="md-ellipsis">
      
        unpack_struct (UnpackStructParams)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#validateandflagparams" class="md-nav__link">
    <span class="md-ellipsis">
      
        validate_and_flag (ValidateAndFlagParams)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#windowcalculationparams" class="md-nav__link">
    <span class="md-ellipsis">
      
        window_calculation (WindowCalculationParams)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#other-transformers" class="md-nav__link">
    <span class="md-ellipsis">
      
        📂 Other Transformers
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="📂 Other Transformers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#conversionspec" class="md-nav__link">
    <span class="md-ellipsis">
      
        ConversionSpec
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#propertyoutputconfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        PropertyOutputConfig
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psychrometricoutputconfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        PsychrometricOutputConfig
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fluidpropertiesparams" class="md-nav__link">
    <span class="md-ellipsis">
      
        fluid_properties (FluidPropertiesParams)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psychrometricsparams" class="md-nav__link">
    <span class="md-ellipsis">
      
        psychrometrics (PsychrometricsParams)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#saturationpropertiesparams" class="md-nav__link">
    <span class="md-ellipsis">
      
        saturation_properties (SaturationPropertiesParams)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unitconvertparams" class="md-nav__link">
    <span class="md-ellipsis">
      
        unit_convert (UnitConvertParams)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#semantic-layer" class="md-nav__link">
    <span class="md-ellipsis">
      
        Semantic Layer
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Semantic Layer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#semantic-layer_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Semantic Layer
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dimensiondefinition" class="md-nav__link">
    <span class="md-ellipsis">
      
        DimensionDefinition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#materializationconfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        MaterializationConfig
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#metricdefinition" class="md-nav__link">
    <span class="md-ellipsis">
      
        MetricDefinition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#semanticlayerconfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        SemanticLayerConfig
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fk-validation" class="md-nav__link">
    <span class="md-ellipsis">
      
        FK Validation
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FK Validation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fk-validation_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        FK Validation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#relationshipconfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        RelationshipConfig
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#relationshipregistry" class="md-nav__link">
    <span class="md-ellipsis">
      
        RelationshipRegistry
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        Data Patterns
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Data Patterns">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#data-patterns_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Data Patterns
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dimensionpattern" class="md-nav__link">
    <span class="md-ellipsis">
      
        DimensionPattern
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#datedimensionpattern" class="md-nav__link">
    <span class="md-ellipsis">
      
        DateDimensionPattern
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#factpattern" class="md-nav__link">
    <span class="md-ellipsis">
      
        FactPattern
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aggregationpattern" class="md-nav__link">
    <span class="md-ellipsis">
      
        AggregationPattern
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AggregationPattern">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#auditconfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        AuditConfig
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../templates/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Templates Reference
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Configuration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../supported_formats/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Supported Formats
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../PARITY_TABLE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Engine Parity
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../glossary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Glossary
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/cli/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CLI Reference
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ODIBI_DEEP_CONTEXT/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AI Deep Context
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_10" >
        
          
          <label class="md-nav__link" for="__nav_5_10" id="__nav_5_10_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    API
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    API
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/pipeline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Pipeline
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/engine/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Engine
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/context/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Context
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/patterns/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Patterns
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/validation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Validation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Config
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/connections/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Connections
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/cli/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CLI
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="odibi-configuration-reference">Odibi Configuration Reference<a class="headerlink" href="#odibi-configuration-reference" title="Permanent link">&para;</a></h1>
<p>This manual details the YAML configuration schema for Odibi projects.
<em>Auto-generated from Pydantic models.</em></p>
<h2 id="project-structure">Project Structure<a class="headerlink" href="#project-structure" title="Permanent link">&para;</a></h2>
<h3 id="projectconfig"><code>ProjectConfig</code><a class="headerlink" href="#projectconfig" title="Permanent link">&para;</a></h3>
<p>Complete project configuration from YAML.</p>
<h3 id="enterprise-setup-guide">🏢 "Enterprise Setup" Guide<a class="headerlink" href="#enterprise-setup-guide" title="Permanent link">&para;</a></h3>
<p><strong>Business Problem:</strong>
"We need a robust production environment with alerts, retries, and proper logging."</p>
<p><strong>Recipe: Production Ready</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nt">project</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Customer360&quot;</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="nt">engine</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;spark&quot;</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="c1"># 1. Resilience</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="nt">retry</span><span class="p">:</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="w">    </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="w">    </span><span class="nt">max_attempts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="w">    </span><span class="nt">backoff</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;exponential&quot;</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="c1"># 2. Observability</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="nt">logging</span><span class="p">:</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="w">    </span><span class="nt">level</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;INFO&quot;</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="w">    </span><span class="nt">structured</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w">  </span><span class="c1"># JSON logs for Splunk/Datadog</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="c1"># 3. Alerting</span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="nt">alerts</span><span class="p">:</span>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;slack&quot;</span>
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a><span class="w">    </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;${SLACK_WEBHOOK_URL}&quot;</span>
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a><span class="w">    </span><span class="nt">on_events</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;on_failure&quot;</span><span class="p p-Indicator">]</span>
<a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a>
<a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a><span class="c1"># ... connections and pipelines ...</span>
</code></pre></div></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>project</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>Project name</td>
</tr>
<tr>
<td><strong>engine</strong></td>
<td>EngineType</td>
<td>No</td>
<td><code>EngineType.PANDAS</code></td>
<td>Execution engine</td>
</tr>
<tr>
<td><strong>connections</strong></td>
<td>Dict[str, <a href="#connections">ConnectionConfig</a>]</td>
<td>Yes</td>
<td>-</td>
<td>Named connections (at least one required)<br><strong>Options:</strong> <a href="#localconnectionconfig">LocalConnectionConfig</a>, <a href="#azureblobconnectionconfig">AzureBlobConnectionConfig</a>, <a href="#deltaconnectionconfig">DeltaConnectionConfig</a>, <a href="#sqlserverconnectionconfig">SQLServerConnectionConfig</a>, <a href="#httpconnectionconfig">HttpConnectionConfig</a>, <a href="#customconnectionconfig">CustomConnectionConfig</a></td>
</tr>
<tr>
<td><strong>pipelines</strong></td>
<td>List[<a href="#pipelineconfig">PipelineConfig</a>]</td>
<td>Yes</td>
<td>-</td>
<td>Pipeline definitions (at least one required)</td>
</tr>
<tr>
<td><strong>story</strong></td>
<td><a href="#storyconfig">StoryConfig</a></td>
<td>Yes</td>
<td>-</td>
<td>Story generation configuration (mandatory)</td>
</tr>
<tr>
<td><strong>system</strong></td>
<td><a href="#systemconfig">SystemConfig</a></td>
<td>Yes</td>
<td>-</td>
<td>System Catalog configuration (mandatory)</td>
</tr>
<tr>
<td><strong>lineage</strong></td>
<td>Optional[<a href="#lineageconfig">LineageConfig</a>]</td>
<td>No</td>
<td>-</td>
<td>OpenLineage configuration</td>
</tr>
<tr>
<td><strong>description</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Project description</td>
</tr>
<tr>
<td><strong>version</strong></td>
<td>str</td>
<td>No</td>
<td><code>1.0.0</code></td>
<td>Project version</td>
</tr>
<tr>
<td><strong>owner</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Project owner/contact</td>
</tr>
<tr>
<td><strong>vars</strong></td>
<td>Dict[str, Any]</td>
<td>No</td>
<td><code>PydanticUndefined</code></td>
<td>Global variables for substitution (e.g. ${vars.env})</td>
</tr>
<tr>
<td><strong>retry</strong></td>
<td><a href="#retryconfig">RetryConfig</a></td>
<td>No</td>
<td><code>PydanticUndefined</code></td>
<td>Retry configuration for transient failures. Applies to all nodes unless overridden. Default: enabled with 3 attempts, exponential backoff.</td>
</tr>
<tr>
<td><strong>logging</strong></td>
<td><a href="#loggingconfig">LoggingConfig</a></td>
<td>No</td>
<td><code>PydanticUndefined</code></td>
<td>Logging configuration for pipeline execution. Set level (DEBUG/INFO/WARNING/ERROR), enable structured JSON logs, add metadata.</td>
</tr>
<tr>
<td><strong>alerts</strong></td>
<td>List[<a href="#alertconfig">AlertConfig</a>]</td>
<td>No</td>
<td><code>PydanticUndefined</code></td>
<td>Alert configurations</td>
</tr>
<tr>
<td><strong>performance</strong></td>
<td><a href="#performanceconfig">PerformanceConfig</a></td>
<td>No</td>
<td><code>PydanticUndefined</code></td>
<td>Performance tuning</td>
</tr>
<tr>
<td><strong>environments</strong></td>
<td>Optional[Dict[str, Dict[str, Any]]]</td>
<td>No</td>
<td>-</td>
<td>Structure: same as ProjectConfig but with only overridden fields. Not yet validated strictly.</td>
</tr>
<tr>
<td><strong>semantic</strong></td>
<td>Optional[Dict[str, Any]]</td>
<td>No</td>
<td>-</td>
<td>Semantic layer configuration. Can be inline or reference external file. Contains metrics, dimensions, and materializations for self-service analytics. Example: semantic: { config: 'semantic_config.yaml' } or inline definitions.</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="pipelineconfig"><code>PipelineConfig</code><a class="headerlink" href="#pipelineconfig" title="Permanent link">&para;</a></h3>
<blockquote>
<p><em>Used in: <a href="#projectconfig">ProjectConfig</a></em></p>
</blockquote>
<p>Configuration for a pipeline.</p>
<p>Example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="nt">pipelines</span><span class="p">:</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">pipeline</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;user_onboarding&quot;</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Ingest</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">process</span><span class="nv"> </span><span class="s">new</span><span class="nv"> </span><span class="s">users&quot;</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="w">    </span><span class="nt">layer</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;silver&quot;</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="w">    </span><span class="nt">owner</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;data-team@example.com&quot;</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="w">    </span><span class="nt">freshness_sla</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;6h&quot;</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="w">    </span><span class="nt">nodes</span><span class="p">:</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;node1&quot;</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">...</span>
</code></pre></div></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>pipeline</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>Pipeline name</td>
</tr>
<tr>
<td><strong>description</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Pipeline description</td>
</tr>
<tr>
<td><strong>layer</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Logical layer (bronze/silver/gold)</td>
</tr>
<tr>
<td><strong>owner</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Pipeline owner (email or name)</td>
</tr>
<tr>
<td><strong>freshness_sla</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Expected freshness, e.g. '6h', '1d'</td>
</tr>
<tr>
<td><strong>freshness_anchor</strong></td>
<td>Literal['run_completion', 'table_max_timestamp', 'watermark_state']</td>
<td>No</td>
<td><code>run_completion</code></td>
<td>What defines freshness. Only 'run_completion' implemented initially.</td>
</tr>
<tr>
<td><strong>nodes</strong></td>
<td>List[<a href="#nodeconfig">NodeConfig</a>]</td>
<td>Yes</td>
<td>-</td>
<td>List of nodes in this pipeline</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="nodeconfig"><code>NodeConfig</code><a class="headerlink" href="#nodeconfig" title="Permanent link">&para;</a></h3>
<blockquote>
<p><em>Used in: <a href="#pipelineconfig">PipelineConfig</a></em></p>
</blockquote>
<p>Configuration for a single node.</p>
<h3 id="the-smart-node-pattern">🧠 "The Smart Node" Pattern<a class="headerlink" href="#the-smart-node-pattern" title="Permanent link">&para;</a></h3>
<p><strong>Business Problem:</strong>
"We need complex dependencies, caching for heavy computations, and the ability to run only specific parts of the pipeline."</p>
<p><strong>The Solution:</strong>
Nodes are the building blocks. They handle dependencies (<code>depends_on</code>), execution control (<code>tags</code>, <code>enabled</code>), and performance (<code>cache</code>).</p>
<h3 id="dag-dependencies">🕸️ DAG &amp; Dependencies<a class="headerlink" href="#dag-dependencies" title="Permanent link">&para;</a></h3>
<p><strong>The Glue of the Pipeline.</strong>
Nodes don't run in isolation. They form a Directed Acyclic Graph (DAG).</p>
<ul>
<li><strong><code>depends_on</code></strong>: Critical! If Node B reads from Node A (in memory), you MUST list <code>["Node A"]</code>.<ul>
<li><em>Implicit Data Flow</em>: If a node has no <code>read</code> block, it automatically picks up the DataFrame from its first dependency.</li>
</ul>
</li>
</ul>
<h3 id="smart-read-incremental-loading">🧠 Smart Read &amp; Incremental Loading<a class="headerlink" href="#smart-read-incremental-loading" title="Permanent link">&para;</a></h3>
<p><strong>Automated History Management.</strong></p>
<p>Odibi intelligently determines whether to perform a <strong>Full Load</strong> or an <strong>Incremental Load</strong> based on the state of the target.</p>
<p><strong>The "Smart Read" Logic:</strong>
1.  <strong>First Run (Full Load):</strong> If the target table (defined in <code>write</code>) does <strong>not exist</strong>:
    *   Incremental filtering rules are <strong>ignored</strong>.
    *   The entire source dataset is read.
    *   Use <code>write.first_run_query</code> (optional) to override the read query for this initial bootstrap (e.g., to backfill only 1 year of history instead of all time).</p>
<ol>
<li><strong>Subsequent Runs (Incremental Load):</strong> If the target table <strong>exists</strong>:<ul>
<li><strong>Rolling Window:</strong> Filters source data where <code>column &gt;= NOW() - lookback</code>.</li>
<li><strong>Stateful:</strong> Filters source data where <code>column &gt; last_high_water_mark</code>.</li>
</ul>
</li>
</ol>
<p>This ensures you don't need separate "init" and "update" pipelines. One config handles both lifecycle states.</p>
<h3 id="orchestration-tags">🏷️ Orchestration Tags<a class="headerlink" href="#orchestration-tags" title="Permanent link">&para;</a></h3>
<p><strong>Run What You Need.</strong>
Tags allow you to execute slices of your pipeline.
*   <code>odibi run --tag daily</code> -&gt; Runs all nodes with "daily" tag.
*   <code>odibi run --tag critical</code> -&gt; Runs high-priority nodes.</p>
<h3 id="choosing-your-logic-transformer-vs-transform">🤖 Choosing Your Logic: Transformer vs. Transform<a class="headerlink" href="#choosing-your-logic-transformer-vs-transform" title="Permanent link">&para;</a></h3>
<p><strong>1. The "Transformer" (Top-Level)</strong>
*   <strong>What it is:</strong> A pre-packaged, heavy-duty operation that defines the <em>entire purpose</em> of the node.
*   <strong>When to use:</strong> When applying a standard Data Engineering pattern (e.g., SCD2, Merge, Deduplicate).
*   <strong>Analogy:</strong> "Run this App."
*   <strong>Syntax:</strong> <code>transformer: "scd2"</code> + <code>params: {...}</code></p>
<p><strong>2. The "Transform Steps" (Process Chain)</strong>
*   <strong>What it is:</strong> A sequence of smaller steps (SQL, functions, operations) executed in order.
*   <strong>When to use:</strong> For custom business logic, data cleaning, or feature engineering pipelines.
*   <strong>Analogy:</strong> "Run this Script."
*   <strong>Syntax:</strong> <code>transform: { steps: [...] }</code></p>
<p><em>Note: You can use both! The <code>transformer</code> runs first, then <code>transform</code> steps refine the result.</em></p>
<h3 id="chaining-operations">🔗 Chaining Operations<a class="headerlink" href="#chaining-operations" title="Permanent link">&para;</a></h3>
<p><strong>You can mix and match!</strong>
The execution order is always:
1.  <strong>Read</strong> (or Dependency Injection)
2.  <strong>Transformer</strong> (The "App" logic, e.g., Deduplicate)
3.  <strong>Transform Steps</strong> (The "Script" logic, e.g., cleanup)
4.  <strong>Validation</strong>
5.  <strong>Write</strong></p>
<p><em>Constraint:</em> You must define <strong>at least one</strong> of <code>read</code>, <code>transformer</code>, <code>transform</code>, or <code>write</code>.</p>
<h3 id="example-app-vs-script">⚡ Example: App vs. Script<a class="headerlink" href="#example-app-vs-script" title="Permanent link">&para;</a></h3>
<p><strong>Scenario 1: The Full ETL Flow (Chained)</strong>
<em>Shows explicit Read, Transform Chain, and Write.</em></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="c1"># 1. Ingest (The Dependency)</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;load_raw_users&quot;</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="w">  </span><span class="nt">read</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> connection</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;s3_landing&quot;</span><span class="p p-Indicator">,</span><span class="nt"> format</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;json&quot;</span><span class="p p-Indicator">,</span><span class="nt"> path</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;users/*.json&quot;</span><span class="w"> </span><span class="p p-Indicator">}</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="w">  </span><span class="nt">write</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> connection</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;bronze&quot;</span><span class="p p-Indicator">,</span><span class="nt"> format</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;parquet&quot;</span><span class="p p-Indicator">,</span><span class="nt"> path</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;users_raw&quot;</span><span class="w"> </span><span class="p p-Indicator">}</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="c1"># 2. Process (The Consumer)</span>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;clean_users&quot;</span>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="w">  </span><span class="nt">depends_on</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;load_raw_users&quot;</span><span class="p p-Indicator">]</span>
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a>
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a><span class="w">  </span><span class="c1"># &quot;clean_text&quot; is a registered function from the Transformer Catalog</span>
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a><span class="w">  </span><span class="nt">transform</span><span class="p">:</span>
<a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a><span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
<a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">sql</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;SELECT</span><span class="nv"> </span><span class="s">*</span><span class="nv"> </span><span class="s">FROM</span><span class="nv"> </span><span class="s">df</span><span class="nv"> </span><span class="s">WHERE</span><span class="nv"> </span><span class="s">email</span><span class="nv"> </span><span class="s">IS</span><span class="nv"> </span><span class="s">NOT</span><span class="nv"> </span><span class="s">NULL&quot;</span>
<a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">function</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;clean_text&quot;</span>
<a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a><span class="w">        </span><span class="nt">params</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> columns</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;email&quot;</span><span class="p p-Indicator">],</span><span class="nt"> case</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;lower&quot;</span><span class="w"> </span><span class="p p-Indicator">}</span>
<a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a>
<a id="__codelineno-2-17" name="__codelineno-2-17" href="#__codelineno-2-17"></a><span class="w">  </span><span class="nt">write</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> connection</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;silver&quot;</span><span class="p p-Indicator">,</span><span class="nt"> format</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;delta&quot;</span><span class="p p-Indicator">,</span><span class="nt"> table</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;dim_users&quot;</span><span class="w"> </span><span class="p p-Indicator">}</span>
</code></pre></div>
<p><strong>Scenario 2: The "App" Node (Top-Level Transformer)</strong>
<em>Shows a node that applies a pattern (Deduplicate) to incoming data.</em></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;deduped_users&quot;</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="w">  </span><span class="nt">depends_on</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;clean_users&quot;</span><span class="p p-Indicator">]</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="w">  </span><span class="c1"># The &quot;App&quot;: Deduplication (From Transformer Catalog)</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="w">  </span><span class="nt">transformer</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;deduplicate&quot;</span>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="w">  </span><span class="nt">params</span><span class="p">:</span>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="w">    </span><span class="nt">keys</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;user_id&quot;</span><span class="p p-Indicator">]</span>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="w">    </span><span class="nt">order_by</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;updated_at</span><span class="nv"> </span><span class="s">DESC&quot;</span>
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a>
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a><span class="w">  </span><span class="nt">write</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> connection</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;gold&quot;</span><span class="p p-Indicator">,</span><span class="nt"> format</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;delta&quot;</span><span class="p p-Indicator">,</span><span class="nt"> table</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;users_unique&quot;</span><span class="w"> </span><span class="p p-Indicator">}</span>
</code></pre></div>
<p><strong>Scenario 3: The Tagged Runner (Reporting)</strong>
<em>Shows how tags allow running specific slices (e.g., <code>odibi run --tag daily</code>).</em></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;daily_report&quot;</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="w">  </span><span class="nt">tags</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;daily&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;reporting&quot;</span><span class="p p-Indicator">]</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="w">  </span><span class="nt">depends_on</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;deduped_users&quot;</span><span class="p p-Indicator">]</span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="w">  </span><span class="c1"># Ad-hoc aggregation script</span>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="w">  </span><span class="nt">transform</span><span class="p">:</span>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">sql</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;SELECT</span><span class="nv"> </span><span class="s">date_trunc(&#39;day&#39;,</span><span class="nv"> </span><span class="s">updated_at)</span><span class="nv"> </span><span class="s">as</span><span class="nv"> </span><span class="s">day,</span><span class="nv"> </span><span class="s">count(*)</span><span class="nv"> </span><span class="s">as</span><span class="nv"> </span><span class="s">total</span><span class="nv"> </span><span class="s">FROM</span><span class="nv"> </span><span class="s">df</span><span class="nv"> </span><span class="s">GROUP</span><span class="nv"> </span><span class="s">BY</span><span class="nv"> </span><span class="s">1&quot;</span>
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a>
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a><span class="w">  </span><span class="nt">write</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> connection</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;local_data&quot;</span><span class="p p-Indicator">,</span><span class="nt"> format</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;csv&quot;</span><span class="p p-Indicator">,</span><span class="nt"> path</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;reports/daily_stats.csv&quot;</span><span class="w"> </span><span class="p p-Indicator">}</span>
</code></pre></div>
<p><strong>Scenario 4: The "Kitchen Sink" (All Operations)</strong>
<em>Shows Read -&gt; Transformer -&gt; Transform -&gt; Write execution order.</em></p>
<p><strong>Why this works:</strong>
1.  <strong>Internal Chaining (<code>df</code>):</strong> In every step (Transformer or SQL), <code>df</code> refers to the output of the <em>previous</em> step.
2.  <strong>External Access (<code>depends_on</code>):</strong> If you added <code>depends_on: ["other_node"]</code>, you could also run <code>SELECT * FROM other_node</code> in your SQL steps!</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;complex_flow&quot;</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="w">  </span><span class="c1"># 1. Read -&gt; Creates initial &#39;df&#39;</span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="w">  </span><span class="nt">read</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> connection</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;bronze&quot;</span><span class="p p-Indicator">,</span><span class="nt"> format</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;parquet&quot;</span><span class="p p-Indicator">,</span><span class="nt"> path</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;users&quot;</span><span class="w"> </span><span class="p p-Indicator">}</span>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="w">  </span><span class="c1"># 2. Transformer (The &quot;App&quot;: Deduplicate first)</span>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="w">  </span><span class="c1"># Takes &#39;df&#39; (from Read), dedups it, returns new &#39;df&#39;</span>
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="w">  </span><span class="nt">transformer</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;deduplicate&quot;</span>
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="w">  </span><span class="nt">params</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> keys</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;user_id&quot;</span><span class="p p-Indicator">],</span><span class="nt"> order_by</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;updated_at</span><span class="nv"> </span><span class="s">DESC&quot;</span><span class="w"> </span><span class="p p-Indicator">}</span>
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a>
<a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="w">  </span><span class="c1"># 3. Transform Steps (The &quot;Script&quot;: Filter AFTER deduplication)</span>
<a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a><span class="w">  </span><span class="c1"># SQL sees the deduped data as &#39;df&#39;</span>
<a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a><span class="w">  </span><span class="nt">transform</span><span class="p">:</span>
<a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a><span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
<a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">sql</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;SELECT</span><span class="nv"> </span><span class="s">*</span><span class="nv"> </span><span class="s">FROM</span><span class="nv"> </span><span class="s">df</span><span class="nv"> </span><span class="s">WHERE</span><span class="nv"> </span><span class="s">status</span><span class="nv"> </span><span class="s">=</span><span class="nv"> </span><span class="s">&#39;active&#39;&quot;</span>
<a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a>
<a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a><span class="w">  </span><span class="c1"># 4. Write -&gt; Saves the final filtered &#39;df&#39;</span>
<a id="__codelineno-5-17" name="__codelineno-5-17" href="#__codelineno-5-17"></a><span class="w">  </span><span class="nt">write</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> connection</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;silver&quot;</span><span class="p p-Indicator">,</span><span class="nt"> format</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;delta&quot;</span><span class="p p-Indicator">,</span><span class="nt"> table</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;active_unique_users&quot;</span><span class="w"> </span><span class="p p-Indicator">}</span>
</code></pre></div>
<h3 id="transformer-catalog">📚 Transformer Catalog<a class="headerlink" href="#transformer-catalog" title="Permanent link">&para;</a></h3>
<p>These are the built-in functions you can use in two ways:</p>
<ol>
<li><strong>As a Top-Level Transformer:</strong> <code>transformer: "name"</code> (Defines the node's main logic)</li>
<li><strong>As a Step in a Chain:</strong> <code>transform: { steps: [{ function: "name" }] }</code> (Part of a sequence)</li>
</ol>
<p><em>Note: <code>merge</code> and <code>scd2</code> are special "Heavy Lifters" and should generally be used as Top-Level Transformers.</em></p>
<p><strong>Data Engineering Patterns</strong>
*   <code>merge</code>: Upsert/Merge into target (Delta/SQL). <em>(<a href="#mergeparams">Params</a>)</em>
*   <code>scd2</code>: Slowly Changing Dimensions Type 2. <em>(<a href="#scd2params">Params</a>)</em>
*   <code>deduplicate</code>: Remove duplicates using window functions. <em>(<a href="#deduplicateparams">Params</a>)</em></p>
<p><strong>Relational Algebra</strong>
*   <code>join</code>: Join two datasets. <em>(<a href="#joinparams">Params</a>)</em>
*   <code>union</code>: Stack datasets vertically. <em>(<a href="#unionparams">Params</a>)</em>
*   <code>pivot</code>: Rotate rows to columns. <em>(<a href="#pivotparams">Params</a>)</em>
*   <code>unpivot</code>: Rotate columns to rows (melt). <em>(<a href="#unpivotparams">Params</a>)</em>
*   <code>aggregate</code>: Group by and sum/count/avg. <em>(<a href="#aggregateparams">Params</a>)</em></p>
<p><strong>Data Quality &amp; Cleaning</strong>
*   <code>validate_and_flag</code>: Check rules and flag invalid rows. <em>(<a href="#validateandflagparams">Params</a>)</em>
*   <code>clean_text</code>: Trim and normalize case. <em>(<a href="#cleantextparams">Params</a>)</em>
*   <code>filter_rows</code>: SQL-based filtering. <em>(<a href="#filterrowsparams">Params</a>)</em>
*   <code>fill_nulls</code>: Replace NULLs with defaults. <em>(<a href="#fillnullsparams">Params</a>)</em></p>
<p><strong>Feature Engineering</strong>
*   <code>derive_columns</code>: Create new cols via SQL expressions. <em>(<a href="#derivecolumnsparams">Params</a>)</em>
*   <code>case_when</code>: Conditional logic (if-else). <em>(<a href="#casewhenparams">Params</a>)</em>
*   <code>generate_surrogate_key</code>: Create MD5 keys from columns. <em>(<a href="#surrogatekeyparams">Params</a>)</em>
*   <code>date_diff</code>, <code>date_add</code>, <code>date_trunc</code>: Date arithmetic.</p>
<p><strong>Scenario 1: The Full ETL Flow</strong>
<em>(Show two nodes: one loader, one processor)</em></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="c1"># 1. Ingest (The Dependency)</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;load_raw_users&quot;</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="w">  </span><span class="nt">read</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> connection</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;s3_landing&quot;</span><span class="p p-Indicator">,</span><span class="nt"> format</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;json&quot;</span><span class="p p-Indicator">,</span><span class="nt"> path</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;users/*.json&quot;</span><span class="w"> </span><span class="p p-Indicator">}</span>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="w">  </span><span class="nt">write</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> connection</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;bronze&quot;</span><span class="p p-Indicator">,</span><span class="nt"> format</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;parquet&quot;</span><span class="p p-Indicator">,</span><span class="nt"> path</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;users_raw&quot;</span><span class="w"> </span><span class="p p-Indicator">}</span>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="c1"># 2. Process (The Consumer)</span>
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;clean_users&quot;</span>
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="w">  </span><span class="nt">depends_on</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;load_raw_users&quot;</span><span class="p p-Indicator">]</span><span class="w">  </span><span class="c1"># &lt;--- Explicit dependency</span>
<a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a>
<a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a><span class="w">  </span><span class="c1"># Explicit Transformation Steps</span>
<a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a><span class="w">  </span><span class="nt">transform</span><span class="p">:</span>
<a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a><span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
<a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">sql</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;SELECT</span><span class="nv"> </span><span class="s">*</span><span class="nv"> </span><span class="s">FROM</span><span class="nv"> </span><span class="s">df</span><span class="nv"> </span><span class="s">WHERE</span><span class="nv"> </span><span class="s">email</span><span class="nv"> </span><span class="s">IS</span><span class="nv"> </span><span class="s">NOT</span><span class="nv"> </span><span class="s">NULL&quot;</span>
<a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">function</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;clean_text&quot;</span>
<a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a><span class="w">        </span><span class="nt">params</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> columns</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;email&quot;</span><span class="p p-Indicator">],</span><span class="nt"> case</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;lower&quot;</span><span class="w"> </span><span class="p p-Indicator">}</span>
<a id="__codelineno-6-16" name="__codelineno-6-16" href="#__codelineno-6-16"></a>
<a id="__codelineno-6-17" name="__codelineno-6-17" href="#__codelineno-6-17"></a><span class="w">  </span><span class="nt">write</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> connection</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;silver&quot;</span><span class="p p-Indicator">,</span><span class="nt"> format</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;delta&quot;</span><span class="p p-Indicator">,</span><span class="nt"> table</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;dim_users&quot;</span><span class="w"> </span><span class="p p-Indicator">}</span>
</code></pre></div>
<p><strong>Scenario 2: The "App" Node (Transformer)</strong>
<em>(Show a node that is a Transformer, no read needed if it picks up from dependency)</em></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;deduped_users&quot;</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="w">  </span><span class="nt">depends_on</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;clean_users&quot;</span><span class="p p-Indicator">]</span>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="w">  </span><span class="c1"># The &quot;App&quot;: Deduplication</span>
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="w">  </span><span class="nt">transformer</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;deduplicate&quot;</span>
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="w">  </span><span class="nt">params</span><span class="p">:</span>
<a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="w">    </span><span class="nt">keys</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;user_id&quot;</span><span class="p p-Indicator">]</span>
<a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="w">    </span><span class="nt">order_by</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;updated_at</span><span class="nv"> </span><span class="s">DESC&quot;</span>
<a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a>
<a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a><span class="w">  </span><span class="nt">write</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> connection</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;gold&quot;</span><span class="p p-Indicator">,</span><span class="nt"> format</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;delta&quot;</span><span class="p p-Indicator">,</span><span class="nt"> table</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;users_unique&quot;</span><span class="w"> </span><span class="p p-Indicator">}</span>
</code></pre></div>
<p><strong>Scenario 3: The Tagged Runner</strong>
<em>Run only this with <code>odibi run --tag daily</code></em>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;daily_report&quot;</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="w">  </span><span class="nt">tags</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;daily&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;reporting&quot;</span><span class="p p-Indicator">]</span>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="w">  </span><span class="c1"># ...</span>
</code></pre></div></p>
<p><strong>Scenario 4: Pre/Post SQL Hooks</strong>
<em>Setup and cleanup with SQL statements.</em>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;optimize_sales&quot;</span>
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="w">  </span><span class="nt">depends_on</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;load_sales&quot;</span><span class="p p-Indicator">]</span>
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="w">  </span><span class="nt">pre_sql</span><span class="p">:</span>
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;SET</span><span class="nv"> </span><span class="s">spark.sql.shuffle.partitions</span><span class="nv"> </span><span class="s">=</span><span class="nv"> </span><span class="s">200&quot;</span>
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;CREATE</span><span class="nv"> </span><span class="s">TEMP</span><span class="nv"> </span><span class="s">VIEW</span><span class="nv"> </span><span class="s">staging</span><span class="nv"> </span><span class="s">AS</span><span class="nv"> </span><span class="s">SELECT</span><span class="nv"> </span><span class="s">*</span><span class="nv"> </span><span class="s">FROM</span><span class="nv"> </span><span class="s">bronze.raw_sales&quot;</span>
<a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a><span class="w">  </span><span class="nt">transform</span><span class="p">:</span>
<a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
<a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">sql</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;SELECT</span><span class="nv"> </span><span class="s">*</span><span class="nv"> </span><span class="s">FROM</span><span class="nv"> </span><span class="s">staging</span><span class="nv"> </span><span class="s">WHERE</span><span class="nv"> </span><span class="s">amount</span><span class="nv"> </span><span class="s">&gt;</span><span class="nv"> </span><span class="s">0&quot;</span>
<a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a><span class="w">  </span><span class="nt">post_sql</span><span class="p">:</span>
<a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;OPTIMIZE</span><span class="nv"> </span><span class="s">gold.fact_sales</span><span class="nv"> </span><span class="s">ZORDER</span><span class="nv"> </span><span class="s">BY</span><span class="nv"> </span><span class="s">(customer_id)&quot;</span>
<a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;VACUUM</span><span class="nv"> </span><span class="s">gold.fact_sales</span><span class="nv"> </span><span class="s">RETAIN</span><span class="nv"> </span><span class="s">168</span><span class="nv"> </span><span class="s">HOURS&quot;</span>
<a id="__codelineno-9-12" name="__codelineno-9-12" href="#__codelineno-9-12"></a><span class="w">  </span><span class="nt">write</span><span class="p">:</span>
<a id="__codelineno-9-13" name="__codelineno-9-13" href="#__codelineno-9-13"></a><span class="w">    </span><span class="nt">connection</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;gold&quot;</span>
<a id="__codelineno-9-14" name="__codelineno-9-14" href="#__codelineno-9-14"></a><span class="w">    </span><span class="nt">format</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;delta&quot;</span>
<a id="__codelineno-9-15" name="__codelineno-9-15" href="#__codelineno-9-15"></a><span class="w">    </span><span class="nt">table</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;fact_sales&quot;</span>
</code></pre></div></p>
<p><strong>Scenario 5: Materialization Strategies</strong>
<em>Choose how output is persisted.</em>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="c1"># Option 1: View (no physical storage, logical model)</span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;vw_active_customers&quot;</span>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="w">  </span><span class="nt">materialized</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;view&quot;</span><span class="w">  </span><span class="c1"># Creates SQL view instead of table</span>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="w">  </span><span class="nt">transform</span><span class="p">:</span>
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">sql</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;SELECT</span><span class="nv"> </span><span class="s">*</span><span class="nv"> </span><span class="s">FROM</span><span class="nv"> </span><span class="s">customers</span><span class="nv"> </span><span class="s">WHERE</span><span class="nv"> </span><span class="s">status</span><span class="nv"> </span><span class="s">=</span><span class="nv"> </span><span class="s">&#39;active&#39;&quot;</span>
<a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="w">  </span><span class="nt">write</span><span class="p">:</span>
<a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a><span class="w">    </span><span class="nt">connection</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;gold&quot;</span>
<a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a><span class="w">    </span><span class="nt">table</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;vw_active_customers&quot;</span>
<a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a>
<a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a><span class="c1"># Option 2: Incremental (append to existing Delta table)</span>
<a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;fact_events&quot;</span>
<a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a><span class="w">  </span><span class="nt">materialized</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;incremental&quot;</span><span class="w">  </span><span class="c1"># Uses APPEND mode</span>
<a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a><span class="w">  </span><span class="nt">read</span><span class="p">:</span>
<a id="__codelineno-10-15" name="__codelineno-10-15" href="#__codelineno-10-15"></a><span class="w">    </span><span class="nt">connection</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;bronze&quot;</span>
<a id="__codelineno-10-16" name="__codelineno-10-16" href="#__codelineno-10-16"></a><span class="w">    </span><span class="nt">table</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;raw_events&quot;</span>
<a id="__codelineno-10-17" name="__codelineno-10-17" href="#__codelineno-10-17"></a><span class="w">    </span><span class="nt">incremental</span><span class="p">:</span>
<a id="__codelineno-10-18" name="__codelineno-10-18" href="#__codelineno-10-18"></a><span class="w">      </span><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;stateful&quot;</span>
<a id="__codelineno-10-19" name="__codelineno-10-19" href="#__codelineno-10-19"></a><span class="w">      </span><span class="nt">column</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;event_time&quot;</span>
<a id="__codelineno-10-20" name="__codelineno-10-20" href="#__codelineno-10-20"></a><span class="w">  </span><span class="nt">write</span><span class="p">:</span>
<a id="__codelineno-10-21" name="__codelineno-10-21" href="#__codelineno-10-21"></a><span class="w">    </span><span class="nt">connection</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;silver&quot;</span>
<a id="__codelineno-10-22" name="__codelineno-10-22" href="#__codelineno-10-22"></a><span class="w">    </span><span class="nt">format</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;delta&quot;</span>
<a id="__codelineno-10-23" name="__codelineno-10-23" href="#__codelineno-10-23"></a><span class="w">    </span><span class="nt">table</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;fact_events&quot;</span>
<a id="__codelineno-10-24" name="__codelineno-10-24" href="#__codelineno-10-24"></a>
<a id="__codelineno-10-25" name="__codelineno-10-25" href="#__codelineno-10-25"></a><span class="c1"># Option 3: Table (default - full overwrite)</span>
<a id="__codelineno-10-26" name="__codelineno-10-26" href="#__codelineno-10-26"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;dim_products&quot;</span>
<a id="__codelineno-10-27" name="__codelineno-10-27" href="#__codelineno-10-27"></a><span class="w">  </span><span class="nt">materialized</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;table&quot;</span><span class="w">  </span><span class="c1"># Default behavior</span>
<a id="__codelineno-10-28" name="__codelineno-10-28" href="#__codelineno-10-28"></a><span class="w">  </span><span class="c1"># ...</span>
</code></pre></div></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>name</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>Unique node name</td>
</tr>
<tr>
<td><strong>description</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Human-readable description</td>
</tr>
<tr>
<td><strong>explanation</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Markdown-formatted explanation of the node's transformation logic. Rendered in the Data Story HTML report. Supports tables, code blocks, and rich formatting. Use to document business rules, data mappings, and transformation rationale for stakeholder communication. Mutually exclusive with 'explanation_file'.</td>
</tr>
<tr>
<td><strong>explanation_file</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Path to external Markdown file containing the explanation, relative to the YAML file. Use for longer documentation to keep YAML files clean. Mutually exclusive with 'explanation'.</td>
</tr>
<tr>
<td><strong>runbook_url</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>URL to troubleshooting guide or runbook. Shown as 'Troubleshooting guide →' link on failures.</td>
</tr>
<tr>
<td><strong>enabled</strong></td>
<td>bool</td>
<td>No</td>
<td><code>True</code></td>
<td>If False, node is skipped during execution</td>
</tr>
<tr>
<td><strong>tags</strong></td>
<td>List[str]</td>
<td>No</td>
<td><code>PydanticUndefined</code></td>
<td>Operational tags for selective execution (e.g., 'daily', 'critical'). Use with <code>odibi run --tag</code>.</td>
</tr>
<tr>
<td><strong>depends_on</strong></td>
<td>List[str]</td>
<td>No</td>
<td><code>PydanticUndefined</code></td>
<td>List of parent nodes that must complete before this node runs. The output of these nodes is available for reading.</td>
</tr>
<tr>
<td><strong>columns</strong></td>
<td>Dict[str, <a href="#columnmetadata">ColumnMetadata</a>]</td>
<td>No</td>
<td><code>PydanticUndefined</code></td>
<td>Data Dictionary defining the output schema. Used for documentation, PII tagging, and validation.</td>
</tr>
<tr>
<td><strong>read</strong></td>
<td>Optional[<a href="#readconfig">ReadConfig</a>]</td>
<td>No</td>
<td>-</td>
<td>Input operation (Load). If missing, data is taken from the first dependency.</td>
</tr>
<tr>
<td><strong>inputs</strong></td>
<td>Optional[Dict[str, str | Dict[str, Any]]]</td>
<td>No</td>
<td>-</td>
<td>Multi-input support for cross-pipeline dependencies. Map input names to either: (a) $pipeline.node reference (e.g., '$read_bronze.shift_events') (b) Explicit read config dict. Cannot be used with 'read'. Example: inputs: {events: '$read_bronze.events', calendar: {connection: 'goat', path: 'cal'}}</td>
</tr>
<tr>
<td><strong>transform</strong></td>
<td>Optional[<a href="#transformconfig">TransformConfig</a>]</td>
<td>No</td>
<td>-</td>
<td>Chain of fine-grained transformation steps (SQL, functions). Runs after 'transformer' if both are present.</td>
</tr>
<tr>
<td><strong>write</strong></td>
<td>Optional[<a href="#writeconfig">WriteConfig</a>]</td>
<td>No</td>
<td>-</td>
<td>Output operation (Save to file/table).</td>
</tr>
<tr>
<td><strong>streaming</strong></td>
<td>bool</td>
<td>No</td>
<td><code>False</code></td>
<td>Enable streaming execution for this node (Spark only)</td>
</tr>
<tr>
<td><strong>transformer</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Name of the 'App' logic to run (e.g., 'deduplicate', 'scd2'). See Transformer Catalog for options.</td>
</tr>
<tr>
<td><strong>params</strong></td>
<td>Dict[str, Any]</td>
<td>No</td>
<td><code>PydanticUndefined</code></td>
<td>Parameters for transformer</td>
</tr>
<tr>
<td><strong>pre_sql</strong></td>
<td>List[str]</td>
<td>No</td>
<td><code>PydanticUndefined</code></td>
<td>List of SQL statements to execute before node runs. Use for setup: temp tables, variable initialization, grants. Example: ['SET spark.sql.shuffle.partitions=200', 'CREATE TEMP VIEW src AS SELECT * FROM raw']</td>
</tr>
<tr>
<td><strong>post_sql</strong></td>
<td>List[str]</td>
<td>No</td>
<td><code>PydanticUndefined</code></td>
<td>List of SQL statements to execute after node completes. Use for cleanup, optimization, or audit logging. Example: ['OPTIMIZE gold.fact_sales', 'VACUUM gold.fact_sales RETAIN 168 HOURS']</td>
</tr>
<tr>
<td><strong>materialized</strong></td>
<td>Optional[Literal['table', 'view', 'incremental']]</td>
<td>No</td>
<td>-</td>
<td>Materialization strategy. Options: 'table' (default physical write), 'view' (creates SQL view instead of table), 'incremental' (uses append mode for Delta tables). Views are useful for Gold layer logical models.</td>
</tr>
<tr>
<td><strong>cache</strong></td>
<td>bool</td>
<td>No</td>
<td><code>False</code></td>
<td>Cache result for reuse</td>
</tr>
<tr>
<td><strong>log_level</strong></td>
<td>Optional[LogLevel]</td>
<td>No</td>
<td>-</td>
<td>Override log level for this node</td>
</tr>
<tr>
<td><strong>on_error</strong></td>
<td>ErrorStrategy</td>
<td>No</td>
<td><code>ErrorStrategy.FAIL_LATER</code></td>
<td>Failure handling strategy</td>
</tr>
<tr>
<td><strong>validation</strong></td>
<td>Optional[<a href="#validationconfig">ValidationConfig</a>]</td>
<td>No</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td><strong>contracts</strong></td>
<td>List[<a href="#contracts-data-quality-gates">TestConfig</a>]</td>
<td>No</td>
<td><code>PydanticUndefined</code></td>
<td>Pre-condition contracts (Circuit Breakers). Runs on input data before transformation.<br><strong>Options:</strong> <a href="#notnulltest">NotNullTest</a>, <a href="#uniquetest">UniqueTest</a>, <a href="#acceptedvaluestest">AcceptedValuesTest</a>, <a href="#rowcounttest">RowCountTest</a>, <a href="#customsqltest">CustomSQLTest</a>, <a href="#rangetest">RangeTest</a>, <a href="#regexmatchtest">RegexMatchTest</a>, <a href="#volumedroptest">VolumeDropTest</a>, <a href="#schemacontract">SchemaContract</a>, <a href="#distributioncontract">DistributionContract</a>, <a href="#freshnesscontract">FreshnessContract</a></td>
</tr>
<tr>
<td><strong>schema_policy</strong></td>
<td>Optional[<a href="#schemapolicyconfig">SchemaPolicyConfig</a>]</td>
<td>No</td>
<td>-</td>
<td>Schema drift handling policy</td>
</tr>
<tr>
<td><strong>privacy</strong></td>
<td>Optional[<a href="#privacyconfig">PrivacyConfig</a>]</td>
<td>No</td>
<td>-</td>
<td>Privacy Suite: PII anonymization settings</td>
</tr>
<tr>
<td><strong>sensitive</strong></td>
<td>bool | List[str]</td>
<td>No</td>
<td><code>False</code></td>
<td>If true or list of columns, masks sample data in stories</td>
</tr>
<tr>
<td><strong>source_yaml</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Internal: source YAML file path for sql_file resolution</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="columnmetadata"><code>ColumnMetadata</code><a class="headerlink" href="#columnmetadata" title="Permanent link">&para;</a></h3>
<blockquote>
<p><em>Used in: <a href="#nodeconfig">NodeConfig</a></em></p>
</blockquote>
<p>Metadata for a column in the data dictionary.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>description</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Column description</td>
</tr>
<tr>
<td><strong>pii</strong></td>
<td>bool</td>
<td>No</td>
<td><code>False</code></td>
<td>Contains PII?</td>
</tr>
<tr>
<td><strong>tags</strong></td>
<td>List[str]</td>
<td>No</td>
<td><code>PydanticUndefined</code></td>
<td>Tags (e.g. 'business_key', 'measure')</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="systemconfig"><code>SystemConfig</code><a class="headerlink" href="#systemconfig" title="Permanent link">&para;</a></h3>
<blockquote>
<p><em>Used in: <a href="#projectconfig">ProjectConfig</a></em></p>
</blockquote>
<p>Configuration for the Odibi System Catalog (The Brain).</p>
<p>Stores metadata, state, and pattern configurations. The primary connection
must be a storage connection (blob/local) that supports Delta tables.</p>
<p>Example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="nt">system</span><span class="p">:</span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="w">  </span><span class="nt">connection</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">adls_bronze</span><span class="w">        </span><span class="c1"># Primary - must be blob/local storage</span>
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="w">  </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">_odibi_system</span>
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="w">  </span><span class="nt">environment</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dev</span>
</code></pre></div></p>
<p>With sync to SQL Server (for dashboards/queries):
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="nt">system</span><span class="p">:</span>
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="w">  </span><span class="nt">connection</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">adls_prod</span><span class="w">          </span><span class="c1"># Primary - Delta tables</span>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="w">  </span><span class="nt">environment</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">prod</span>
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="w">  </span><span class="nt">sync_to</span><span class="p">:</span>
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="w">    </span><span class="nt">connection</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sql_server_prod</span><span class="w">  </span><span class="c1"># Secondary - SQL for visibility</span>
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a><span class="w">    </span><span class="nt">schema_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">odibi_system</span>
</code></pre></div></p>
<p>With sync to another blob (cross-region backup):
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="nt">system</span><span class="p">:</span>
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="w">  </span><span class="nt">connection</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">adls_us_east</span>
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="w">  </span><span class="nt">sync_to</span><span class="p">:</span>
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="w">    </span><span class="nt">connection</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">adls_us_west</span>
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="w">    </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">_odibi_system_replica</span>
</code></pre></div></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>connection</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>Connection for primary system tables. Must be blob storage (azure_blob) or local filesystem - NOT SQL Server. Delta tables require storage backends.</td>
</tr>
<tr>
<td><strong>path</strong></td>
<td>str</td>
<td>No</td>
<td><code>_odibi_system</code></td>
<td>Path relative to connection root</td>
</tr>
<tr>
<td><strong>environment</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Environment tag (e.g., 'dev', 'qat', 'prod'). Written to all system table records for cross-environment querying.</td>
</tr>
<tr>
<td><strong>schema_name</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Deprecated. Use sync_to.schema_name for SQL Server targets.</td>
</tr>
<tr>
<td><strong>sync_to</strong></td>
<td>Optional[<a href="#synctoconfig">SyncToConfig</a>]</td>
<td>No</td>
<td>-</td>
<td>Secondary destination to sync system catalog data to. Use for SQL Server dashboards or cross-region Delta replication.</td>
</tr>
<tr>
<td><strong>sync_from</strong></td>
<td>Optional[<a href="#syncfromconfig">SyncFromConfig</a>]</td>
<td>No</td>
<td>-</td>
<td>Source to sync system data from. Enables pushing local development data to centralized system tables.</td>
</tr>
<tr>
<td><strong>cost_per_compute_hour</strong></td>
<td>Optional[float]</td>
<td>No</td>
<td>-</td>
<td>Estimated cost per compute hour (USD) for cost tracking</td>
</tr>
<tr>
<td><strong>databricks_billing_enabled</strong></td>
<td>bool</td>
<td>No</td>
<td><code>False</code></td>
<td>Attempt to query Databricks billing tables for actual costs</td>
</tr>
<tr>
<td><strong>retention_days</strong></td>
<td>Optional[<a href="#retentionconfig">RetentionConfig</a>]</td>
<td>No</td>
<td>-</td>
<td>Retention periods for system tables</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="syncfromconfig"><code>SyncFromConfig</code><a class="headerlink" href="#syncfromconfig" title="Permanent link">&para;</a></h3>
<blockquote>
<p><em>Used in: <a href="#systemconfig">SystemConfig</a></em></p>
</blockquote>
<p>Configuration for syncing system data from a source location.</p>
<p>Used to pull system data (runs, state) from another backend into the target.</p>
<p>Example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="nt">sync_from</span><span class="p">:</span>
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="w">  </span><span class="nt">connection</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">local_parquet</span>
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="w">  </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">.odibi/system/</span>
</code></pre></div></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>connection</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>Connection name for the source system data</td>
</tr>
<tr>
<td><strong>path</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Path to source system data (for file-based sources)</td>
</tr>
<tr>
<td><strong>schema_name</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Schema name for SQL Server source (if applicable)</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="connections">Connections<a class="headerlink" href="#connections" title="Permanent link">&para;</a></h2>
<h3 id="localconnectionconfig"><code>LocalConnectionConfig</code><a class="headerlink" href="#localconnectionconfig" title="Permanent link">&para;</a></h3>
<blockquote>
<p><em>Used in: <a href="#projectconfig">ProjectConfig</a></em></p>
</blockquote>
<p>Local filesystem connection.</p>
<p><strong>When to Use:</strong> Development, testing, small datasets, local processing.</p>
<p><strong>See Also:</strong> <a href="#azureblobconnectionconfig">AzureBlobConnectionConfig</a> for cloud alternatives.</p>
<p>Example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="nt">local_data</span><span class="p">:</span>
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;local&quot;</span>
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="w">  </span><span class="nt">base_path</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;./data&quot;</span>
</code></pre></div></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>type</strong></td>
<td>Literal['local']</td>
<td>No</td>
<td><code>ConnectionType.LOCAL</code></td>
<td>-</td>
</tr>
<tr>
<td><strong>validation_mode</strong></td>
<td>ValidationMode</td>
<td>No</td>
<td><code>ValidationMode.LAZY</code></td>
<td>-</td>
</tr>
<tr>
<td><strong>base_path</strong></td>
<td>str</td>
<td>No</td>
<td><code>./data</code></td>
<td>Base directory path</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="deltaconnectionconfig"><code>DeltaConnectionConfig</code><a class="headerlink" href="#deltaconnectionconfig" title="Permanent link">&para;</a></h3>
<blockquote>
<p><em>Used in: <a href="#projectconfig">ProjectConfig</a></em></p>
</blockquote>
<p>Delta Lake connection for ACID-compliant data lakes.</p>
<p><strong>When to Use:</strong>
- Production data lakes on Azure/AWS/GCP
- Need time travel, ACID transactions, schema evolution
- Upsert/merge operations</p>
<p><strong>See Also:</strong> <a href="#writeconfig">WriteConfig</a> for Delta write options</p>
<p>Scenario 1: Delta via metastore
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="nt">delta_silver</span><span class="p">:</span>
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;delta&quot;</span>
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="w">  </span><span class="nt">catalog</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;spark_catalog&quot;</span>
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="w">  </span><span class="nt">schema</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;silver_db&quot;</span>
</code></pre></div></p>
<p>Scenario 2: Direct path + Node usage
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="nt">delta_local</span><span class="p">:</span>
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;local&quot;</span>
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="w">  </span><span class="nt">base_path</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;dbfs:/mnt/delta&quot;</span>
<a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a>
<a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a><span class="c1"># In pipeline:</span>
<a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a><span class="c1"># read:</span>
<a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a><span class="c1">#   connection: &quot;delta_local&quot;</span>
<a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a><span class="c1">#   format: &quot;delta&quot;</span>
<a id="__codelineno-17-9" name="__codelineno-17-9" href="#__codelineno-17-9"></a><span class="c1">#   path: &quot;bronze/orders&quot;</span>
</code></pre></div></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>type</strong></td>
<td>Literal['delta']</td>
<td>No</td>
<td><code>ConnectionType.DELTA</code></td>
<td>-</td>
</tr>
<tr>
<td><strong>validation_mode</strong></td>
<td>ValidationMode</td>
<td>No</td>
<td><code>ValidationMode.LAZY</code></td>
<td>-</td>
</tr>
<tr>
<td><strong>catalog</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>Spark catalog name (e.g. 'spark_catalog')</td>
</tr>
<tr>
<td><strong>schema_name</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>Database/schema name</td>
</tr>
<tr>
<td><strong>table</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Optional default table name for this connection (used by story/pipeline helpers)</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="azureblobconnectionconfig"><code>AzureBlobConnectionConfig</code><a class="headerlink" href="#azureblobconnectionconfig" title="Permanent link">&para;</a></h3>
<blockquote>
<p><em>Used in: <a href="#projectconfig">ProjectConfig</a></em></p>
</blockquote>
<p>Azure Blob Storage / ADLS Gen2 connection.</p>
<p><strong>When to Use:</strong> Azure-based data lakes, landing zones, raw data storage.</p>
<p><strong>See Also:</strong> <a href="#deltaconnectionconfig">DeltaConnectionConfig</a> for Delta-specific options</p>
<p>Scenario 1: Prod with Key Vault-managed key
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="nt">adls_bronze</span><span class="p">:</span>
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;azure_blob&quot;</span>
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="w">  </span><span class="nt">account_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;myaccount&quot;</span>
<a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="w">  </span><span class="nt">container</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;bronze&quot;</span>
<a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a><span class="w">  </span><span class="nt">auth</span><span class="p">:</span>
<a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a><span class="w">    </span><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;key_vault&quot;</span>
<a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a><span class="w">    </span><span class="nt">key_vault</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;kv-data&quot;</span>
<a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a><span class="w">    </span><span class="nt">secret</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;adls-account-key&quot;</span>
</code></pre></div></p>
<p>Scenario 2: Local dev with inline account key
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="nt">adls_dev</span><span class="p">:</span>
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;azure_blob&quot;</span>
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a><span class="w">  </span><span class="nt">account_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;devaccount&quot;</span>
<a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a><span class="w">  </span><span class="nt">container</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sandbox&quot;</span>
<a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a><span class="w">  </span><span class="nt">auth</span><span class="p">:</span>
<a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a><span class="w">    </span><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;account_key&quot;</span>
<a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a><span class="w">    </span><span class="nt">account_key</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;${ADLS_ACCOUNT_KEY}&quot;</span>
</code></pre></div></p>
<p>Scenario 3: MSI (no secrets)
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="nt">adls_msi</span><span class="p">:</span>
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a><span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;azure_blob&quot;</span>
<a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a><span class="w">  </span><span class="nt">account_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;myaccount&quot;</span>
<a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a><span class="w">  </span><span class="nt">container</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;bronze&quot;</span>
<a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a><span class="w">  </span><span class="nt">auth</span><span class="p">:</span>
<a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a><span class="w">    </span><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;aad_msi&quot;</span>
<a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a><span class="w">    </span><span class="c1"># optional: client_id for user-assigned identity</span>
<a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a><span class="w">    </span><span class="nt">client_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;00000000-0000-0000-0000-000000000000&quot;</span>
</code></pre></div></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>type</strong></td>
<td>Literal['azure_blob']</td>
<td>No</td>
<td><code>ConnectionType.AZURE_BLOB</code></td>
<td>-</td>
</tr>
<tr>
<td><strong>validation_mode</strong></td>
<td>ValidationMode</td>
<td>No</td>
<td><code>ValidationMode.LAZY</code></td>
<td>-</td>
</tr>
<tr>
<td><strong>account_name</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td><strong>container</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td><strong>auth</strong></td>
<td>AzureBlobAuthConfig</td>
<td>No</td>
<td><code>PydanticUndefined</code></td>
<td>Authentication configuration. Choose one mode: 'account_key' (storage key), 'sas' (SAS token), 'connection_string', 'key_vault' (Azure Key Vault), or 'aad_msi' (Managed Identity, default). For production, prefer key_vault or aad_msi to avoid storing secrets in config.<br><strong>Options:</strong> <a href="#azureblobkeyvaultauth">AzureBlobKeyVaultAuth</a>, <a href="#azureblobaccountkeyauth">AzureBlobAccountKeyAuth</a>, <a href="#azureblobsasauth">AzureBlobSasAuth</a>, <a href="#azureblobconnectionstringauth">AzureBlobConnectionStringAuth</a>, <a href="#azureblobmsiauth">AzureBlobMsiAuth</a></td>
</tr>
</tbody>
</table>
<hr />
<h3 id="sqlserverconnectionconfig"><code>SQLServerConnectionConfig</code><a class="headerlink" href="#sqlserverconnectionconfig" title="Permanent link">&para;</a></h3>
<blockquote>
<p><em>Used in: <a href="#projectconfig">ProjectConfig</a></em></p>
</blockquote>
<p>SQL Server / Azure SQL Database connection.</p>
<p><strong>When to Use:</strong> Reading from SQL Server sources, Azure SQL DB, Azure Synapse.</p>
<p><strong>See Also:</strong> <a href="#readconfig">ReadConfig</a> for query options</p>
<p>Scenario 1: Managed identity (AAD MSI)
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="nt">sql_dw_msi</span><span class="p">:</span>
<a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sql_server&quot;</span>
<a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="w">  </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;server.database.windows.net&quot;</span>
<a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a><span class="w">  </span><span class="nt">database</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;dw&quot;</span>
<a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a><span class="w">  </span><span class="nt">auth</span><span class="p">:</span>
<a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a><span class="w">    </span><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;aad_msi&quot;</span>
</code></pre></div></p>
<p>Scenario 2: SQL login
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="nt">sql_dw_login</span><span class="p">:</span>
<a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sql_server&quot;</span>
<a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="w">  </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;server.database.windows.net&quot;</span>
<a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a><span class="w">  </span><span class="nt">database</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;dw&quot;</span>
<a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a><span class="w">  </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1433</span>
<a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a><span class="w">  </span><span class="nt">driver</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ODBC</span><span class="nv"> </span><span class="s">Driver</span><span class="nv"> </span><span class="s">17</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">SQL</span><span class="nv"> </span><span class="s">Server&quot;</span>
<a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a><span class="w">  </span><span class="nt">auth</span><span class="p">:</span>
<a id="__codelineno-22-8" name="__codelineno-22-8" href="#__codelineno-22-8"></a><span class="w">    </span><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sql_login&quot;</span>
<a id="__codelineno-22-9" name="__codelineno-22-9" href="#__codelineno-22-9"></a><span class="w">    </span><span class="nt">username</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;dw_writer&quot;</span>
<a id="__codelineno-22-10" name="__codelineno-22-10" href="#__codelineno-22-10"></a><span class="w">    </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;${DW_PASSWORD}&quot;</span>
</code></pre></div></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>type</strong></td>
<td>Literal['sql_server']</td>
<td>No</td>
<td><code>ConnectionType.SQL_SERVER</code></td>
<td>-</td>
</tr>
<tr>
<td><strong>validation_mode</strong></td>
<td>ValidationMode</td>
<td>No</td>
<td><code>ValidationMode.LAZY</code></td>
<td>-</td>
</tr>
<tr>
<td><strong>host</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td><strong>database</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td><strong>port</strong></td>
<td>int</td>
<td>No</td>
<td><code>1433</code></td>
<td>-</td>
</tr>
<tr>
<td><strong>driver</strong></td>
<td>str</td>
<td>No</td>
<td><code>ODBC Driver 18 for SQL Server</code></td>
<td>-</td>
</tr>
<tr>
<td><strong>auth</strong></td>
<td>SQLServerAuthConfig</td>
<td>No</td>
<td><code>PydanticUndefined</code></td>
<td>Authentication configuration. Choose one mode: 'sql_login' (username/password), 'aad_password' (Azure AD service principal), 'aad_msi' (Managed Identity, default), or 'connection_string' (full JDBC string). For Databricks/Azure, prefer aad_msi for passwordless auth.<br><strong>Options:</strong> <a href="#sqlloginauth">SQLLoginAuth</a>, <a href="#sqlaadpasswordauth">SQLAadPasswordAuth</a>, <a href="#sqlmsiauth">SQLMsiAuth</a>, <a href="#sqlconnectionstringauth">SQLConnectionStringAuth</a></td>
</tr>
</tbody>
</table>
<hr />
<h3 id="httpconnectionconfig"><code>HttpConnectionConfig</code><a class="headerlink" href="#httpconnectionconfig" title="Permanent link">&para;</a></h3>
<blockquote>
<p><em>Used in: <a href="#projectconfig">ProjectConfig</a></em></p>
</blockquote>
<p>HTTP connection.</p>
<p>Scenario: Bearer token via env var
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="nt">api_source</span><span class="p">:</span>
<a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a><span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http&quot;</span>
<a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a><span class="w">  </span><span class="nt">base_url</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://api.example.com&quot;</span>
<a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a><span class="w">  </span><span class="nt">headers</span><span class="p">:</span>
<a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a><span class="w">    </span><span class="nt">User-Agent</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;odibi-pipeline&quot;</span>
<a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a><span class="w">  </span><span class="nt">auth</span><span class="p">:</span>
<a id="__codelineno-23-7" name="__codelineno-23-7" href="#__codelineno-23-7"></a><span class="w">    </span><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;bearer&quot;</span>
<a id="__codelineno-23-8" name="__codelineno-23-8" href="#__codelineno-23-8"></a><span class="w">    </span><span class="nt">token</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;${API_TOKEN}&quot;</span>
</code></pre></div></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>type</strong></td>
<td>Literal['http']</td>
<td>No</td>
<td><code>ConnectionType.HTTP</code></td>
<td>-</td>
</tr>
<tr>
<td><strong>validation_mode</strong></td>
<td>ValidationMode</td>
<td>No</td>
<td><code>ValidationMode.LAZY</code></td>
<td>-</td>
</tr>
<tr>
<td><strong>base_url</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>Base URL for all API requests (e.g., 'https://api.example.com/v1')</td>
</tr>
<tr>
<td><strong>headers</strong></td>
<td>Dict[str, str]</td>
<td>No</td>
<td><code>PydanticUndefined</code></td>
<td>Default HTTP headers included in all requests. Example: {'User-Agent': 'odibi-pipeline', 'Accept': 'application/json'}. Auth headers are typically set via the 'auth' block instead.</td>
</tr>
<tr>
<td><strong>auth</strong></td>
<td>HttpAuthConfig</td>
<td>No</td>
<td><code>PydanticUndefined</code></td>
<td>Authentication configuration. Choose one mode: 'none' (no auth), 'basic' (username/password), 'bearer' (token), or 'api_key' (custom header). Tokens can use env vars: '${API_TOKEN}'.<br><strong>Options:</strong> <a href="#httpnoauth">HttpNoAuth</a>, <a href="#httpbasicauth">HttpBasicAuth</a>, <a href="#httpbearerauth">HttpBearerAuth</a>, <a href="#httpapikeyauth">HttpApiKeyAuth</a></td>
</tr>
</tbody>
</table>
<hr />
<h2 id="node-operations">Node Operations<a class="headerlink" href="#node-operations" title="Permanent link">&para;</a></h2>
<h3 id="readconfig"><code>ReadConfig</code><a class="headerlink" href="#readconfig" title="Permanent link">&para;</a></h3>
<blockquote>
<p><em>Used in: <a href="#nodeconfig">NodeConfig</a></em></p>
</blockquote>
<p>Configuration for reading data into a node.</p>
<p><strong>When to Use:</strong> First node in a pipeline, or any node that reads from storage.</p>
<p><strong>Key Concepts:</strong>
- <code>connection</code>: References a named connection from <code>connections:</code> section
- <code>format</code>: File format (csv, parquet, delta, json, sql)
- <code>incremental</code>: Enable incremental loading (only new data)</p>
<p><strong>See Also:</strong>
- <a href="../../patterns/incremental_stateful/">Incremental Loading</a> - HWM-based loading
- <a href="#incrementalconfig">IncrementalConfig</a> - Incremental loading options</p>
<h3 id="universal-reader-guide">📖 "Universal Reader" Guide<a class="headerlink" href="#universal-reader-guide" title="Permanent link">&para;</a></h3>
<p><strong>Business Problem:</strong>
"I need to read from files, databases, streams, and even travel back in time to see how data looked yesterday."</p>
<p><strong>Recipe 1: The Time Traveler (Delta/Iceberg)</strong>
<em>Reproduce a bug by seeing the data exactly as it was.</em>
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="nt">read</span><span class="p">:</span>
<a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a><span class="w">  </span><span class="nt">connection</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;silver_lake&quot;</span>
<a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a><span class="w">  </span><span class="nt">format</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;delta&quot;</span>
<a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a><span class="w">  </span><span class="nt">table</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;fact_sales&quot;</span>
<a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a><span class="w">  </span><span class="nt">time_travel</span><span class="p">:</span>
<a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a><span class="w">    </span><span class="nt">as_of_timestamp</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2023-10-25T14:00:00Z&quot;</span>
</code></pre></div></p>
<p><strong>Recipe 2: The Streamer</strong>
<em>Process data in real-time.</em>
<div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="nt">read</span><span class="p">:</span>
<a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a><span class="w">  </span><span class="nt">connection</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;event_hub&quot;</span>
<a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a><span class="w">  </span><span class="nt">format</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;json&quot;</span>
<a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a><span class="w">  </span><span class="nt">streaming</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div></p>
<p><strong>Recipe 3: The SQL Query</strong>
<em>Push down filtering to the source database.</em>
<div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="nt">read</span><span class="p">:</span>
<a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a><span class="w">  </span><span class="nt">connection</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;enterprise_dw&quot;</span>
<a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a><span class="w">  </span><span class="nt">format</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sql&quot;</span>
<a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a><span class="w">  </span><span class="c1"># Use the query option to filter at source!</span>
<a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a><span class="w">  </span><span class="nt">query</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;SELECT</span><span class="nv"> </span><span class="s">*</span><span class="nv"> </span><span class="s">FROM</span><span class="nv"> </span><span class="s">huge_table</span><span class="nv"> </span><span class="s">WHERE</span><span class="nv"> </span><span class="s">date</span><span class="nv"> </span><span class="s">&gt;=</span><span class="nv"> </span><span class="s">&#39;2024-01-01&#39;&quot;</span>
</code></pre></div></p>
<p><strong>Recipe 4: Archive Bad Records (Spark)</strong>
<em>Capture malformed records for later inspection.</em>
<div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="nt">read</span><span class="p">:</span>
<a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a><span class="w">  </span><span class="nt">connection</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;landing&quot;</span>
<a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a><span class="w">  </span><span class="nt">format</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;json&quot;</span>
<a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a><span class="w">  </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;events/*.json&quot;</span>
<a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a><span class="w">  </span><span class="nt">archive_options</span><span class="p">:</span>
<a id="__codelineno-27-6" name="__codelineno-27-6" href="#__codelineno-27-6"></a><span class="w">    </span><span class="nt">badRecordsPath</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/mnt/quarantine/bad_records&quot;</span>
</code></pre></div></p>
<p><strong>Recipe 5: Optimize JDBC Parallelism (Spark)</strong>
<em>Control partition count for SQL sources to reduce task overhead.</em>
<div class="highlight"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="nt">read</span><span class="p">:</span>
<a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a><span class="w">  </span><span class="nt">connection</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;enterprise_dw&quot;</span>
<a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a><span class="w">  </span><span class="nt">format</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sql&quot;</span>
<a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a><span class="w">  </span><span class="nt">table</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;small_lookup_table&quot;</span>
<a id="__codelineno-28-5" name="__codelineno-28-5" href="#__codelineno-28-5"></a><span class="w">  </span><span class="nt">options</span><span class="p">:</span>
<a id="__codelineno-28-6" name="__codelineno-28-6" href="#__codelineno-28-6"></a><span class="w">    </span><span class="nt">numPartitions</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span><span class="w">  </span><span class="c1"># Single partition for small tables</span>
</code></pre></div></p>
<p><strong>Performance Tip:</strong> For small tables (&lt;100K rows), use <code>numPartitions: 1</code> to avoid
excessive Spark task scheduling overhead. For large tables, increase partitions
to enable parallel reads (requires partitionColumn, lowerBound, upperBound).</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>connection</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>Connection name from project.yaml</td>
</tr>
<tr>
<td><strong>format</strong></td>
<td>ReadFormat | str</td>
<td>Yes</td>
<td>-</td>
<td>Data format (csv, parquet, delta, etc.)</td>
</tr>
<tr>
<td><strong>table</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Table name for SQL/Delta</td>
</tr>
<tr>
<td><strong>path</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Path for file-based sources</td>
</tr>
<tr>
<td><strong>streaming</strong></td>
<td>bool</td>
<td>No</td>
<td><code>False</code></td>
<td>Enable streaming read (Spark only)</td>
</tr>
<tr>
<td><strong>schema_ddl</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Schema for streaming reads from file sources (required for Avro, JSON, CSV). Use Spark DDL format: 'col1 STRING, col2 INT, col3 TIMESTAMP'. Not required for Delta (schema is inferred from table metadata).</td>
</tr>
<tr>
<td><strong>query</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>SQL query to filter at source (pushdown). Mutually exclusive with table/path if supported by connector.</td>
</tr>
<tr>
<td><strong>sql_file</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Path to external .sql file containing the query, relative to the YAML file defining the node. Mutually exclusive with 'query'.</td>
</tr>
<tr>
<td><strong>filter</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>SQL WHERE clause filter (pushed down to source for SQL formats). Example: "DAY &gt; '2022-12-31'"</td>
</tr>
<tr>
<td><strong>incremental</strong></td>
<td>Optional[<a href="#incrementalconfig">IncrementalConfig</a>]</td>
<td>No</td>
<td>-</td>
<td>Automatic incremental loading strategy (CDC-like). If set, generates query based on target state (HWM).</td>
</tr>
<tr>
<td><strong>time_travel</strong></td>
<td>Optional[<a href="#timetravelconfig">TimeTravelConfig</a>]</td>
<td>No</td>
<td>-</td>
<td>Time travel options (Delta only)</td>
</tr>
<tr>
<td><strong>archive_options</strong></td>
<td>Dict[str, Any]</td>
<td>No</td>
<td><code>PydanticUndefined</code></td>
<td>Options for archiving bad records (e.g. badRecordsPath for Spark)</td>
</tr>
<tr>
<td><strong>options</strong></td>
<td>Dict[str, Any]</td>
<td>No</td>
<td><code>PydanticUndefined</code></td>
<td>Format-specific options</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="incrementalconfig"><code>IncrementalConfig</code><a class="headerlink" href="#incrementalconfig" title="Permanent link">&para;</a></h3>
<blockquote>
<p><em>Used in: <a href="#readconfig">ReadConfig</a></em></p>
</blockquote>
<p>Configuration for automatic incremental loading.</p>
<p><strong>When to Use:</strong> Load only new/changed data instead of full table scans.</p>
<p><strong>See Also:</strong> <a href="#readconfig">ReadConfig</a></p>
<p><strong>Modes:</strong>
1. <strong>Rolling Window</strong> (Default): Uses a time-based lookback from NOW().
   Good for: Stateless loading where you just want "recent" data.
   Args: <code>lookback</code>, <code>unit</code></p>
<ol>
<li><strong>Stateful</strong>: Tracks the High-Water Mark (HWM) of the key column.
   Good for: Exact incremental ingestion (e.g. CDC-like).
   Args: <code>state_key</code> (optional), <code>watermark_lag</code> (optional)</li>
</ol>
<p>Generates SQL:
- Rolling: <code>WHERE column &gt;= NOW() - lookback</code>
- Stateful: <code>WHERE column &gt; :last_hwm</code></p>
<p>Example (Rolling Window):
<div class="highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="nt">incremental</span><span class="p">:</span>
<a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a><span class="w">  </span><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;rolling_window&quot;</span>
<a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a><span class="w">  </span><span class="nt">column</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;updated_at&quot;</span>
<a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a><span class="w">  </span><span class="nt">lookback</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a><span class="w">  </span><span class="nt">unit</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;day&quot;</span>
</code></pre></div></p>
<p>Example (Stateful HWM):
<div class="highlight"><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="nt">incremental</span><span class="p">:</span>
<a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a><span class="w">  </span><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;stateful&quot;</span>
<a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a><span class="w">  </span><span class="nt">column</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;id&quot;</span>
<a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a><span class="w">  </span><span class="c1"># Optional: track separate column for HWM state</span>
<a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a><span class="w">  </span><span class="nt">state_key</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;last_processed_id&quot;</span>
</code></pre></div></p>
<p>Example (Stateful with Watermark Lag):
<div class="highlight"><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="nt">incremental</span><span class="p">:</span>
<a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a><span class="w">  </span><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;stateful&quot;</span>
<a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a><span class="w">  </span><span class="nt">column</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;updated_at&quot;</span>
<a id="__codelineno-31-4" name="__codelineno-31-4" href="#__codelineno-31-4"></a><span class="w">  </span><span class="c1"># Handle late-arriving data: look back 2 hours from HWM</span>
<a id="__codelineno-31-5" name="__codelineno-31-5" href="#__codelineno-31-5"></a><span class="w">  </span><span class="nt">watermark_lag</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2h&quot;</span>
</code></pre></div></p>
<p>Example (Oracle Date Format):
<div class="highlight"><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="nt">incremental</span><span class="p">:</span>
<a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a><span class="w">  </span><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;rolling_window&quot;</span>
<a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a><span class="w">  </span><span class="nt">column</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;EVENT_START&quot;</span>
<a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a><span class="w">  </span><span class="nt">lookback</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<a id="__codelineno-32-5" name="__codelineno-32-5" href="#__codelineno-32-5"></a><span class="w">  </span><span class="nt">unit</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;day&quot;</span>
<a id="__codelineno-32-6" name="__codelineno-32-6" href="#__codelineno-32-6"></a><span class="w">  </span><span class="c1"># For string columns with Oracle format (DD-MON-YY)</span>
<a id="__codelineno-32-7" name="__codelineno-32-7" href="#__codelineno-32-7"></a><span class="w">  </span><span class="nt">date_format</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;oracle&quot;</span>
</code></pre></div></p>
<p>Supported date_format values:
- <code>oracle</code>: DD-MON-YY for Oracle databases (uses TO_TIMESTAMP)
- <code>oracle_sqlserver</code>: DD-MON-YY format stored in SQL Server (uses TRY_CONVERT)
- <code>sql_server</code>: Uses CONVERT with style 120
- <code>us</code>: MM/DD/YYYY format
- <code>eu</code>: DD/MM/YYYY format
- <code>iso</code>: YYYY-MM-DDTHH:MM:SS format</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>mode</strong></td>
<td>IncrementalMode</td>
<td>No</td>
<td><code>IncrementalMode.ROLLING_WINDOW</code></td>
<td>Incremental strategy: 'rolling_window' or 'stateful'</td>
</tr>
<tr>
<td><strong>column</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>Primary column to filter on (e.g., updated_at)</td>
</tr>
<tr>
<td><strong>fallback_column</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Backup column if primary is NULL (e.g., created_at). Generates COALESCE(col, fallback) &gt;= ...</td>
</tr>
<tr>
<td><strong>lookback</strong></td>
<td>Optional[int]</td>
<td>No</td>
<td>-</td>
<td>Time units to look back (Rolling Window only)</td>
</tr>
<tr>
<td><strong>unit</strong></td>
<td>Optional[IncrementalUnit]</td>
<td>No</td>
<td>-</td>
<td>Time unit for lookback (Rolling Window only). Options: 'hour', 'day', 'month', 'year'</td>
</tr>
<tr>
<td><strong>state_key</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Unique ID for state tracking. Defaults to node name if not provided.</td>
</tr>
<tr>
<td><strong>watermark_lag</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Safety buffer for late-arriving data in stateful mode. Subtracts this duration from the stored HWM when filtering. Format: '<number><unit>' where unit is 's', 'm', 'h', or 'd'. Examples: '2h' (2 hours), '30m' (30 minutes), '1d' (1 day). Use when source has replication lag or eventual consistency.</td>
</tr>
<tr>
<td><strong>date_format</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Source date format when the column is stored as a string. Options: 'oracle' (DD-MON-YY for Oracle DB), 'oracle_sqlserver' (DD-MON-YY format in SQL Server), 'sql_server' (uses CONVERT with style 120), 'us' (MM/DD/YYYY), 'eu' (DD/MM/YYYY), 'iso' (YYYY-MM-DDTHH:MM:SS). When set, SQL pushdown will use appropriate CONVERT/TO_TIMESTAMP functions.</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="timetravelconfig"><code>TimeTravelConfig</code><a class="headerlink" href="#timetravelconfig" title="Permanent link">&para;</a></h3>
<blockquote>
<p><em>Used in: <a href="#readconfig">ReadConfig</a></em></p>
</blockquote>
<p>Configuration for time travel reading (Delta/Iceberg).</p>
<p>Example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="nt">time_travel</span><span class="p">:</span>
<a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a><span class="w">  </span><span class="nt">as_of_version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
<a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a><span class="w">  </span><span class="c1"># OR</span>
<a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a><span class="w">  </span><span class="nt">as_of_timestamp</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2023-10-01T12:00:00Z&quot;</span>
</code></pre></div></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>as_of_version</strong></td>
<td>Optional[int]</td>
<td>No</td>
<td>-</td>
<td>Version number to time travel to</td>
</tr>
<tr>
<td><strong>as_of_timestamp</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Timestamp string to time travel to</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="transformconfig"><code>TransformConfig</code><a class="headerlink" href="#transformconfig" title="Permanent link">&para;</a></h3>
<blockquote>
<p><em>Used in: <a href="#nodeconfig">NodeConfig</a></em></p>
</blockquote>
<p>Configuration for transformation steps within a node.</p>
<p><strong>When to Use:</strong> Custom business logic, data cleaning, SQL transformations.</p>
<p><strong>Key Concepts:</strong>
- <code>steps</code>: Ordered list of operations (SQL, functions, or both)
- Each step receives the DataFrame from the previous step
- Steps execute in order: step1 → step2 → step3</p>
<p><strong>See Also:</strong> <a href="#nodeconfig">Transformer Catalog</a></p>
<p><strong>Transformer vs Transform:</strong>
- <code>transformer</code>: Single heavy operation (scd2, merge, deduplicate)
- <code>transform.steps</code>: Chain of lighter operations</p>
<h3 id="transformation-pipeline-guide">🔧 "Transformation Pipeline" Guide<a class="headerlink" href="#transformation-pipeline-guide" title="Permanent link">&para;</a></h3>
<p><strong>Business Problem:</strong>
"I have complex logic that mixes SQL for speed and Python for complex calculations."</p>
<p><strong>The Solution:</strong>
Chain multiple steps together. Output of Step 1 becomes input of Step 2.</p>
<p><strong>Function Registry:</strong>
The <code>function</code> step type looks up functions registered with <code>@transform</code> (or <code>@register</code>).
This allows you to use the <em>same</em> registered functions as both top-level Transformers and steps in a chain.</p>
<p><strong>Recipe: The Mix-and-Match</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="nt">transform</span><span class="p">:</span>
<a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a><span class="w">  </span><span class="nt">steps</span><span class="p">:</span>
<a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a><span class="w">    </span><span class="c1"># Step 1: SQL Filter (Fast)</span>
<a id="__codelineno-34-4" name="__codelineno-34-4" href="#__codelineno-34-4"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">sql</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;SELECT</span><span class="nv"> </span><span class="s">*</span><span class="nv"> </span><span class="s">FROM</span><span class="nv"> </span><span class="s">df</span><span class="nv"> </span><span class="s">WHERE</span><span class="nv"> </span><span class="s">status</span><span class="nv"> </span><span class="s">=</span><span class="nv"> </span><span class="s">&#39;ACTIVE&#39;&quot;</span>
<a id="__codelineno-34-5" name="__codelineno-34-5" href="#__codelineno-34-5"></a>
<a id="__codelineno-34-6" name="__codelineno-34-6" href="#__codelineno-34-6"></a><span class="w">    </span><span class="c1"># Step 2: Custom Python Function (Complex Logic)</span>
<a id="__codelineno-34-7" name="__codelineno-34-7" href="#__codelineno-34-7"></a><span class="w">    </span><span class="c1"># Looks up &#39;calculate_lifetime_value&#39; in the registry</span>
<a id="__codelineno-34-8" name="__codelineno-34-8" href="#__codelineno-34-8"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">function</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;calculate_lifetime_value&quot;</span>
<a id="__codelineno-34-9" name="__codelineno-34-9" href="#__codelineno-34-9"></a><span class="w">      </span><span class="nt">params</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> discount_rate</span><span class="p">:</span><span class="w"> </span><span class="nv">0.05</span><span class="w"> </span><span class="p p-Indicator">}</span>
<a id="__codelineno-34-10" name="__codelineno-34-10" href="#__codelineno-34-10"></a>
<a id="__codelineno-34-11" name="__codelineno-34-11" href="#__codelineno-34-11"></a><span class="w">    </span><span class="c1"># Step 3: Built-in Operation (Standard)</span>
<a id="__codelineno-34-12" name="__codelineno-34-12" href="#__codelineno-34-12"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">operation</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;drop_duplicates&quot;</span>
<a id="__codelineno-34-13" name="__codelineno-34-13" href="#__codelineno-34-13"></a><span class="w">      </span><span class="nt">params</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> subset</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;user_id&quot;</span><span class="p p-Indicator">]</span><span class="w"> </span><span class="p p-Indicator">}</span>
</code></pre></div></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>steps</strong></td>
<td>List[str | <a href="#transformstep">TransformStep</a>]</td>
<td>Yes</td>
<td>-</td>
<td>List of transformation steps (SQL strings or TransformStep configs)</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="deletedetectionconfig"><code>DeleteDetectionConfig</code><a class="headerlink" href="#deletedetectionconfig" title="Permanent link">&para;</a></h3>
<p>Configuration for delete detection in Silver layer.</p>
<h3 id="cdc-without-cdc-guide">🔍 "CDC Without CDC" Guide<a class="headerlink" href="#cdc-without-cdc-guide" title="Permanent link">&para;</a></h3>
<p><strong>Business Problem:</strong>
"Records are deleted in our Azure SQL source, but our Silver tables still show them."</p>
<p><strong>The Solution:</strong>
Use delete detection to identify and flag records that no longer exist in the source.</p>
<p><strong>Recipe 1: SQL Compare (Recommended for HWM)</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="nt">transform</span><span class="p">:</span>
<a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a><span class="w">  </span><span class="nt">steps</span><span class="p">:</span>
<a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">operation</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">detect_deletes</span>
<a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a><span class="w">      </span><span class="nt">params</span><span class="p">:</span>
<a id="__codelineno-35-5" name="__codelineno-35-5" href="#__codelineno-35-5"></a><span class="w">        </span><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sql_compare</span>
<a id="__codelineno-35-6" name="__codelineno-35-6" href="#__codelineno-35-6"></a><span class="w">        </span><span class="nt">keys</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">customer_id</span><span class="p p-Indicator">]</span>
<a id="__codelineno-35-7" name="__codelineno-35-7" href="#__codelineno-35-7"></a><span class="w">        </span><span class="nt">source_connection</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">azure_sql</span>
<a id="__codelineno-35-8" name="__codelineno-35-8" href="#__codelineno-35-8"></a><span class="w">        </span><span class="nt">source_table</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dbo.Customers</span>
</code></pre></div></p>
<p><strong>Recipe 2: Snapshot Diff (For Full Snapshot Sources)</strong>
Use ONLY with full snapshot ingestion, NOT with HWM incremental.
Requires <code>connection</code> and <code>path</code> to specify the target Delta table for comparison.
<div class="highlight"><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a><span class="nt">transform</span><span class="p">:</span>
<a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a><span class="w">  </span><span class="nt">steps</span><span class="p">:</span>
<a id="__codelineno-36-3" name="__codelineno-36-3" href="#__codelineno-36-3"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">operation</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">detect_deletes</span>
<a id="__codelineno-36-4" name="__codelineno-36-4" href="#__codelineno-36-4"></a><span class="w">      </span><span class="nt">params</span><span class="p">:</span>
<a id="__codelineno-36-5" name="__codelineno-36-5" href="#__codelineno-36-5"></a><span class="w">        </span><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">snapshot_diff</span>
<a id="__codelineno-36-6" name="__codelineno-36-6" href="#__codelineno-36-6"></a><span class="w">        </span><span class="nt">keys</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">customer_id</span><span class="p p-Indicator">]</span>
<a id="__codelineno-36-7" name="__codelineno-36-7" href="#__codelineno-36-7"></a><span class="w">        </span><span class="nt">connection</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">silver_conn</span><span class="w">    </span><span class="c1"># Required: connection to target Delta table</span>
<a id="__codelineno-36-8" name="__codelineno-36-8" href="#__codelineno-36-8"></a><span class="w">        </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;silver/customers&quot;</span><span class="w">   </span><span class="c1"># Required: path to target Delta table</span>
</code></pre></div></p>
<p><strong>Recipe 3: Conservative Threshold</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a><span class="nt">transform</span><span class="p">:</span>
<a id="__codelineno-37-2" name="__codelineno-37-2" href="#__codelineno-37-2"></a><span class="w">  </span><span class="nt">steps</span><span class="p">:</span>
<a id="__codelineno-37-3" name="__codelineno-37-3" href="#__codelineno-37-3"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">operation</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">detect_deletes</span>
<a id="__codelineno-37-4" name="__codelineno-37-4" href="#__codelineno-37-4"></a><span class="w">      </span><span class="nt">params</span><span class="p">:</span>
<a id="__codelineno-37-5" name="__codelineno-37-5" href="#__codelineno-37-5"></a><span class="w">        </span><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sql_compare</span>
<a id="__codelineno-37-6" name="__codelineno-37-6" href="#__codelineno-37-6"></a><span class="w">        </span><span class="nt">keys</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">customer_id</span><span class="p p-Indicator">]</span>
<a id="__codelineno-37-7" name="__codelineno-37-7" href="#__codelineno-37-7"></a><span class="w">        </span><span class="nt">source_connection</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">erp</span>
<a id="__codelineno-37-8" name="__codelineno-37-8" href="#__codelineno-37-8"></a><span class="w">        </span><span class="nt">source_table</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dbo.Customers</span>
<a id="__codelineno-37-9" name="__codelineno-37-9" href="#__codelineno-37-9"></a><span class="w">        </span><span class="nt">max_delete_percent</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">20.0</span>
<a id="__codelineno-37-10" name="__codelineno-37-10" href="#__codelineno-37-10"></a><span class="w">        </span><span class="nt">on_threshold_breach</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">error</span>
</code></pre></div></p>
<p><strong>Recipe 4: Hard Delete (Remove Rows)</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a><span class="nt">transform</span><span class="p">:</span>
<a id="__codelineno-38-2" name="__codelineno-38-2" href="#__codelineno-38-2"></a><span class="w">  </span><span class="nt">steps</span><span class="p">:</span>
<a id="__codelineno-38-3" name="__codelineno-38-3" href="#__codelineno-38-3"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">operation</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">detect_deletes</span>
<a id="__codelineno-38-4" name="__codelineno-38-4" href="#__codelineno-38-4"></a><span class="w">      </span><span class="nt">params</span><span class="p">:</span>
<a id="__codelineno-38-5" name="__codelineno-38-5" href="#__codelineno-38-5"></a><span class="w">        </span><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sql_compare</span>
<a id="__codelineno-38-6" name="__codelineno-38-6" href="#__codelineno-38-6"></a><span class="w">        </span><span class="nt">keys</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">customer_id</span><span class="p p-Indicator">]</span>
<a id="__codelineno-38-7" name="__codelineno-38-7" href="#__codelineno-38-7"></a><span class="w">        </span><span class="nt">source_connection</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">azure_sql</span>
<a id="__codelineno-38-8" name="__codelineno-38-8" href="#__codelineno-38-8"></a><span class="w">        </span><span class="nt">source_table</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dbo.Customers</span>
<a id="__codelineno-38-9" name="__codelineno-38-9" href="#__codelineno-38-9"></a><span class="w">        </span><span class="nt">soft_delete_col</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span><span class="w">  </span><span class="c1"># removes rows instead of flagging</span>
</code></pre></div></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>mode</strong></td>
<td>DeleteDetectionMode</td>
<td>No</td>
<td><code>DeleteDetectionMode.NONE</code></td>
<td>Delete detection strategy: none, snapshot_diff, sql_compare</td>
</tr>
<tr>
<td><strong>keys</strong></td>
<td>List[str]</td>
<td>No</td>
<td><code>PydanticUndefined</code></td>
<td>Business key columns for comparison</td>
</tr>
<tr>
<td><strong>connection</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>For snapshot_diff: connection name to target Delta table (required for snapshot_diff)</td>
</tr>
<tr>
<td><strong>path</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>For snapshot_diff: path to target Delta table (required for snapshot_diff)</td>
</tr>
<tr>
<td><strong>soft_delete_col</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td><code>_is_deleted</code></td>
<td>Column to flag deletes (True = deleted). Set to null for hard-delete (removes rows).</td>
</tr>
<tr>
<td><strong>source_connection</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>For sql_compare: connection name to query live source</td>
</tr>
<tr>
<td><strong>source_table</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>For sql_compare: table to query for current keys</td>
</tr>
<tr>
<td><strong>source_query</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>For sql_compare: custom SQL query for keys (overrides source_table)</td>
</tr>
<tr>
<td><strong>snapshot_column</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>For snapshot_diff on non-Delta: column to identify snapshots. If None, uses Delta time travel (default).</td>
</tr>
<tr>
<td><strong>on_first_run</strong></td>
<td>FirstRunBehavior</td>
<td>No</td>
<td><code>FirstRunBehavior.SKIP</code></td>
<td>Behavior when no previous version exists for snapshot_diff</td>
</tr>
<tr>
<td><strong>max_delete_percent</strong></td>
<td>Optional[float]</td>
<td>No</td>
<td><code>50.0</code></td>
<td>Safety threshold: warn/error if more than X% of rows would be deleted</td>
</tr>
<tr>
<td><strong>on_threshold_breach</strong></td>
<td>ThresholdBreachAction</td>
<td>No</td>
<td><code>ThresholdBreachAction.WARN</code></td>
<td>Behavior when delete percentage exceeds max_delete_percent</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="validationconfig"><code>ValidationConfig</code><a class="headerlink" href="#validationconfig" title="Permanent link">&para;</a></h3>
<blockquote>
<p><em>Used in: <a href="#nodeconfig">NodeConfig</a></em></p>
</blockquote>
<p>Configuration for data validation (post-transform checks).</p>
<p><strong>When to Use:</strong> Output data quality checks that run after transformation but before writing.</p>
<p><strong>See Also:</strong> Validation Guide, Quarantine Guide, Contracts Overview (pre-transform checks)</p>
<h3 id="the-indestructible-pipeline-pattern">🛡️ "The Indestructible Pipeline" Pattern<a class="headerlink" href="#the-indestructible-pipeline-pattern" title="Permanent link">&para;</a></h3>
<p><strong>Business Problem:</strong>
"Bad data polluted our Gold reports, causing executives to make wrong decisions. We need to stop it <em>before</em> it lands."</p>
<p><strong>The Solution:</strong>
A Quality Gate that runs <em>after</em> transformation but <em>before</em> writing.</p>
<p><strong>Recipe: The Quality Gate</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a><span class="nt">validation</span><span class="p">:</span>
<a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a><span class="w">  </span><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;fail&quot;</span><span class="w">          </span><span class="c1"># fail (stop pipeline) or warn (log only)</span>
<a id="__codelineno-39-3" name="__codelineno-39-3" href="#__codelineno-39-3"></a><span class="w">  </span><span class="nt">on_fail</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;alert&quot;</span><span class="w">      </span><span class="c1"># alert or ignore</span>
<a id="__codelineno-39-4" name="__codelineno-39-4" href="#__codelineno-39-4"></a>
<a id="__codelineno-39-5" name="__codelineno-39-5" href="#__codelineno-39-5"></a><span class="w">  </span><span class="nt">tests</span><span class="p">:</span>
<a id="__codelineno-39-6" name="__codelineno-39-6" href="#__codelineno-39-6"></a><span class="w">    </span><span class="c1"># 1. Completeness</span>
<a id="__codelineno-39-7" name="__codelineno-39-7" href="#__codelineno-39-7"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;not_null&quot;</span>
<a id="__codelineno-39-8" name="__codelineno-39-8" href="#__codelineno-39-8"></a><span class="w">      </span><span class="nt">columns</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;transaction_id&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;customer_id&quot;</span><span class="p p-Indicator">]</span>
<a id="__codelineno-39-9" name="__codelineno-39-9" href="#__codelineno-39-9"></a>
<a id="__codelineno-39-10" name="__codelineno-39-10" href="#__codelineno-39-10"></a><span class="w">    </span><span class="c1"># 2. Integrity</span>
<a id="__codelineno-39-11" name="__codelineno-39-11" href="#__codelineno-39-11"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;unique&quot;</span>
<a id="__codelineno-39-12" name="__codelineno-39-12" href="#__codelineno-39-12"></a><span class="w">      </span><span class="nt">columns</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;transaction_id&quot;</span><span class="p p-Indicator">]</span>
<a id="__codelineno-39-13" name="__codelineno-39-13" href="#__codelineno-39-13"></a>
<a id="__codelineno-39-14" name="__codelineno-39-14" href="#__codelineno-39-14"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;accepted_values&quot;</span>
<a id="__codelineno-39-15" name="__codelineno-39-15" href="#__codelineno-39-15"></a><span class="w">      </span><span class="nt">column</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;status&quot;</span>
<a id="__codelineno-39-16" name="__codelineno-39-16" href="#__codelineno-39-16"></a><span class="w">      </span><span class="nt">values</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;PENDING&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;COMPLETED&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;FAILED&quot;</span><span class="p p-Indicator">]</span>
<a id="__codelineno-39-17" name="__codelineno-39-17" href="#__codelineno-39-17"></a>
<a id="__codelineno-39-18" name="__codelineno-39-18" href="#__codelineno-39-18"></a><span class="w">    </span><span class="c1"># 3. Ranges &amp; Patterns</span>
<a id="__codelineno-39-19" name="__codelineno-39-19" href="#__codelineno-39-19"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;range&quot;</span>
<a id="__codelineno-39-20" name="__codelineno-39-20" href="#__codelineno-39-20"></a><span class="w">      </span><span class="nt">column</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;age&quot;</span>
<a id="__codelineno-39-21" name="__codelineno-39-21" href="#__codelineno-39-21"></a><span class="w">      </span><span class="nt">min</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">18</span>
<a id="__codelineno-39-22" name="__codelineno-39-22" href="#__codelineno-39-22"></a><span class="w">      </span><span class="nt">max</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">120</span>
<a id="__codelineno-39-23" name="__codelineno-39-23" href="#__codelineno-39-23"></a>
<a id="__codelineno-39-24" name="__codelineno-39-24" href="#__codelineno-39-24"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;regex_match&quot;</span>
<a id="__codelineno-39-25" name="__codelineno-39-25" href="#__codelineno-39-25"></a><span class="w">      </span><span class="nt">column</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;email&quot;</span>
<a id="__codelineno-39-26" name="__codelineno-39-26" href="#__codelineno-39-26"></a><span class="w">      </span><span class="nt">pattern</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^[</span><span class="err">\</span><span class="s">w</span><span class="err">\</span><span class="s">.-]+@[</span><span class="err">\</span><span class="s">w</span><span class="err">\</span><span class="s">.-]+</span><span class="err">\</span><span class="s">.</span><span class="err">\</span><span class="s">w+$&quot;</span>
<a id="__codelineno-39-27" name="__codelineno-39-27" href="#__codelineno-39-27"></a>
<a id="__codelineno-39-28" name="__codelineno-39-28" href="#__codelineno-39-28"></a><span class="w">    </span><span class="c1"># 4. Business Logic (SQL)</span>
<a id="__codelineno-39-29" name="__codelineno-39-29" href="#__codelineno-39-29"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;custom_sql&quot;</span>
<a id="__codelineno-39-30" name="__codelineno-39-30" href="#__codelineno-39-30"></a><span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;dates_ordered&quot;</span>
<a id="__codelineno-39-31" name="__codelineno-39-31" href="#__codelineno-39-31"></a><span class="w">      </span><span class="nt">condition</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;created_at</span><span class="nv"> </span><span class="s">&lt;=</span><span class="nv"> </span><span class="s">completed_at&quot;</span>
<a id="__codelineno-39-32" name="__codelineno-39-32" href="#__codelineno-39-32"></a><span class="w">      </span><span class="nt">threshold</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.01</span><span class="w">   </span><span class="c1"># Allow 1% failure</span>
</code></pre></div></p>
<p><strong>Recipe: Quarantine + Gate</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a><span class="nt">validation</span><span class="p">:</span>
<a id="__codelineno-40-2" name="__codelineno-40-2" href="#__codelineno-40-2"></a><span class="w">  </span><span class="nt">tests</span><span class="p">:</span>
<a id="__codelineno-40-3" name="__codelineno-40-3" href="#__codelineno-40-3"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">not_null</span>
<a id="__codelineno-40-4" name="__codelineno-40-4" href="#__codelineno-40-4"></a><span class="w">      </span><span class="nt">columns</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">customer_id</span><span class="p p-Indicator">]</span>
<a id="__codelineno-40-5" name="__codelineno-40-5" href="#__codelineno-40-5"></a><span class="w">      </span><span class="nt">on_fail</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">quarantine</span>
<a id="__codelineno-40-6" name="__codelineno-40-6" href="#__codelineno-40-6"></a><span class="w">  </span><span class="nt">quarantine</span><span class="p">:</span>
<a id="__codelineno-40-7" name="__codelineno-40-7" href="#__codelineno-40-7"></a><span class="w">    </span><span class="nt">connection</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">silver</span>
<a id="__codelineno-40-8" name="__codelineno-40-8" href="#__codelineno-40-8"></a><span class="w">    </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">customers_quarantine</span>
<a id="__codelineno-40-9" name="__codelineno-40-9" href="#__codelineno-40-9"></a><span class="w">  </span><span class="nt">gate</span><span class="p">:</span>
<a id="__codelineno-40-10" name="__codelineno-40-10" href="#__codelineno-40-10"></a><span class="w">    </span><span class="nt">require_pass_rate</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.95</span>
<a id="__codelineno-40-11" name="__codelineno-40-11" href="#__codelineno-40-11"></a><span class="w">    </span><span class="nt">on_fail</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">abort</span>
</code></pre></div></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>mode</strong></td>
<td>ValidationAction</td>
<td>No</td>
<td><code>ValidationAction.FAIL</code></td>
<td>Execution mode: 'fail' (stop pipeline) or 'warn' (log only)</td>
</tr>
<tr>
<td><strong>on_fail</strong></td>
<td>OnFailAction</td>
<td>No</td>
<td><code>OnFailAction.ALERT</code></td>
<td>Action on failure: 'alert' (send notification) or 'ignore'</td>
</tr>
<tr>
<td><strong>tests</strong></td>
<td>List[<a href="#contracts-data-quality-gates">TestConfig</a>]</td>
<td>No</td>
<td><code>PydanticUndefined</code></td>
<td>List of validation tests<br><strong>Options:</strong> <a href="#notnulltest">NotNullTest</a>, <a href="#uniquetest">UniqueTest</a>, <a href="#acceptedvaluestest">AcceptedValuesTest</a>, <a href="#rowcounttest">RowCountTest</a>, <a href="#customsqltest">CustomSQLTest</a>, <a href="#rangetest">RangeTest</a>, <a href="#regexmatchtest">RegexMatchTest</a>, <a href="#volumedroptest">VolumeDropTest</a>, <a href="#schemacontract">SchemaContract</a>, <a href="#distributioncontract">DistributionContract</a>, <a href="#freshnesscontract">FreshnessContract</a></td>
</tr>
<tr>
<td><strong>quarantine</strong></td>
<td>Optional[<a href="#quarantineconfig">QuarantineConfig</a>]</td>
<td>No</td>
<td>-</td>
<td>Quarantine configuration for failed rows</td>
</tr>
<tr>
<td><strong>gate</strong></td>
<td>Optional[<a href="#gateconfig">GateConfig</a>]</td>
<td>No</td>
<td>-</td>
<td>Quality gate configuration for batch-level validation</td>
</tr>
<tr>
<td><strong>fail_fast</strong></td>
<td>bool</td>
<td>No</td>
<td><code>False</code></td>
<td>Stop validation on first failure. Skips remaining tests for faster feedback.</td>
</tr>
<tr>
<td><strong>cache_df</strong></td>
<td>bool</td>
<td>No</td>
<td><code>False</code></td>
<td>Cache DataFrame before validation (Spark only). Improves performance with many tests.</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="quarantineconfig"><code>QuarantineConfig</code><a class="headerlink" href="#quarantineconfig" title="Permanent link">&para;</a></h3>
<blockquote>
<p><em>Used in: <a href="#validationconfig">ValidationConfig</a></em></p>
</blockquote>
<p>Configuration for quarantine table routing.</p>
<p><strong>When to Use:</strong> Capture invalid records for review/reprocessing instead of failing the pipeline.</p>
<p><strong>See Also:</strong> <a href="../../features/quarantine/">Quarantine Guide</a>, <a href="#validationconfig">ValidationConfig</a></p>
<p>Routes rows that fail validation tests to a quarantine table
with rejection metadata for later analysis/reprocessing.</p>
<p>Example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a><span class="nt">validation</span><span class="p">:</span>
<a id="__codelineno-41-2" name="__codelineno-41-2" href="#__codelineno-41-2"></a><span class="w">  </span><span class="nt">tests</span><span class="p">:</span>
<a id="__codelineno-41-3" name="__codelineno-41-3" href="#__codelineno-41-3"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">not_null</span>
<a id="__codelineno-41-4" name="__codelineno-41-4" href="#__codelineno-41-4"></a><span class="w">      </span><span class="nt">columns</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">customer_id</span><span class="p p-Indicator">]</span>
<a id="__codelineno-41-5" name="__codelineno-41-5" href="#__codelineno-41-5"></a><span class="w">      </span><span class="nt">on_fail</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">quarantine</span>
<a id="__codelineno-41-6" name="__codelineno-41-6" href="#__codelineno-41-6"></a><span class="w">  </span><span class="nt">quarantine</span><span class="p">:</span>
<a id="__codelineno-41-7" name="__codelineno-41-7" href="#__codelineno-41-7"></a><span class="w">    </span><span class="nt">connection</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">silver</span>
<a id="__codelineno-41-8" name="__codelineno-41-8" href="#__codelineno-41-8"></a><span class="w">    </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">customers_quarantine</span>
<a id="__codelineno-41-9" name="__codelineno-41-9" href="#__codelineno-41-9"></a><span class="w">    </span><span class="nt">add_columns</span><span class="p">:</span>
<a id="__codelineno-41-10" name="__codelineno-41-10" href="#__codelineno-41-10"></a><span class="w">      </span><span class="nt">_rejection_reason</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id="__codelineno-41-11" name="__codelineno-41-11" href="#__codelineno-41-11"></a><span class="w">      </span><span class="nt">_rejected_at</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id="__codelineno-41-12" name="__codelineno-41-12" href="#__codelineno-41-12"></a><span class="w">    </span><span class="nt">max_rows</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10000</span>
<a id="__codelineno-41-13" name="__codelineno-41-13" href="#__codelineno-41-13"></a><span class="w">    </span><span class="nt">sample_fraction</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.1</span>
</code></pre></div></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>connection</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>Connection for quarantine writes</td>
</tr>
<tr>
<td><strong>path</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Path for quarantine data</td>
</tr>
<tr>
<td><strong>table</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Table name for quarantine</td>
</tr>
<tr>
<td><strong>add_columns</strong></td>
<td><a href="#quarantinecolumnsconfig">QuarantineColumnsConfig</a></td>
<td>No</td>
<td><code>PydanticUndefined</code></td>
<td>Metadata columns to add to quarantined rows</td>
</tr>
<tr>
<td><strong>retention_days</strong></td>
<td>Optional[int]</td>
<td>No</td>
<td><code>90</code></td>
<td>Days to retain quarantined data (auto-cleanup)</td>
</tr>
<tr>
<td><strong>max_rows</strong></td>
<td>Optional[int]</td>
<td>No</td>
<td>-</td>
<td>Maximum number of rows to quarantine per run. Limits storage for high-failure batches.</td>
</tr>
<tr>
<td><strong>sample_fraction</strong></td>
<td>Optional[float]</td>
<td>No</td>
<td>-</td>
<td>Sample fraction of invalid rows to quarantine (0.0-1.0). Use for sampling large invalid sets.</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="quarantinecolumnsconfig"><code>QuarantineColumnsConfig</code><a class="headerlink" href="#quarantinecolumnsconfig" title="Permanent link">&para;</a></h3>
<blockquote>
<p><em>Used in: <a href="#quarantineconfig">QuarantineConfig</a></em></p>
</blockquote>
<p>Columns added to quarantined rows for debugging and reprocessing.</p>
<p>Example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a><span class="nt">quarantine</span><span class="p">:</span>
<a id="__codelineno-42-2" name="__codelineno-42-2" href="#__codelineno-42-2"></a><span class="w">  </span><span class="nt">connection</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">silver</span>
<a id="__codelineno-42-3" name="__codelineno-42-3" href="#__codelineno-42-3"></a><span class="w">  </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">customers_quarantine</span>
<a id="__codelineno-42-4" name="__codelineno-42-4" href="#__codelineno-42-4"></a><span class="w">  </span><span class="nt">add_columns</span><span class="p">:</span>
<a id="__codelineno-42-5" name="__codelineno-42-5" href="#__codelineno-42-5"></a><span class="w">    </span><span class="nt">_rejection_reason</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id="__codelineno-42-6" name="__codelineno-42-6" href="#__codelineno-42-6"></a><span class="w">    </span><span class="nt">_rejected_at</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id="__codelineno-42-7" name="__codelineno-42-7" href="#__codelineno-42-7"></a><span class="w">    </span><span class="nt">_source_batch_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id="__codelineno-42-8" name="__codelineno-42-8" href="#__codelineno-42-8"></a><span class="w">    </span><span class="nt">_failed_tests</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id="__codelineno-42-9" name="__codelineno-42-9" href="#__codelineno-42-9"></a><span class="w">    </span><span class="nt">_original_node</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
</code></pre></div></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>rejection_reason</strong></td>
<td>bool</td>
<td>No</td>
<td><code>True</code></td>
<td>Add _rejection_reason column with test failure description</td>
</tr>
<tr>
<td><strong>rejected_at</strong></td>
<td>bool</td>
<td>No</td>
<td><code>True</code></td>
<td>Add _rejected_at column with UTC timestamp</td>
</tr>
<tr>
<td><strong>source_batch_id</strong></td>
<td>bool</td>
<td>No</td>
<td><code>True</code></td>
<td>Add _source_batch_id column with run ID for traceability</td>
</tr>
<tr>
<td><strong>failed_tests</strong></td>
<td>bool</td>
<td>No</td>
<td><code>True</code></td>
<td>Add _failed_tests column with comma-separated list of failed test names</td>
</tr>
<tr>
<td><strong>original_node</strong></td>
<td>bool</td>
<td>No</td>
<td><code>False</code></td>
<td>Add _original_node column with source node name</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="gateconfig"><code>GateConfig</code><a class="headerlink" href="#gateconfig" title="Permanent link">&para;</a></h3>
<blockquote>
<p><em>Used in: <a href="#validationconfig">ValidationConfig</a></em></p>
</blockquote>
<p>Quality gate configuration for batch-level validation.</p>
<p><strong>When to Use:</strong> Pipeline-level pass/fail thresholds, row count limits, change detection.</p>
<p><strong>See Also:</strong> Quality Gates, <a href="#validationconfig">ValidationConfig</a></p>
<p>Gates evaluate the entire batch before writing, ensuring
data quality thresholds are met.</p>
<p>Example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a><span class="nt">gate</span><span class="p">:</span>
<a id="__codelineno-43-2" name="__codelineno-43-2" href="#__codelineno-43-2"></a><span class="w">  </span><span class="nt">require_pass_rate</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.95</span>
<a id="__codelineno-43-3" name="__codelineno-43-3" href="#__codelineno-43-3"></a><span class="w">  </span><span class="nt">on_fail</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">abort</span>
<a id="__codelineno-43-4" name="__codelineno-43-4" href="#__codelineno-43-4"></a><span class="w">  </span><span class="nt">thresholds</span><span class="p">:</span>
<a id="__codelineno-43-5" name="__codelineno-43-5" href="#__codelineno-43-5"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">test</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">not_null</span>
<a id="__codelineno-43-6" name="__codelineno-43-6" href="#__codelineno-43-6"></a><span class="w">      </span><span class="nt">min_pass_rate</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.99</span>
<a id="__codelineno-43-7" name="__codelineno-43-7" href="#__codelineno-43-7"></a><span class="w">  </span><span class="nt">row_count</span><span class="p">:</span>
<a id="__codelineno-43-8" name="__codelineno-43-8" href="#__codelineno-43-8"></a><span class="w">    </span><span class="nt">min</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span>
<a id="__codelineno-43-9" name="__codelineno-43-9" href="#__codelineno-43-9"></a><span class="w">    </span><span class="nt">change_threshold</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.5</span>
</code></pre></div></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>require_pass_rate</strong></td>
<td>float</td>
<td>No</td>
<td><code>0.95</code></td>
<td>Minimum percentage of rows passing ALL tests</td>
</tr>
<tr>
<td><strong>on_fail</strong></td>
<td>GateOnFail</td>
<td>No</td>
<td><code>GateOnFail.ABORT</code></td>
<td>Action when gate fails</td>
</tr>
<tr>
<td><strong>thresholds</strong></td>
<td>List[<a href="#gatethreshold">GateThreshold</a>]</td>
<td>No</td>
<td><code>PydanticUndefined</code></td>
<td>Per-test thresholds (overrides global require_pass_rate)</td>
</tr>
<tr>
<td><strong>row_count</strong></td>
<td>Optional[<a href="#rowcountgate">RowCountGate</a>]</td>
<td>No</td>
<td>-</td>
<td>Row count anomaly detection</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="gatethreshold"><code>GateThreshold</code><a class="headerlink" href="#gatethreshold" title="Permanent link">&para;</a></h3>
<blockquote>
<p><em>Used in: <a href="#gateconfig">GateConfig</a></em></p>
</blockquote>
<p>Per-test threshold configuration for quality gates.</p>
<p>Allows setting different pass rate requirements for specific tests.</p>
<p>Example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a><span class="nt">gate</span><span class="p">:</span>
<a id="__codelineno-44-2" name="__codelineno-44-2" href="#__codelineno-44-2"></a><span class="w">  </span><span class="nt">thresholds</span><span class="p">:</span>
<a id="__codelineno-44-3" name="__codelineno-44-3" href="#__codelineno-44-3"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">test</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">not_null</span>
<a id="__codelineno-44-4" name="__codelineno-44-4" href="#__codelineno-44-4"></a><span class="w">      </span><span class="nt">min_pass_rate</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.99</span>
<a id="__codelineno-44-5" name="__codelineno-44-5" href="#__codelineno-44-5"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">test</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">unique</span>
<a id="__codelineno-44-6" name="__codelineno-44-6" href="#__codelineno-44-6"></a><span class="w">      </span><span class="nt">min_pass_rate</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0</span>
</code></pre></div></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>test</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>Test name or type to apply threshold to</td>
</tr>
<tr>
<td><strong>min_pass_rate</strong></td>
<td>float</td>
<td>Yes</td>
<td>-</td>
<td>Minimum pass rate required (0.0-1.0, e.g., 0.99 = 99%)</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="rowcountgate"><code>RowCountGate</code><a class="headerlink" href="#rowcountgate" title="Permanent link">&para;</a></h3>
<blockquote>
<p><em>Used in: <a href="#gateconfig">GateConfig</a></em></p>
</blockquote>
<p>Row count anomaly detection for quality gates.</p>
<p>Validates that batch size falls within expected bounds and
detects significant changes from previous runs.</p>
<p>Example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a><span class="nt">gate</span><span class="p">:</span>
<a id="__codelineno-45-2" name="__codelineno-45-2" href="#__codelineno-45-2"></a><span class="w">  </span><span class="nt">row_count</span><span class="p">:</span>
<a id="__codelineno-45-3" name="__codelineno-45-3" href="#__codelineno-45-3"></a><span class="w">    </span><span class="nt">min</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span>
<a id="__codelineno-45-4" name="__codelineno-45-4" href="#__codelineno-45-4"></a><span class="w">    </span><span class="nt">max</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1000000</span>
<a id="__codelineno-45-5" name="__codelineno-45-5" href="#__codelineno-45-5"></a><span class="w">    </span><span class="nt">change_threshold</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.5</span>
</code></pre></div></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>min</strong></td>
<td>Optional[int]</td>
<td>No</td>
<td>-</td>
<td>Minimum expected row count</td>
</tr>
<tr>
<td><strong>max</strong></td>
<td>Optional[int]</td>
<td>No</td>
<td>-</td>
<td>Maximum expected row count</td>
</tr>
<tr>
<td><strong>change_threshold</strong></td>
<td>Optional[float]</td>
<td>No</td>
<td>-</td>
<td>Max allowed change vs previous run (e.g., 0.5 = 50% change triggers failure)</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="writeconfig"><code>WriteConfig</code><a class="headerlink" href="#writeconfig" title="Permanent link">&para;</a></h3>
<blockquote>
<p><em>Used in: <a href="#nodeconfig">NodeConfig</a></em></p>
</blockquote>
<p>Configuration for writing data from a node.</p>
<p><strong>When to Use:</strong> Any node that persists data to storage.</p>
<p><strong>Key Concepts:</strong>
- <code>mode</code>: How to handle existing data (overwrite, append, upsert)
- <code>keys</code>: Required for upsert mode - columns that identify unique records
- <code>partition_by</code>: Columns to partition output by (improves query performance)</p>
<p><strong>See Also:</strong>
- <a href="../../guides/performance_tuning/">Performance Tuning</a> - Partitioning strategies</p>
<h3 id="big-data-performance-guide">🚀 "Big Data Performance" Guide<a class="headerlink" href="#big-data-performance-guide" title="Permanent link">&para;</a></h3>
<p><strong>Business Problem:</strong>
"My dashboards are slow because the query scans terabytes of data just to find one day's sales."</p>
<p><strong>The Solution:</strong>
Use <strong>Partitioning</strong> for coarse filtering (skipping huge chunks) and <strong>Z-Ordering</strong> for fine-grained skipping (colocating related data).</p>
<p><strong>Recipe: Lakehouse Optimized</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a><span class="nt">write</span><span class="p">:</span>
<a id="__codelineno-46-2" name="__codelineno-46-2" href="#__codelineno-46-2"></a><span class="w">  </span><span class="nt">connection</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;gold_lake&quot;</span>
<a id="__codelineno-46-3" name="__codelineno-46-3" href="#__codelineno-46-3"></a><span class="w">  </span><span class="nt">format</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;delta&quot;</span>
<a id="__codelineno-46-4" name="__codelineno-46-4" href="#__codelineno-46-4"></a><span class="w">  </span><span class="nt">table</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;fact_sales&quot;</span>
<a id="__codelineno-46-5" name="__codelineno-46-5" href="#__codelineno-46-5"></a><span class="w">  </span><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;append&quot;</span>
<a id="__codelineno-46-6" name="__codelineno-46-6" href="#__codelineno-46-6"></a>
<a id="__codelineno-46-7" name="__codelineno-46-7" href="#__codelineno-46-7"></a><span class="w">  </span><span class="c1"># 1. Partitioning: Physical folders.</span>
<a id="__codelineno-46-8" name="__codelineno-46-8" href="#__codelineno-46-8"></a><span class="w">  </span><span class="c1"># Use for low-cardinality columns often used in WHERE clauses.</span>
<a id="__codelineno-46-9" name="__codelineno-46-9" href="#__codelineno-46-9"></a><span class="w">  </span><span class="c1"># WARNING: Do NOT partition by high-cardinality cols like ID or Timestamp!</span>
<a id="__codelineno-46-10" name="__codelineno-46-10" href="#__codelineno-46-10"></a><span class="w">  </span><span class="nt">partition_by</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;country_code&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;txn_year_month&quot;</span><span class="p p-Indicator">]</span>
<a id="__codelineno-46-11" name="__codelineno-46-11" href="#__codelineno-46-11"></a>
<a id="__codelineno-46-12" name="__codelineno-46-12" href="#__codelineno-46-12"></a><span class="w">  </span><span class="c1"># 2. Z-Ordering: Data clustering.</span>
<a id="__codelineno-46-13" name="__codelineno-46-13" href="#__codelineno-46-13"></a><span class="w">  </span><span class="c1"># Use for high-cardinality columns often used in JOINs or predicates.</span>
<a id="__codelineno-46-14" name="__codelineno-46-14" href="#__codelineno-46-14"></a><span class="w">  </span><span class="nt">zorder_by</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;customer_id&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;product_id&quot;</span><span class="p p-Indicator">]</span>
<a id="__codelineno-46-15" name="__codelineno-46-15" href="#__codelineno-46-15"></a>
<a id="__codelineno-46-16" name="__codelineno-46-16" href="#__codelineno-46-16"></a><span class="w">  </span><span class="c1"># 3. Table Properties: Engine tuning.</span>
<a id="__codelineno-46-17" name="__codelineno-46-17" href="#__codelineno-46-17"></a><span class="w">  </span><span class="nt">table_properties</span><span class="p">:</span>
<a id="__codelineno-46-18" name="__codelineno-46-18" href="#__codelineno-46-18"></a><span class="w">    </span><span class="s">&quot;delta.autoOptimize.optimizeWrite&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span>
<a id="__codelineno-46-19" name="__codelineno-46-19" href="#__codelineno-46-19"></a><span class="w">    </span><span class="s">&quot;delta.autoOptimize.autoCompact&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span>
</code></pre></div></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>connection</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>Connection name from project.yaml</td>
</tr>
<tr>
<td><strong>format</strong></td>
<td>ReadFormat | str</td>
<td>Yes</td>
<td>-</td>
<td>Output format (csv, parquet, delta, etc.)</td>
</tr>
<tr>
<td><strong>table</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Table name for SQL/Delta</td>
</tr>
<tr>
<td><strong>path</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Path for file-based outputs</td>
</tr>
<tr>
<td><strong>register_table</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Register file output as external table (Spark/Delta only)</td>
</tr>
<tr>
<td><strong>mode</strong></td>
<td>WriteMode</td>
<td>No</td>
<td><code>WriteMode.OVERWRITE</code></td>
<td>Write mode. Options: 'overwrite', 'append', 'upsert', 'append_once', 'merge'. Use 'append_once' for idempotent Bronze ingestion (requires 'keys' in options). See WriteMode enum for details.</td>
</tr>
<tr>
<td><strong>partition_by</strong></td>
<td>List[str]</td>
<td>No</td>
<td><code>PydanticUndefined</code></td>
<td>List of columns to physically partition the output by (folder structure). Use for low-cardinality columns (e.g. date, country).</td>
</tr>
<tr>
<td><strong>zorder_by</strong></td>
<td>List[str]</td>
<td>No</td>
<td><code>PydanticUndefined</code></td>
<td>List of columns to Z-Order by. Improves read performance for high-cardinality columns used in filters/joins (Delta only).</td>
</tr>
<tr>
<td><strong>table_properties</strong></td>
<td>Dict[str, str]</td>
<td>No</td>
<td><code>PydanticUndefined</code></td>
<td>Delta table properties. Overrides global performance.delta_table_properties. Example: {'delta.columnMapping.mode': 'name'} to allow special characters in column names.</td>
</tr>
<tr>
<td><strong>merge_schema</strong></td>
<td>bool</td>
<td>No</td>
<td><code>False</code></td>
<td>Allow schema evolution (mergeSchema option in Delta)</td>
</tr>
<tr>
<td><strong>first_run_query</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>SQL query for full-load on first run (High Water Mark pattern). If set, uses this query when target table doesn't exist, then switches to incremental. Only applies to SQL reads.</td>
</tr>
<tr>
<td><strong>options</strong></td>
<td>Dict[str, Any]</td>
<td>No</td>
<td><code>PydanticUndefined</code></td>
<td>Format-specific options</td>
</tr>
<tr>
<td><strong>auto_optimize</strong></td>
<td>bool | <a href="#autooptimizeconfig">AutoOptimizeConfig</a></td>
<td>No</td>
<td>-</td>
<td>Auto-run OPTIMIZE and VACUUM after write (Delta only)</td>
</tr>
<tr>
<td><strong>add_metadata</strong></td>
<td>bool | <a href="#writemetadataconfig">WriteMetadataConfig</a></td>
<td>No</td>
<td>-</td>
<td>Add metadata columns for Bronze layer lineage. Set to <code>true</code> to add all applicable columns, or provide a WriteMetadataConfig for selective columns. Columns: _extracted_at, _source_file (file sources), _source_connection, _source_table (SQL sources).</td>
</tr>
<tr>
<td><strong>skip_if_unchanged</strong></td>
<td>bool</td>
<td>No</td>
<td><code>False</code></td>
<td>Skip write if DataFrame content is identical to previous write. Computes SHA256 hash of entire DataFrame and compares to stored hash in Delta table metadata. Useful for snapshot tables without timestamps to avoid redundant appends. Only supported for Delta format.</td>
</tr>
<tr>
<td><strong>skip_hash_columns</strong></td>
<td>Optional[List[str]]</td>
<td>No</td>
<td>-</td>
<td>Columns to include in hash computation for skip_if_unchanged. If None, all columns are used. Specify a subset to ignore volatile columns like timestamps.</td>
</tr>
<tr>
<td><strong>skip_hash_sort_columns</strong></td>
<td>Optional[List[str]]</td>
<td>No</td>
<td>-</td>
<td>Columns to sort by before hashing for deterministic comparison. Required if row order may vary between runs. Typically your business key columns.</td>
</tr>
<tr>
<td><strong>streaming</strong></td>
<td>Optional[<a href="#streamingwriteconfig">StreamingWriteConfig</a>]</td>
<td>No</td>
<td>-</td>
<td>Streaming write configuration for Spark Structured Streaming. When set, uses writeStream instead of batch write. Requires a streaming DataFrame from a streaming read source.</td>
</tr>
<tr>
<td><strong>merge_keys</strong></td>
<td>Optional[List[str]]</td>
<td>No</td>
<td>-</td>
<td>Key columns for SQL Server MERGE operations. Required when mode='merge'. These columns form the ON clause of the MERGE statement.</td>
</tr>
<tr>
<td><strong>merge_options</strong></td>
<td>Optional[<a href="#sqlservermergeoptions">SqlServerMergeOptions</a>]</td>
<td>No</td>
<td>-</td>
<td>Options for SQL Server MERGE operations (conditions, staging, audit cols)</td>
</tr>
<tr>
<td><strong>overwrite_options</strong></td>
<td>Optional[<a href="#sqlserveroverwriteoptions">SqlServerOverwriteOptions</a>]</td>
<td>No</td>
<td>-</td>
<td>Options for SQL Server overwrite operations (strategy, audit cols)</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="writemetadataconfig"><code>WriteMetadataConfig</code><a class="headerlink" href="#writemetadataconfig" title="Permanent link">&para;</a></h3>
<blockquote>
<p><em>Used in: <a href="#writeconfig">WriteConfig</a></em></p>
</blockquote>
<p>Configuration for metadata columns added during Bronze writes.</p>
<h3 id="bronze-metadata-guide">📋 Bronze Metadata Guide<a class="headerlink" href="#bronze-metadata-guide" title="Permanent link">&para;</a></h3>
<p><strong>Business Problem:</strong>
"We need lineage tracking and debugging info for our Bronze layer data."</p>
<p><strong>The Solution:</strong>
Add metadata columns during ingestion for traceability.</p>
<p><strong>Recipe 1: Add All Metadata (Recommended)</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a><span class="nt">write</span><span class="p">:</span>
<a id="__codelineno-47-2" name="__codelineno-47-2" href="#__codelineno-47-2"></a><span class="w">  </span><span class="nt">connection</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bronze</span>
<a id="__codelineno-47-3" name="__codelineno-47-3" href="#__codelineno-47-3"></a><span class="w">  </span><span class="nt">table</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">customers</span>
<a id="__codelineno-47-4" name="__codelineno-47-4" href="#__codelineno-47-4"></a><span class="w">  </span><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">append</span>
<a id="__codelineno-47-5" name="__codelineno-47-5" href="#__codelineno-47-5"></a><span class="w">  </span><span class="nt">add_metadata</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w">  </span><span class="c1"># adds all applicable columns</span>
</code></pre></div></p>
<p><strong>Recipe 2: Selective Metadata</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a><span class="nt">write</span><span class="p">:</span>
<a id="__codelineno-48-2" name="__codelineno-48-2" href="#__codelineno-48-2"></a><span class="w">  </span><span class="nt">connection</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bronze</span>
<a id="__codelineno-48-3" name="__codelineno-48-3" href="#__codelineno-48-3"></a><span class="w">  </span><span class="nt">table</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">customers</span>
<a id="__codelineno-48-4" name="__codelineno-48-4" href="#__codelineno-48-4"></a><span class="w">  </span><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">append</span>
<a id="__codelineno-48-5" name="__codelineno-48-5" href="#__codelineno-48-5"></a><span class="w">  </span><span class="nt">add_metadata</span><span class="p">:</span>
<a id="__codelineno-48-6" name="__codelineno-48-6" href="#__codelineno-48-6"></a><span class="w">    </span><span class="nt">extracted_at</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id="__codelineno-48-7" name="__codelineno-48-7" href="#__codelineno-48-7"></a><span class="w">    </span><span class="nt">source_file</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id="__codelineno-48-8" name="__codelineno-48-8" href="#__codelineno-48-8"></a><span class="w">    </span><span class="nt">source_connection</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<a id="__codelineno-48-9" name="__codelineno-48-9" href="#__codelineno-48-9"></a><span class="w">    </span><span class="nt">source_table</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
</code></pre></div></p>
<p><strong>Available Columns:</strong>
- <code>_extracted_at</code>: Pipeline execution timestamp (all sources)
- <code>_source_file</code>: Source filename/path (file sources only)
- <code>_source_connection</code>: Connection name used (all sources)
- <code>_source_table</code>: Table or query name (SQL sources only)</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>extracted_at</strong></td>
<td>bool</td>
<td>No</td>
<td><code>True</code></td>
<td>Add _extracted_at column with pipeline execution timestamp</td>
</tr>
<tr>
<td><strong>source_file</strong></td>
<td>bool</td>
<td>No</td>
<td><code>True</code></td>
<td>Add _source_file column with source filename (file sources only)</td>
</tr>
<tr>
<td><strong>source_connection</strong></td>
<td>bool</td>
<td>No</td>
<td><code>False</code></td>
<td>Add _source_connection column with connection name</td>
</tr>
<tr>
<td><strong>source_table</strong></td>
<td>bool</td>
<td>No</td>
<td><code>False</code></td>
<td>Add _source_table column with table/query name (SQL sources only)</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="streamingwriteconfig"><code>StreamingWriteConfig</code><a class="headerlink" href="#streamingwriteconfig" title="Permanent link">&para;</a></h3>
<blockquote>
<p><em>Used in: <a href="#writeconfig">WriteConfig</a></em></p>
</blockquote>
<p>Configuration for Spark Structured Streaming writes.</p>
<h3 id="real-time-pipeline-guide">🚀 "Real-Time Pipeline" Guide<a class="headerlink" href="#real-time-pipeline-guide" title="Permanent link">&para;</a></h3>
<p><strong>Business Problem:</strong>
"I need to process data continuously as it arrives from Kafka/Event Hubs
and write it to Delta Lake in near real-time."</p>
<p><strong>The Solution:</strong>
Configure streaming write with checkpoint location for fault tolerance
and trigger interval for processing frequency.</p>
<p><strong>Recipe: Streaming Ingestion</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a><span class="nt">write</span><span class="p">:</span>
<a id="__codelineno-49-2" name="__codelineno-49-2" href="#__codelineno-49-2"></a><span class="w">  </span><span class="nt">connection</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;silver_lake&quot;</span>
<a id="__codelineno-49-3" name="__codelineno-49-3" href="#__codelineno-49-3"></a><span class="w">  </span><span class="nt">format</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;delta&quot;</span>
<a id="__codelineno-49-4" name="__codelineno-49-4" href="#__codelineno-49-4"></a><span class="w">  </span><span class="nt">table</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;events_stream&quot;</span>
<a id="__codelineno-49-5" name="__codelineno-49-5" href="#__codelineno-49-5"></a><span class="w">  </span><span class="nt">streaming</span><span class="p">:</span>
<a id="__codelineno-49-6" name="__codelineno-49-6" href="#__codelineno-49-6"></a><span class="w">    </span><span class="nt">output_mode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">append</span>
<a id="__codelineno-49-7" name="__codelineno-49-7" href="#__codelineno-49-7"></a><span class="w">    </span><span class="nt">checkpoint_location</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/checkpoints/events_stream&quot;</span>
<a id="__codelineno-49-8" name="__codelineno-49-8" href="#__codelineno-49-8"></a><span class="w">    </span><span class="nt">trigger</span><span class="p">:</span>
<a id="__codelineno-49-9" name="__codelineno-49-9" href="#__codelineno-49-9"></a><span class="w">      </span><span class="nt">processing_time</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10</span><span class="nv"> </span><span class="s">seconds&quot;</span>
</code></pre></div></p>
<p><strong>Recipe: One-Time Streaming (Batch-like)</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a><span class="nt">write</span><span class="p">:</span>
<a id="__codelineno-50-2" name="__codelineno-50-2" href="#__codelineno-50-2"></a><span class="w">  </span><span class="nt">connection</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;silver_lake&quot;</span>
<a id="__codelineno-50-3" name="__codelineno-50-3" href="#__codelineno-50-3"></a><span class="w">  </span><span class="nt">format</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;delta&quot;</span>
<a id="__codelineno-50-4" name="__codelineno-50-4" href="#__codelineno-50-4"></a><span class="w">  </span><span class="nt">table</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;events_batch&quot;</span>
<a id="__codelineno-50-5" name="__codelineno-50-5" href="#__codelineno-50-5"></a><span class="w">  </span><span class="nt">streaming</span><span class="p">:</span>
<a id="__codelineno-50-6" name="__codelineno-50-6" href="#__codelineno-50-6"></a><span class="w">    </span><span class="nt">output_mode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">append</span>
<a id="__codelineno-50-7" name="__codelineno-50-7" href="#__codelineno-50-7"></a><span class="w">    </span><span class="nt">checkpoint_location</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/checkpoints/events_batch&quot;</span>
<a id="__codelineno-50-8" name="__codelineno-50-8" href="#__codelineno-50-8"></a><span class="w">    </span><span class="nt">trigger</span><span class="p">:</span>
<a id="__codelineno-50-9" name="__codelineno-50-9" href="#__codelineno-50-9"></a><span class="w">      </span><span class="nt">available_now</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>output_mode</strong></td>
<td>Literal['append', 'update', 'complete']</td>
<td>No</td>
<td><code>append</code></td>
<td>Output mode for streaming writes. 'append' - Only new rows. 'update' - Updated rows only. 'complete' - Entire result table (requires aggregation).</td>
</tr>
<tr>
<td><strong>checkpoint_location</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>Path for streaming checkpoints. Required for fault tolerance. Must be a reliable storage location (e.g., cloud storage, DBFS).</td>
</tr>
<tr>
<td><strong>trigger</strong></td>
<td>Optional[<a href="#triggerconfig">TriggerConfig</a>]</td>
<td>No</td>
<td>-</td>
<td>Trigger configuration. If not specified, processes data as fast as possible. Use 'processing_time' for micro-batch intervals, 'once' for single batch, 'available_now' for processing all available data then stopping.</td>
</tr>
<tr>
<td><strong>query_name</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Name for the streaming query (useful for monitoring and debugging)</td>
</tr>
<tr>
<td><strong>await_termination</strong></td>
<td>Optional[bool]</td>
<td>No</td>
<td><code>False</code></td>
<td>Wait for the streaming query to terminate. Set to True for batch-like streaming with 'once' or 'available_now' triggers.</td>
</tr>
<tr>
<td><strong>timeout_seconds</strong></td>
<td>Optional[int]</td>
<td>No</td>
<td>-</td>
<td>Timeout in seconds when await_termination is True. If None, waits indefinitely.</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="triggerconfig"><code>TriggerConfig</code><a class="headerlink" href="#triggerconfig" title="Permanent link">&para;</a></h3>
<blockquote>
<p><em>Used in: <a href="#streamingwriteconfig">StreamingWriteConfig</a></em></p>
</blockquote>
<p>Configuration for streaming trigger intervals.</p>
<p>Specify exactly one of the trigger options.</p>
<p>Example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a><span class="nt">trigger</span><span class="p">:</span>
<a id="__codelineno-51-2" name="__codelineno-51-2" href="#__codelineno-51-2"></a><span class="w">  </span><span class="nt">processing_time</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10</span><span class="nv"> </span><span class="s">seconds&quot;</span>
</code></pre></div></p>
<p>Or for one-time processing:
<div class="highlight"><pre><span></span><code><a id="__codelineno-52-1" name="__codelineno-52-1" href="#__codelineno-52-1"></a><span class="nt">trigger</span><span class="p">:</span>
<a id="__codelineno-52-2" name="__codelineno-52-2" href="#__codelineno-52-2"></a><span class="w">  </span><span class="nt">once</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>processing_time</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Trigger interval as duration string (e.g., '10 seconds', '1 minute')</td>
</tr>
<tr>
<td><strong>once</strong></td>
<td>Optional[bool]</td>
<td>No</td>
<td>-</td>
<td>Process all available data once and stop</td>
</tr>
<tr>
<td><strong>available_now</strong></td>
<td>Optional[bool]</td>
<td>No</td>
<td>-</td>
<td>Process all available data in multiple batches, then stop</td>
</tr>
<tr>
<td><strong>continuous</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Continuous processing with checkpoint interval (e.g., '1 second')</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="autooptimizeconfig"><code>AutoOptimizeConfig</code><a class="headerlink" href="#autooptimizeconfig" title="Permanent link">&para;</a></h3>
<blockquote>
<p><em>Used in: <a href="#writeconfig">WriteConfig</a></em></p>
</blockquote>
<p>Configuration for Delta Lake automatic optimization.</p>
<p>Example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-53-1" name="__codelineno-53-1" href="#__codelineno-53-1"></a><span class="nt">auto_optimize</span><span class="p">:</span>
<a id="__codelineno-53-2" name="__codelineno-53-2" href="#__codelineno-53-2"></a><span class="w">  </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id="__codelineno-53-3" name="__codelineno-53-3" href="#__codelineno-53-3"></a><span class="w">  </span><span class="nt">vacuum_retention_hours</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">168</span>
</code></pre></div></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>enabled</strong></td>
<td>bool</td>
<td>No</td>
<td><code>True</code></td>
<td>Enable auto optimization</td>
</tr>
<tr>
<td><strong>vacuum_retention_hours</strong></td>
<td>int</td>
<td>No</td>
<td><code>168</code></td>
<td>Hours to retain history for VACUUM (default 7 days). Set to 0 to disable VACUUM.</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="apioptionsconfig"><code>ApiOptionsConfig</code><a class="headerlink" href="#apioptionsconfig" title="Permanent link">&para;</a></h3>
<p>Complete options configuration for API data sources (format: api).</p>
<p><strong>When to Use:</strong> Pull data from REST APIs with pagination, retry, and rate limiting.</p>
<p><strong>See Also:</strong> <a href="../../guides/api_data_sources/">API Data Sources Guide</a></p>
<p>Example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-54-1" name="__codelineno-54-1" href="#__codelineno-54-1"></a><span class="nt">nodes</span><span class="p">:</span>
<a id="__codelineno-54-2" name="__codelineno-54-2" href="#__codelineno-54-2"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api_data</span>
<a id="__codelineno-54-3" name="__codelineno-54-3" href="#__codelineno-54-3"></a><span class="w">    </span><span class="nt">read</span><span class="p">:</span>
<a id="__codelineno-54-4" name="__codelineno-54-4" href="#__codelineno-54-4"></a><span class="w">      </span><span class="nt">connection</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_api</span>
<a id="__codelineno-54-5" name="__codelineno-54-5" href="#__codelineno-54-5"></a><span class="w">      </span><span class="nt">format</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api</span>
<a id="__codelineno-54-6" name="__codelineno-54-6" href="#__codelineno-54-6"></a><span class="w">      </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/v1/records</span>
<a id="__codelineno-54-7" name="__codelineno-54-7" href="#__codelineno-54-7"></a><span class="w">      </span><span class="nt">options</span><span class="p">:</span>
<a id="__codelineno-54-8" name="__codelineno-54-8" href="#__codelineno-54-8"></a><span class="w">        </span><span class="nt">pagination</span><span class="p">:</span>
<a id="__codelineno-54-9" name="__codelineno-54-9" href="#__codelineno-54-9"></a><span class="w">          </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">offset_limit</span>
<a id="__codelineno-54-10" name="__codelineno-54-10" href="#__codelineno-54-10"></a><span class="w">          </span><span class="nt">limit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1000</span>
<a id="__codelineno-54-11" name="__codelineno-54-11" href="#__codelineno-54-11"></a><span class="w">          </span><span class="nt">max_pages</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span>
<a id="__codelineno-54-12" name="__codelineno-54-12" href="#__codelineno-54-12"></a><span class="w">        </span><span class="nt">response</span><span class="p">:</span>
<a id="__codelineno-54-13" name="__codelineno-54-13" href="#__codelineno-54-13"></a><span class="w">          </span><span class="nt">items_path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">data.records</span>
<a id="__codelineno-54-14" name="__codelineno-54-14" href="#__codelineno-54-14"></a><span class="w">          </span><span class="nt">add_fields</span><span class="p">:</span>
<a id="__codelineno-54-15" name="__codelineno-54-15" href="#__codelineno-54-15"></a><span class="w">            </span><span class="nt">_source</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;my_api&quot;</span>
<a id="__codelineno-54-16" name="__codelineno-54-16" href="#__codelineno-54-16"></a><span class="w">            </span><span class="nt">_fetched_at</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;$now&quot;</span>
<a id="__codelineno-54-17" name="__codelineno-54-17" href="#__codelineno-54-17"></a><span class="w">        </span><span class="nt">retry</span><span class="p">:</span>
<a id="__codelineno-54-18" name="__codelineno-54-18" href="#__codelineno-54-18"></a><span class="w">          </span><span class="nt">max_retries</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<a id="__codelineno-54-19" name="__codelineno-54-19" href="#__codelineno-54-19"></a><span class="w">        </span><span class="nt">rate_limit</span><span class="p">:</span>
<a id="__codelineno-54-20" name="__codelineno-54-20" href="#__codelineno-54-20"></a><span class="w">          </span><span class="nt">requests_per_second</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
</code></pre></div></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>pagination</strong></td>
<td>Optional[<a href="#apipaginationconfig">ApiPaginationConfig</a>]</td>
<td>No</td>
<td>-</td>
<td>Pagination configuration</td>
</tr>
<tr>
<td><strong>response</strong></td>
<td>Optional[<a href="#apiresponseconfig">ApiResponseConfig</a>]</td>
<td>No</td>
<td>-</td>
<td>Response parsing configuration</td>
</tr>
<tr>
<td><strong>retry</strong></td>
<td>Optional[<a href="#apiretryconfig">ApiRetryConfig</a>]</td>
<td>No</td>
<td>-</td>
<td>Retry configuration</td>
</tr>
<tr>
<td><strong>rate_limit</strong></td>
<td>Optional[<a href="#apiratelimitconfig">ApiRateLimitConfig</a>]</td>
<td>No</td>
<td>-</td>
<td>Rate limiting configuration</td>
</tr>
<tr>
<td><strong>method</strong></td>
<td>str</td>
<td>No</td>
<td><code>GET</code></td>
<td>HTTP method (GET, POST)</td>
</tr>
<tr>
<td><strong>headers</strong></td>
<td>Optional[Dict[str, str]]</td>
<td>No</td>
<td>-</td>
<td>Additional HTTP headers</td>
</tr>
<tr>
<td><strong>params</strong></td>
<td>Optional[Dict[str, str]]</td>
<td>No</td>
<td>-</td>
<td>Additional query parameters</td>
</tr>
<tr>
<td><strong>json_body</strong></td>
<td>Optional[Dict[str, Any]]</td>
<td>No</td>
<td>-</td>
<td>JSON body for POST requests</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="apipaginationconfig"><code>ApiPaginationConfig</code><a class="headerlink" href="#apipaginationconfig" title="Permanent link">&para;</a></h3>
<blockquote>
<p><em>Used in: <a href="#apioptionsconfig">ApiOptionsConfig</a></em></p>
</blockquote>
<p>Pagination configuration for API data sources.</p>
<p><strong>When to Use:</strong> Configure how to paginate through API results.</p>
<p>Example (offset/limit pagination):
<div class="highlight"><pre><span></span><code><a id="__codelineno-55-1" name="__codelineno-55-1" href="#__codelineno-55-1"></a><span class="nt">read</span><span class="p">:</span>
<a id="__codelineno-55-2" name="__codelineno-55-2" href="#__codelineno-55-2"></a><span class="w">  </span><span class="nt">format</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api</span>
<a id="__codelineno-55-3" name="__codelineno-55-3" href="#__codelineno-55-3"></a><span class="w">  </span><span class="nt">options</span><span class="p">:</span>
<a id="__codelineno-55-4" name="__codelineno-55-4" href="#__codelineno-55-4"></a><span class="w">    </span><span class="nt">pagination</span><span class="p">:</span>
<a id="__codelineno-55-5" name="__codelineno-55-5" href="#__codelineno-55-5"></a><span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">offset_limit</span>
<a id="__codelineno-55-6" name="__codelineno-55-6" href="#__codelineno-55-6"></a><span class="w">      </span><span class="nt">offset_param</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">skip</span>
<a id="__codelineno-55-7" name="__codelineno-55-7" href="#__codelineno-55-7"></a><span class="w">      </span><span class="nt">limit_param</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">limit</span>
<a id="__codelineno-55-8" name="__codelineno-55-8" href="#__codelineno-55-8"></a><span class="w">      </span><span class="nt">limit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1000</span>
<a id="__codelineno-55-9" name="__codelineno-55-9" href="#__codelineno-55-9"></a><span class="w">      </span><span class="nt">max_pages</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span>
</code></pre></div></p>
<p>Example (cursor-based pagination):
<div class="highlight"><pre><span></span><code><a id="__codelineno-56-1" name="__codelineno-56-1" href="#__codelineno-56-1"></a><span class="nt">read</span><span class="p">:</span>
<a id="__codelineno-56-2" name="__codelineno-56-2" href="#__codelineno-56-2"></a><span class="w">  </span><span class="nt">format</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api</span>
<a id="__codelineno-56-3" name="__codelineno-56-3" href="#__codelineno-56-3"></a><span class="w">  </span><span class="nt">options</span><span class="p">:</span>
<a id="__codelineno-56-4" name="__codelineno-56-4" href="#__codelineno-56-4"></a><span class="w">    </span><span class="nt">pagination</span><span class="p">:</span>
<a id="__codelineno-56-5" name="__codelineno-56-5" href="#__codelineno-56-5"></a><span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cursor</span>
<a id="__codelineno-56-6" name="__codelineno-56-6" href="#__codelineno-56-6"></a><span class="w">      </span><span class="nt">cursor_path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">meta.next_cursor</span>
<a id="__codelineno-56-7" name="__codelineno-56-7" href="#__codelineno-56-7"></a><span class="w">      </span><span class="nt">cursor_param</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cursor</span>
</code></pre></div></p>
<p>Example (link header pagination - GitHub style):
<div class="highlight"><pre><span></span><code><a id="__codelineno-57-1" name="__codelineno-57-1" href="#__codelineno-57-1"></a><span class="nt">read</span><span class="p">:</span>
<a id="__codelineno-57-2" name="__codelineno-57-2" href="#__codelineno-57-2"></a><span class="w">  </span><span class="nt">format</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api</span>
<a id="__codelineno-57-3" name="__codelineno-57-3" href="#__codelineno-57-3"></a><span class="w">  </span><span class="nt">options</span><span class="p">:</span>
<a id="__codelineno-57-4" name="__codelineno-57-4" href="#__codelineno-57-4"></a><span class="w">    </span><span class="nt">pagination</span><span class="p">:</span>
<a id="__codelineno-57-5" name="__codelineno-57-5" href="#__codelineno-57-5"></a><span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">link_header</span>
<a id="__codelineno-57-6" name="__codelineno-57-6" href="#__codelineno-57-6"></a><span class="w">      </span><span class="nt">limit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span>
</code></pre></div></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>type</strong></td>
<td>ApiPaginationType</td>
<td>No</td>
<td><code>ApiPaginationType.OFFSET_LIMIT</code></td>
<td>Pagination strategy to use</td>
</tr>
<tr>
<td><strong>offset_param</strong></td>
<td>str</td>
<td>No</td>
<td><code>offset</code></td>
<td>Query param name for offset (offset_limit type)</td>
</tr>
<tr>
<td><strong>limit_param</strong></td>
<td>str</td>
<td>No</td>
<td><code>limit</code></td>
<td>Query param name for limit</td>
</tr>
<tr>
<td><strong>limit</strong></td>
<td>int</td>
<td>No</td>
<td><code>100</code></td>
<td>Number of records per page</td>
</tr>
<tr>
<td><strong>max_pages</strong></td>
<td>Optional[int]</td>
<td>No</td>
<td>-</td>
<td>Maximum pages to fetch (None = unlimited)</td>
</tr>
<tr>
<td><strong>cursor_path</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Dotted path to cursor in response (cursor type)</td>
</tr>
<tr>
<td><strong>cursor_param</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Query param name for cursor (cursor type)</td>
</tr>
<tr>
<td><strong>page_param</strong></td>
<td>str</td>
<td>No</td>
<td><code>page</code></td>
<td>Query param name for page number (page_number type)</td>
</tr>
<tr>
<td><strong>start_page</strong></td>
<td>int</td>
<td>No</td>
<td><code>1</code></td>
<td>Starting page number (page_number type)</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="apiratelimitconfig"><code>ApiRateLimitConfig</code><a class="headerlink" href="#apiratelimitconfig" title="Permanent link">&para;</a></h3>
<blockquote>
<p><em>Used in: <a href="#apioptionsconfig">ApiOptionsConfig</a></em></p>
</blockquote>
<p>Rate limiting configuration for API requests.</p>
<p>Example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-58-1" name="__codelineno-58-1" href="#__codelineno-58-1"></a><span class="nt">read</span><span class="p">:</span>
<a id="__codelineno-58-2" name="__codelineno-58-2" href="#__codelineno-58-2"></a><span class="w">  </span><span class="nt">format</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api</span>
<a id="__codelineno-58-3" name="__codelineno-58-3" href="#__codelineno-58-3"></a><span class="w">  </span><span class="nt">options</span><span class="p">:</span>
<a id="__codelineno-58-4" name="__codelineno-58-4" href="#__codelineno-58-4"></a><span class="w">    </span><span class="nt">rate_limit</span><span class="p">:</span>
<a id="__codelineno-58-5" name="__codelineno-58-5" href="#__codelineno-58-5"></a><span class="w">      </span><span class="nt">requests_per_second</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
</code></pre></div></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>requests_per_second</strong></td>
<td>Optional[float]</td>
<td>No</td>
<td>-</td>
<td>Max requests per second (None = no limit)</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="apiresponseconfig"><code>ApiResponseConfig</code><a class="headerlink" href="#apiresponseconfig" title="Permanent link">&para;</a></h3>
<blockquote>
<p><em>Used in: <a href="#apioptionsconfig">ApiOptionsConfig</a></em></p>
</blockquote>
<p>Response parsing configuration for API data sources.</p>
<p><strong>When to Use:</strong> Configure how to extract data from API responses.</p>
<p><strong>Date Variables:</strong> Use in <code>add_fields</code> OR <code>params</code> for dynamic dates:</p>
<table>
<thead>
<tr>
<th>Variable</th>
<th>Format</th>
<th>Example Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>$now</code></td>
<td>ISO timestamp</td>
<td><code>2024-01-15T10:30:00+00:00</code></td>
</tr>
<tr>
<td><code>$today</code></td>
<td>YYYY-MM-DD</td>
<td><code>2024-01-15</code></td>
</tr>
<tr>
<td><code>$yesterday</code></td>
<td>YYYY-MM-DD</td>
<td><code>2024-01-14</code></td>
</tr>
<tr>
<td><code>$date</code></td>
<td>YYYY-MM-DD</td>
<td><code>2024-01-15</code></td>
</tr>
<tr>
<td><code>$7_days_ago</code></td>
<td>YYYY-MM-DD</td>
<td><code>2024-01-08</code></td>
</tr>
<tr>
<td><code>$30_days_ago</code></td>
<td>YYYY-MM-DD</td>
<td><code>2023-12-16</code></td>
</tr>
<tr>
<td><code>$90_days_ago</code></td>
<td>YYYY-MM-DD</td>
<td><code>2023-10-17</code></td>
</tr>
<tr>
<td><code>$start_of_week</code></td>
<td>YYYY-MM-DD</td>
<td><code>2024-01-15</code></td>
</tr>
<tr>
<td><code>$start_of_month</code></td>
<td>YYYY-MM-DD</td>
<td><code>2024-01-01</code></td>
</tr>
<tr>
<td><code>$start_of_year</code></td>
<td>YYYY-MM-DD</td>
<td><code>2024-01-01</code></td>
</tr>
<tr>
<td><code>$today_compact</code></td>
<td>YYYYMMDD</td>
<td><code>20240115</code></td>
</tr>
<tr>
<td><code>$yesterday_compact</code></td>
<td>YYYYMMDD</td>
<td><code>20240114</code></td>
</tr>
<tr>
<td><code>$7_days_ago_compact</code></td>
<td>YYYYMMDD</td>
<td><code>20240108</code></td>
</tr>
<tr>
<td><code>$30_days_ago_compact</code></td>
<td>YYYYMMDD</td>
<td><code>20231216</code></td>
</tr>
<tr>
<td><code>$90_days_ago_compact</code></td>
<td>YYYYMMDD</td>
<td><code>20231017</code></td>
</tr>
</tbody>
</table>
<p>Example (add_fields):
<div class="highlight"><pre><span></span><code><a id="__codelineno-59-1" name="__codelineno-59-1" href="#__codelineno-59-1"></a><span class="nt">read</span><span class="p">:</span>
<a id="__codelineno-59-2" name="__codelineno-59-2" href="#__codelineno-59-2"></a><span class="w">  </span><span class="nt">format</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api</span>
<a id="__codelineno-59-3" name="__codelineno-59-3" href="#__codelineno-59-3"></a><span class="w">  </span><span class="nt">options</span><span class="p">:</span>
<a id="__codelineno-59-4" name="__codelineno-59-4" href="#__codelineno-59-4"></a><span class="w">    </span><span class="nt">response</span><span class="p">:</span>
<a id="__codelineno-59-5" name="__codelineno-59-5" href="#__codelineno-59-5"></a><span class="w">      </span><span class="nt">items_path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">results</span>
<a id="__codelineno-59-6" name="__codelineno-59-6" href="#__codelineno-59-6"></a><span class="w">      </span><span class="nt">add_fields</span><span class="p">:</span>
<a id="__codelineno-59-7" name="__codelineno-59-7" href="#__codelineno-59-7"></a><span class="w">        </span><span class="nt">_fetched_at</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;$now&quot;</span>
<a id="__codelineno-59-8" name="__codelineno-59-8" href="#__codelineno-59-8"></a><span class="w">        </span><span class="nt">_load_date</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;$today&quot;</span>
</code></pre></div></p>
<p>Example (params with compact dates for openFDA):
<div class="highlight"><pre><span></span><code><a id="__codelineno-60-1" name="__codelineno-60-1" href="#__codelineno-60-1"></a><span class="nt">read</span><span class="p">:</span>
<a id="__codelineno-60-2" name="__codelineno-60-2" href="#__codelineno-60-2"></a><span class="w">  </span><span class="nt">format</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api</span>
<a id="__codelineno-60-3" name="__codelineno-60-3" href="#__codelineno-60-3"></a><span class="w">  </span><span class="nt">options</span><span class="p">:</span>
<a id="__codelineno-60-4" name="__codelineno-60-4" href="#__codelineno-60-4"></a><span class="w">    </span><span class="nt">params</span><span class="p">:</span>
<a id="__codelineno-60-5" name="__codelineno-60-5" href="#__codelineno-60-5"></a><span class="w">      </span><span class="nt">search</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;report_date:[$30_days_ago_compact+TO+$today_compact]&quot;</span>
</code></pre></div></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>items_path</strong></td>
<td>str</td>
<td>No</td>
<td>-</td>
<td>Dotted path to items array in response (e.g., 'results', 'data.items'). Empty = response is the array.</td>
</tr>
<tr>
<td><strong>dict_to_list</strong></td>
<td>bool</td>
<td>No</td>
<td><code>False</code></td>
<td>If True and items_path resolves to a dict, extract dict values as rows with keys preserved in '_key' field. Useful for APIs like ddragon that return {'Aatrox': {...}, 'Ahri': {...}}.</td>
</tr>
<tr>
<td><strong>add_fields</strong></td>
<td>Optional[Dict[str, Any]]</td>
<td>No</td>
<td>-</td>
<td>Fields to add to each record. Supports date variables: $now, $today, $yesterday, $7_days_ago, etc.</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="apiretryconfig"><code>ApiRetryConfig</code><a class="headerlink" href="#apiretryconfig" title="Permanent link">&para;</a></h3>
<blockquote>
<p><em>Used in: <a href="#apioptionsconfig">ApiOptionsConfig</a></em></p>
</blockquote>
<p>Retry configuration for API requests.</p>
<p>Example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-61-1" name="__codelineno-61-1" href="#__codelineno-61-1"></a><span class="nt">read</span><span class="p">:</span>
<a id="__codelineno-61-2" name="__codelineno-61-2" href="#__codelineno-61-2"></a><span class="w">  </span><span class="nt">format</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api</span>
<a id="__codelineno-61-3" name="__codelineno-61-3" href="#__codelineno-61-3"></a><span class="w">  </span><span class="nt">options</span><span class="p">:</span>
<a id="__codelineno-61-4" name="__codelineno-61-4" href="#__codelineno-61-4"></a><span class="w">    </span><span class="nt">retry</span><span class="p">:</span>
<a id="__codelineno-61-5" name="__codelineno-61-5" href="#__codelineno-61-5"></a><span class="w">      </span><span class="nt">max_retries</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<a id="__codelineno-61-6" name="__codelineno-61-6" href="#__codelineno-61-6"></a><span class="w">      </span><span class="nt">backoff_factor</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2.0</span>
<a id="__codelineno-61-7" name="__codelineno-61-7" href="#__codelineno-61-7"></a><span class="w">      </span><span class="nt">retry_codes</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">429</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">500</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">502</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">503</span><span class="p p-Indicator">]</span>
</code></pre></div></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>max_retries</strong></td>
<td>int</td>
<td>No</td>
<td><code>3</code></td>
<td>Maximum retry attempts</td>
</tr>
<tr>
<td><strong>backoff_factor</strong></td>
<td>float</td>
<td>No</td>
<td><code>2.0</code></td>
<td>Exponential backoff multiplier</td>
</tr>
<tr>
<td><strong>retry_codes</strong></td>
<td>List[int]</td>
<td>No</td>
<td><code>[429, 500, 502, 503, 504]</code></td>
<td>HTTP status codes to retry on</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="privacyconfig"><code>PrivacyConfig</code><a class="headerlink" href="#privacyconfig" title="Permanent link">&para;</a></h3>
<blockquote>
<p><em>Used in: <a href="#nodeconfig">NodeConfig</a></em></p>
</blockquote>
<p>Configuration for PII anonymization.</p>
<h3 id="privacy-pii-protection">🔐 Privacy &amp; PII Protection<a class="headerlink" href="#privacy-pii-protection" title="Permanent link">&para;</a></h3>
<p><strong>How It Works:</strong>
1. Mark columns as <code>pii: true</code> in the <code>columns</code> metadata
2. Configure a <code>privacy</code> block with the anonymization method
3. During node execution, all columns marked as PII (and inherited from dependencies) are anonymized
4. Upstream PII markings are inherited by downstream nodes</p>
<p><strong>Example:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-62-1" name="__codelineno-62-1" href="#__codelineno-62-1"></a><span class="nt">columns</span><span class="p">:</span>
<a id="__codelineno-62-2" name="__codelineno-62-2" href="#__codelineno-62-2"></a><span class="w">  </span><span class="nt">customer_email</span><span class="p">:</span>
<a id="__codelineno-62-3" name="__codelineno-62-3" href="#__codelineno-62-3"></a><span class="w">    </span><span class="nt">pii</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w">  </span><span class="c1"># Mark as PII</span>
<a id="__codelineno-62-4" name="__codelineno-62-4" href="#__codelineno-62-4"></a><span class="w">  </span><span class="nt">customer_id</span><span class="p">:</span>
<a id="__codelineno-62-5" name="__codelineno-62-5" href="#__codelineno-62-5"></a><span class="w">    </span><span class="nt">pii</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<a id="__codelineno-62-6" name="__codelineno-62-6" href="#__codelineno-62-6"></a>
<a id="__codelineno-62-7" name="__codelineno-62-7" href="#__codelineno-62-7"></a><span class="nt">privacy</span><span class="p">:</span>
<a id="__codelineno-62-8" name="__codelineno-62-8" href="#__codelineno-62-8"></a><span class="w">  </span><span class="nt">method</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">hash</span><span class="w">       </span><span class="c1"># hash, mask, or redact</span>
<a id="__codelineno-62-9" name="__codelineno-62-9" href="#__codelineno-62-9"></a><span class="w">  </span><span class="nt">salt</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;secret_key&quot;</span><span class="w"> </span><span class="c1"># Optional: makes hash unique/secure</span>
<a id="__codelineno-62-10" name="__codelineno-62-10" href="#__codelineno-62-10"></a><span class="w">  </span><span class="nt">declassify</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span><span class="w">     </span><span class="c1"># Remove columns from PII protection</span>
</code></pre></div></p>
<p><strong>Methods:</strong>
- <code>hash</code>: SHA256 hash (length 64). With salt, prevents pre-computed rainbow tables.
- <code>mask</code>: Show only last 4 chars, replace rest with <code>*</code>. Example: <code>john@email.com</code> → <code>****@email.com</code>
- <code>redact</code>: Replace entire value with <code>[REDACTED]</code></p>
<p><strong>Important:</strong>
- <code>pii: true</code> alone does NOTHING. You must set a <code>privacy.method</code> to actually mask data.
- PII inheritance: If dependency outputs PII columns, this node inherits them unless declassified.
- Salt is optional but recommended for hash to prevent attacks.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>method</strong></td>
<td>PrivacyMethod</td>
<td>Yes</td>
<td>-</td>
<td>Anonymization method: 'hash' (SHA256), 'mask' (show last 4), or 'redact' ([REDACTED])</td>
</tr>
<tr>
<td><strong>salt</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Salt for hashing (optional but recommended). Appended before hashing to create unique hashes. Example: 'company_secret_key_2025'</td>
</tr>
<tr>
<td><strong>declassify</strong></td>
<td>List[str]</td>
<td>No</td>
<td><code>PydanticUndefined</code></td>
<td>List of columns to remove from PII protection (stops inheritance from upstream). Example: ['customer_id']</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="sqlserverauditcolsconfig"><code>SqlServerAuditColsConfig</code><a class="headerlink" href="#sqlserverauditcolsconfig" title="Permanent link">&para;</a></h3>
<blockquote>
<p><em>Used in: <a href="#sqlservermergeoptions">SqlServerMergeOptions</a>, <a href="#sqlserveroverwriteoptions">SqlServerOverwriteOptions</a></em></p>
</blockquote>
<p>Audit column configuration for SQL Server merge operations.</p>
<p>These columns are automatically populated with GETUTCDATE() during merge:
- <code>created_col</code>: Set on INSERT only
- <code>updated_col</code>: Set on INSERT and UPDATE</p>
<p>Example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-63-1" name="__codelineno-63-1" href="#__codelineno-63-1"></a><span class="nt">audit_cols</span><span class="p">:</span>
<a id="__codelineno-63-2" name="__codelineno-63-2" href="#__codelineno-63-2"></a><span class="w">  </span><span class="nt">created_col</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">created_ts</span>
<a id="__codelineno-63-3" name="__codelineno-63-3" href="#__codelineno-63-3"></a><span class="w">  </span><span class="nt">updated_col</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">updated_ts</span>
</code></pre></div></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>created_col</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Column name for creation timestamp (set on INSERT)</td>
</tr>
<tr>
<td><strong>updated_col</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Column name for update timestamp (set on INSERT and UPDATE)</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="sqlservermergeoptions"><code>SqlServerMergeOptions</code><a class="headerlink" href="#sqlservermergeoptions" title="Permanent link">&para;</a></h3>
<blockquote>
<p><em>Used in: <a href="#writeconfig">WriteConfig</a></em></p>
</blockquote>
<p>Options for SQL Server MERGE operations (Phase 1).</p>
<p>Enables incremental sync from Spark to SQL Server using T-SQL MERGE.
Data is written to a staging table, then merged into the target.</p>
<h3 id="basic-usage">Basic Usage<a class="headerlink" href="#basic-usage" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-64-1" name="__codelineno-64-1" href="#__codelineno-64-1"></a><span class="nt">write</span><span class="p">:</span>
<a id="__codelineno-64-2" name="__codelineno-64-2" href="#__codelineno-64-2"></a><span class="w">  </span><span class="nt">connection</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">azure_sql</span>
<a id="__codelineno-64-3" name="__codelineno-64-3" href="#__codelineno-64-3"></a><span class="w">  </span><span class="nt">format</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sql_server</span>
<a id="__codelineno-64-4" name="__codelineno-64-4" href="#__codelineno-64-4"></a><span class="w">  </span><span class="nt">table</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sales.fact_orders</span>
<a id="__codelineno-64-5" name="__codelineno-64-5" href="#__codelineno-64-5"></a><span class="w">  </span><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">merge</span>
<a id="__codelineno-64-6" name="__codelineno-64-6" href="#__codelineno-64-6"></a><span class="w">  </span><span class="nt">merge_keys</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">DateId</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">store_id</span><span class="p p-Indicator">]</span>
<a id="__codelineno-64-7" name="__codelineno-64-7" href="#__codelineno-64-7"></a><span class="w">  </span><span class="nt">merge_options</span><span class="p">:</span>
<a id="__codelineno-64-8" name="__codelineno-64-8" href="#__codelineno-64-8"></a><span class="w">    </span><span class="nt">update_condition</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;source._hash_diff</span><span class="nv"> </span><span class="s">!=</span><span class="nv"> </span><span class="s">target._hash_diff&quot;</span>
<a id="__codelineno-64-9" name="__codelineno-64-9" href="#__codelineno-64-9"></a><span class="w">    </span><span class="nt">exclude_columns</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">_hash_diff</span><span class="p p-Indicator">]</span>
<a id="__codelineno-64-10" name="__codelineno-64-10" href="#__codelineno-64-10"></a><span class="w">    </span><span class="nt">audit_cols</span><span class="p">:</span>
<a id="__codelineno-64-11" name="__codelineno-64-11" href="#__codelineno-64-11"></a><span class="w">      </span><span class="nt">created_col</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">created_ts</span>
<a id="__codelineno-64-12" name="__codelineno-64-12" href="#__codelineno-64-12"></a><span class="w">      </span><span class="nt">updated_col</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">updated_ts</span>
</code></pre></div>
<h3 id="conditions">Conditions<a class="headerlink" href="#conditions" title="Permanent link">&para;</a></h3>
<ul>
<li><code>update_condition</code>: Only update rows matching this condition (e.g., hash diff)</li>
<li><code>delete_condition</code>: Delete rows matching this condition (soft delete pattern)</li>
<li><code>insert_condition</code>: Only insert rows matching this condition</li>
</ul>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>update_condition</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>SQL condition for WHEN MATCHED UPDATE. Use 'source.' and 'target.' prefixes. Example: 'source._hash_diff != target._hash_diff'</td>
</tr>
<tr>
<td><strong>delete_condition</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>SQL condition for WHEN MATCHED DELETE. Example: 'source._is_deleted = 1'</td>
</tr>
<tr>
<td><strong>insert_condition</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>SQL condition for WHEN NOT MATCHED INSERT. Example: 'source.is_valid = 1'</td>
</tr>
<tr>
<td><strong>exclude_columns</strong></td>
<td>List[str]</td>
<td>No</td>
<td><code>PydanticUndefined</code></td>
<td>Columns to exclude from MERGE (not written to target table)</td>
</tr>
<tr>
<td><strong>staging_schema</strong></td>
<td>str</td>
<td>No</td>
<td><code>staging</code></td>
<td>Schema for staging table. Table name: {staging_schema}.{table}_staging</td>
</tr>
<tr>
<td><strong>audit_cols</strong></td>
<td>Optional[<a href="#sqlserverauditcolsconfig">SqlServerAuditColsConfig</a>]</td>
<td>No</td>
<td>-</td>
<td>Audit columns for created/updated timestamps</td>
</tr>
<tr>
<td><strong>validations</strong></td>
<td>Optional[ForwardRef('<a href="#sqlservermergevalidationconfig">SqlServerMergeValidationConfig</a>')]</td>
<td>No</td>
<td>-</td>
<td>Validation checks before merge (null keys, duplicate keys)</td>
</tr>
<tr>
<td><strong>auto_create_schema</strong></td>
<td>bool</td>
<td>No</td>
<td><code>False</code></td>
<td>Auto-create schema if it doesn't exist (Phase 4). Runs CREATE SCHEMA IF NOT EXISTS.</td>
</tr>
<tr>
<td><strong>auto_create_table</strong></td>
<td>bool</td>
<td>No</td>
<td><code>False</code></td>
<td>Auto-create target table if it doesn't exist (Phase 4). Infers schema from DataFrame.</td>
</tr>
<tr>
<td><strong>schema_evolution</strong></td>
<td>Optional[ForwardRef('<a href="#sqlserverschemaevolutionconfig">SqlServerSchemaEvolutionConfig</a>')]</td>
<td>No</td>
<td>-</td>
<td>Schema evolution configuration (Phase 4). Controls handling of schema differences.</td>
</tr>
<tr>
<td><strong>batch_size</strong></td>
<td>Optional[int]</td>
<td>No</td>
<td>-</td>
<td>Batch size for staging table writes (Phase 4). Chunks large DataFrames for memory efficiency.</td>
</tr>
<tr>
<td><strong>primary_key_on_merge_keys</strong></td>
<td>bool</td>
<td>No</td>
<td><code>False</code></td>
<td>Create a clustered primary key on merge_keys when auto-creating table. Enforces uniqueness.</td>
</tr>
<tr>
<td><strong>index_on_merge_keys</strong></td>
<td>bool</td>
<td>No</td>
<td><code>False</code></td>
<td>Create a nonclustered index on merge_keys. Use if primary key already exists elsewhere.</td>
</tr>
<tr>
<td><strong>incremental</strong></td>
<td>bool</td>
<td>No</td>
<td><code>False</code></td>
<td>Enable incremental merge optimization. When True, reads target table's keys and hashes to determine which rows changed, then only writes changed rows to staging. Significantly faster when few rows change between runs.</td>
</tr>
<tr>
<td><strong>hash_column</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Name of pre-computed hash column in DataFrame for change detection. Used when incremental=True. If not specified, will auto-detect '_hash_diff' column.</td>
</tr>
<tr>
<td><strong>change_detection_columns</strong></td>
<td>Optional[List[str]]</td>
<td>No</td>
<td>-</td>
<td>Columns to use for computing change detection hash. Used when incremental=True and no hash_column is specified. If None, uses all non-key columns.</td>
</tr>
<tr>
<td><strong>bulk_copy</strong></td>
<td>bool</td>
<td>No</td>
<td><code>False</code></td>
<td>Enable bulk copy mode for fast staging table loads. Writes data to ADLS as staging file, then uses BULK INSERT. 10-50x faster than JDBC for large datasets. Requires staging_connection.</td>
</tr>
<tr>
<td><strong>staging_connection</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Connection name for staging files (ADLS/Blob storage). Required when bulk_copy=True. The connection must have write access.</td>
</tr>
<tr>
<td><strong>staging_path</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Path prefix for staging files. Defaults to 'odibi_staging/bulk'. Files are automatically cleaned up after successful load.</td>
</tr>
<tr>
<td><strong>external_data_source</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>SQL Server external data source name for BULK INSERT. If not specified and auto_setup=True, will be auto-generated as 'odibi_{staging_connection}'.</td>
</tr>
<tr>
<td><strong>keep_staging_files</strong></td>
<td>bool</td>
<td>No</td>
<td><code>False</code></td>
<td>Keep staging files after load (for debugging). Default deletes after success.</td>
</tr>
<tr>
<td><strong>auto_setup</strong></td>
<td>bool</td>
<td>No</td>
<td><code>False</code></td>
<td>Auto-create SQL Server external data source and credential if they don't exist. Reads auth credentials from staging_connection and creates matching SQL objects. Requires elevated SQL permissions (ALTER ANY EXTERNAL DATA SOURCE, CONTROL).</td>
</tr>
<tr>
<td><strong>force_recreate</strong></td>
<td>bool</td>
<td>No</td>
<td><code>False</code></td>
<td>Force recreation of external data source and credential even if they exist. Use when you've rotated SAS tokens or storage keys and need to update SQL Server. Has no effect if auto_setup=False.</td>
</tr>
<tr>
<td><strong>csv_options</strong></td>
<td>Optional[Dict[str, str]]</td>
<td>No</td>
<td>-</td>
<td>Custom CSV options for bulk copy when writing to Azure SQL Database. Passed to Spark CSV writer. Defaults: quote='"', escape='"', escapeQuotes='true', nullValue='', emptyValue='', encoding='UTF-8'. Override any option here.</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="sqlservermergevalidationconfig"><code>SqlServerMergeValidationConfig</code><a class="headerlink" href="#sqlservermergevalidationconfig" title="Permanent link">&para;</a></h3>
<blockquote>
<p><em>Used in: <a href="#sqlservermergeoptions">SqlServerMergeOptions</a>, <a href="#sqlserveroverwriteoptions">SqlServerOverwriteOptions</a></em></p>
</blockquote>
<p>Validation configuration for SQL Server merge/overwrite operations.</p>
<p>Validates source data before writing to SQL Server.</p>
<p>Example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-65-1" name="__codelineno-65-1" href="#__codelineno-65-1"></a><span class="nt">merge_options</span><span class="p">:</span>
<a id="__codelineno-65-2" name="__codelineno-65-2" href="#__codelineno-65-2"></a><span class="w">  </span><span class="nt">validations</span><span class="p">:</span>
<a id="__codelineno-65-3" name="__codelineno-65-3" href="#__codelineno-65-3"></a><span class="w">    </span><span class="nt">check_null_keys</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id="__codelineno-65-4" name="__codelineno-65-4" href="#__codelineno-65-4"></a><span class="w">    </span><span class="nt">check_duplicate_keys</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id="__codelineno-65-5" name="__codelineno-65-5" href="#__codelineno-65-5"></a><span class="w">    </span><span class="nt">fail_on_validation_error</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>check_null_keys</strong></td>
<td>bool</td>
<td>No</td>
<td><code>True</code></td>
<td>Fail if merge_keys contain NULL values</td>
</tr>
<tr>
<td><strong>check_duplicate_keys</strong></td>
<td>bool</td>
<td>No</td>
<td><code>True</code></td>
<td>Fail if merge_keys have duplicate combinations</td>
</tr>
<tr>
<td><strong>fail_on_validation_error</strong></td>
<td>bool</td>
<td>No</td>
<td><code>True</code></td>
<td>If False, log warning instead of failing on validation errors</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="sqlserveroverwriteoptions"><code>SqlServerOverwriteOptions</code><a class="headerlink" href="#sqlserveroverwriteoptions" title="Permanent link">&para;</a></h3>
<blockquote>
<p><em>Used in: <a href="#writeconfig">WriteConfig</a></em></p>
</blockquote>
<p>Options for SQL Server overwrite operations (Phase 2).</p>
<p>Enhanced overwrite with multiple strategies for different use cases.</p>
<h3 id="strategies">Strategies<a class="headerlink" href="#strategies" title="Permanent link">&para;</a></h3>
<ul>
<li><code>truncate_insert</code>: TRUNCATE TABLE then INSERT (fastest, requires TRUNCATE permission)</li>
<li><code>drop_create</code>: DROP TABLE, CREATE TABLE, INSERT (refreshes schema)</li>
<li><code>delete_insert</code>: DELETE FROM then INSERT (works with limited permissions)</li>
</ul>
<h3 id="example">Example<a class="headerlink" href="#example" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-66-1" name="__codelineno-66-1" href="#__codelineno-66-1"></a><span class="nt">write</span><span class="p">:</span>
<a id="__codelineno-66-2" name="__codelineno-66-2" href="#__codelineno-66-2"></a><span class="w">  </span><span class="nt">connection</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">azure_sql</span>
<a id="__codelineno-66-3" name="__codelineno-66-3" href="#__codelineno-66-3"></a><span class="w">  </span><span class="nt">format</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sql_server</span>
<a id="__codelineno-66-4" name="__codelineno-66-4" href="#__codelineno-66-4"></a><span class="w">  </span><span class="nt">table</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fact.combined_downtime</span>
<a id="__codelineno-66-5" name="__codelineno-66-5" href="#__codelineno-66-5"></a><span class="w">  </span><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">overwrite</span>
<a id="__codelineno-66-6" name="__codelineno-66-6" href="#__codelineno-66-6"></a><span class="w">  </span><span class="nt">overwrite_options</span><span class="p">:</span>
<a id="__codelineno-66-7" name="__codelineno-66-7" href="#__codelineno-66-7"></a><span class="w">    </span><span class="nt">strategy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">truncate_insert</span>
<a id="__codelineno-66-8" name="__codelineno-66-8" href="#__codelineno-66-8"></a><span class="w">    </span><span class="nt">audit_cols</span><span class="p">:</span>
<a id="__codelineno-66-9" name="__codelineno-66-9" href="#__codelineno-66-9"></a><span class="w">      </span><span class="nt">created_col</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">created_ts</span>
<a id="__codelineno-66-10" name="__codelineno-66-10" href="#__codelineno-66-10"></a><span class="w">      </span><span class="nt">updated_col</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">updated_ts</span>
</code></pre></div>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>strategy</strong></td>
<td>SqlServerOverwriteStrategy</td>
<td>No</td>
<td><code>SqlServerOverwriteStrategy.TRUNCATE_INSERT</code></td>
<td>Overwrite strategy: truncate_insert, drop_create, delete_insert</td>
</tr>
<tr>
<td><strong>audit_cols</strong></td>
<td>Optional[<a href="#sqlserverauditcolsconfig">SqlServerAuditColsConfig</a>]</td>
<td>No</td>
<td>-</td>
<td>Audit columns for created/updated timestamps</td>
</tr>
<tr>
<td><strong>validations</strong></td>
<td>Optional[<a href="#sqlservermergevalidationconfig">SqlServerMergeValidationConfig</a>]</td>
<td>No</td>
<td>-</td>
<td>Validation checks before overwrite</td>
</tr>
<tr>
<td><strong>auto_create_schema</strong></td>
<td>bool</td>
<td>No</td>
<td><code>False</code></td>
<td>Auto-create schema if it doesn't exist (Phase 4). Runs CREATE SCHEMA IF NOT EXISTS.</td>
</tr>
<tr>
<td><strong>auto_create_table</strong></td>
<td>bool</td>
<td>No</td>
<td><code>False</code></td>
<td>Auto-create target table if it doesn't exist (Phase 4). Infers schema from DataFrame.</td>
</tr>
<tr>
<td><strong>schema_evolution</strong></td>
<td>Optional[<a href="#sqlserverschemaevolutionconfig">SqlServerSchemaEvolutionConfig</a>]</td>
<td>No</td>
<td>-</td>
<td>Schema evolution configuration (Phase 4). Controls handling of schema differences.</td>
</tr>
<tr>
<td><strong>batch_size</strong></td>
<td>Optional[int]</td>
<td>No</td>
<td>-</td>
<td>Batch size for writes (Phase 4). Chunks large DataFrames for memory efficiency.</td>
</tr>
<tr>
<td><strong>bulk_copy</strong></td>
<td>bool</td>
<td>No</td>
<td><code>False</code></td>
<td>Enable bulk copy mode for fast writes. Writes data to ADLS as staging file, then uses BULK INSERT. 10-50x faster than JDBC for large datasets. Requires staging_connection.</td>
</tr>
<tr>
<td><strong>staging_connection</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Connection name for staging files (ADLS/Blob storage). Required when bulk_copy=True. The connection must have write access.</td>
</tr>
<tr>
<td><strong>staging_path</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Path prefix for staging files. Defaults to 'odibi_staging/bulk'. Files are automatically cleaned up after successful load.</td>
</tr>
<tr>
<td><strong>external_data_source</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>SQL Server external data source name for BULK INSERT. If not specified and auto_setup=True, will be auto-generated as 'odibi_{staging_connection}'.</td>
</tr>
<tr>
<td><strong>keep_staging_files</strong></td>
<td>bool</td>
<td>No</td>
<td><code>False</code></td>
<td>Keep staging files after load (for debugging). Default deletes after success.</td>
</tr>
<tr>
<td><strong>auto_setup</strong></td>
<td>bool</td>
<td>No</td>
<td><code>False</code></td>
<td>Auto-create SQL Server external data source and credential if they don't exist. Reads auth credentials from staging_connection and creates matching SQL objects. Requires elevated SQL permissions (ALTER ANY EXTERNAL DATA SOURCE, CONTROL).</td>
</tr>
<tr>
<td><strong>force_recreate</strong></td>
<td>bool</td>
<td>No</td>
<td><code>False</code></td>
<td>Force recreation of external data source and credential even if they exist. Use when you've rotated SAS tokens or storage keys and need to update SQL Server. Has no effect if auto_setup=False.</td>
</tr>
<tr>
<td><strong>csv_options</strong></td>
<td>Optional[Dict[str, str]]</td>
<td>No</td>
<td>-</td>
<td>Custom CSV options for bulk copy when writing to Azure SQL Database. Passed to Spark CSV writer. Defaults: quote='"', escape='"', escapeQuotes='true', nullValue='', emptyValue='', encoding='UTF-8'. Override any option here.</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="sqlserverschemaevolutionconfig"><code>SqlServerSchemaEvolutionConfig</code><a class="headerlink" href="#sqlserverschemaevolutionconfig" title="Permanent link">&para;</a></h3>
<blockquote>
<p><em>Used in: <a href="#sqlservermergeoptions">SqlServerMergeOptions</a>, <a href="#sqlserveroverwriteoptions">SqlServerOverwriteOptions</a></em></p>
</blockquote>
<p>Schema evolution configuration for SQL Server operations (Phase 4).</p>
<p>Controls automatic schema changes when DataFrame schema differs from target table.</p>
<p>Example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-67-1" name="__codelineno-67-1" href="#__codelineno-67-1"></a><span class="nt">merge_options</span><span class="p">:</span>
<a id="__codelineno-67-2" name="__codelineno-67-2" href="#__codelineno-67-2"></a><span class="w">  </span><span class="nt">schema_evolution</span><span class="p">:</span>
<a id="__codelineno-67-3" name="__codelineno-67-3" href="#__codelineno-67-3"></a><span class="w">    </span><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">evolve</span>
<a id="__codelineno-67-4" name="__codelineno-67-4" href="#__codelineno-67-4"></a><span class="w">    </span><span class="nt">add_columns</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>mode</strong></td>
<td>SqlServerSchemaEvolutionMode</td>
<td>No</td>
<td><code>SqlServerSchemaEvolutionMode.STRICT</code></td>
<td>Schema evolution mode: strict (fail), evolve (add columns), ignore (skip mismatched)</td>
</tr>
<tr>
<td><strong>add_columns</strong></td>
<td>bool</td>
<td>No</td>
<td><code>False</code></td>
<td>If mode='evolve', automatically add new columns via ALTER TABLE ADD COLUMN</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="transformstep"><code>TransformStep</code><a class="headerlink" href="#transformstep" title="Permanent link">&para;</a></h3>
<blockquote>
<p><em>Used in: <a href="#transformconfig">TransformConfig</a></em></p>
</blockquote>
<p>Single transformation step.</p>
<p>Supports four step types (exactly one required):</p>
<ul>
<li><code>sql</code> - Inline SQL query string</li>
<li><code>sql_file</code> - Path to external .sql file (relative to the YAML file defining the node)</li>
<li><code>function</code> - Registered Python function name</li>
<li><code>operation</code> - Built-in operation (e.g., drop_duplicates)</li>
</ul>
<p><strong>sql_file Example:</strong></p>
<p>If your project structure is:
<div class="highlight"><pre><span></span><code><a id="__codelineno-68-1" name="__codelineno-68-1" href="#__codelineno-68-1"></a>project.yaml              # imports pipelines/silver/silver.yaml
<a id="__codelineno-68-2" name="__codelineno-68-2" href="#__codelineno-68-2"></a>pipelines/
<a id="__codelineno-68-3" name="__codelineno-68-3" href="#__codelineno-68-3"></a>  silver/
<a id="__codelineno-68-4" name="__codelineno-68-4" href="#__codelineno-68-4"></a>    silver.yaml           # defines the node
<a id="__codelineno-68-5" name="__codelineno-68-5" href="#__codelineno-68-5"></a>    sql/
<a id="__codelineno-68-6" name="__codelineno-68-6" href="#__codelineno-68-6"></a>      transform.sql       # your SQL file
</code></pre></div></p>
<p>In <code>silver.yaml</code>, use a path relative to <code>silver.yaml</code>:
<div class="highlight"><pre><span></span><code><a id="__codelineno-69-1" name="__codelineno-69-1" href="#__codelineno-69-1"></a><span class="nt">transform</span><span class="p">:</span>
<a id="__codelineno-69-2" name="__codelineno-69-2" href="#__codelineno-69-2"></a><span class="w">  </span><span class="nt">steps</span><span class="p">:</span>
<a id="__codelineno-69-3" name="__codelineno-69-3" href="#__codelineno-69-3"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">sql_file</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sql/transform.sql</span><span class="w">   </span><span class="c1"># relative to silver.yaml</span>
</code></pre></div></p>
<p><strong>Important:</strong> The path is resolved relative to the YAML file where the node is defined,
NOT the project.yaml that imports it. Do NOT use absolute paths like <code>/pipelines/silver/sql/...</code>.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>sql</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Inline SQL query. Use <code>df</code> to reference the current DataFrame.</td>
</tr>
<tr>
<td><strong>sql_file</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Path to external .sql file, relative to the YAML file defining the node. Example: 'sql/transform.sql' resolves relative to the node's source YAML.</td>
</tr>
<tr>
<td><strong>function</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Name of a registered Python function (@transform or @register).</td>
</tr>
<tr>
<td><strong>operation</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Built-in operation name (e.g., drop_duplicates, fill_na).</td>
</tr>
<tr>
<td><strong>params</strong></td>
<td>Dict[str, Any]</td>
<td>No</td>
<td><code>PydanticUndefined</code></td>
<td>Parameters to pass to function or operation.</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="contracts-data-quality-gates">Contracts (Data Quality Gates)<a class="headerlink" href="#contracts-data-quality-gates" title="Permanent link">&para;</a></h2>
<h3 id="contracts-pre-transform-checks">Contracts (Pre-Transform Checks)<a class="headerlink" href="#contracts-pre-transform-checks" title="Permanent link">&para;</a></h3>
<p>Contracts are <strong>fail-fast data quality checks</strong> that run on input data <strong>before</strong> transformation.
They always halt execution on failure - use them to prevent bad data from entering the pipeline.</p>
<p><strong>Contracts vs Validation vs Quality Gates:</strong></p>
<table>
<thead>
<tr>
<th>Feature</th>
<th>When it Runs</th>
<th>On Failure</th>
<th>Use Case</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Contracts</strong></td>
<td>Before transform</td>
<td>Always fails</td>
<td>Input data quality (not-null, unique keys)</td>
</tr>
<tr>
<td><strong>Validation</strong></td>
<td>After transform</td>
<td>Configurable (fail/warn/quarantine)</td>
<td>Output data quality (ranges, formats)</td>
</tr>
<tr>
<td><strong>Quality Gates</strong></td>
<td>After validation</td>
<td>Configurable (abort/warn)</td>
<td>Pipeline-level thresholds (pass rate, row counts)</td>
</tr>
<tr>
<td><strong>Quarantine</strong></td>
<td>With validation</td>
<td>Routes bad rows</td>
<td>Capture invalid records for review</td>
</tr>
</tbody>
</table>
<p><strong>See Also:</strong>
- <a href="../../features/quality_gates/">Validation Guide</a> - Full validation configuration
- <a href="../../features/quarantine/">Quarantine Guide</a> - Quarantine setup and review
- <a href="../../tutorials/getting_started/#add-data-validation">Getting Started: Validation</a></p>
<p><strong>Example:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-70-1" name="__codelineno-70-1" href="#__codelineno-70-1"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;process_orders&quot;</span>
<a id="__codelineno-70-2" name="__codelineno-70-2" href="#__codelineno-70-2"></a><span class="w">  </span><span class="nt">contracts</span><span class="p">:</span>
<a id="__codelineno-70-3" name="__codelineno-70-3" href="#__codelineno-70-3"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">not_null</span>
<a id="__codelineno-70-4" name="__codelineno-70-4" href="#__codelineno-70-4"></a><span class="w">      </span><span class="nt">columns</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">order_id</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">customer_id</span><span class="p p-Indicator">]</span>
<a id="__codelineno-70-5" name="__codelineno-70-5" href="#__codelineno-70-5"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">row_count</span>
<a id="__codelineno-70-6" name="__codelineno-70-6" href="#__codelineno-70-6"></a><span class="w">      </span><span class="nt">min</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span>
<a id="__codelineno-70-7" name="__codelineno-70-7" href="#__codelineno-70-7"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">freshness</span>
<a id="__codelineno-70-8" name="__codelineno-70-8" href="#__codelineno-70-8"></a><span class="w">      </span><span class="nt">column</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">created_at</span>
<a id="__codelineno-70-9" name="__codelineno-70-9" href="#__codelineno-70-9"></a><span class="w">      </span><span class="nt">max_age</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;24h&quot;</span>
<a id="__codelineno-70-10" name="__codelineno-70-10" href="#__codelineno-70-10"></a><span class="w">  </span><span class="nt">read</span><span class="p">:</span>
<a id="__codelineno-70-11" name="__codelineno-70-11" href="#__codelineno-70-11"></a><span class="w">    </span><span class="nt">source</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">raw_orders</span>
</code></pre></div></p>
<hr />
<h3 id="acceptedvaluestest"><code>AcceptedValuesTest</code><a class="headerlink" href="#acceptedvaluestest" title="Permanent link">&para;</a></h3>
<blockquote>
<p><em>Used in: <a href="#nodeconfig">NodeConfig</a>, <a href="#validationconfig">ValidationConfig</a></em></p>
</blockquote>
<p>Ensures a column only contains values from an allowed list.</p>
<p><strong>When to Use:</strong> Enum-like fields, status columns, categorical data validation.</p>
<p><strong>See Also:</strong> <a href="#contracts-data-quality-gates">Contracts Overview</a></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-71-1" name="__codelineno-71-1" href="#__codelineno-71-1"></a><span class="nt">contracts</span><span class="p">:</span>
<a id="__codelineno-71-2" name="__codelineno-71-2" href="#__codelineno-71-2"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">accepted_values</span>
<a id="__codelineno-71-3" name="__codelineno-71-3" href="#__codelineno-71-3"></a><span class="w">    </span><span class="nt">column</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">status</span>
<a id="__codelineno-71-4" name="__codelineno-71-4" href="#__codelineno-71-4"></a><span class="w">    </span><span class="nt">values</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">pending</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">approved</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">rejected</span><span class="p p-Indicator">]</span>
</code></pre></div>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>type</strong></td>
<td>Literal['accepted_values']</td>
<td>No</td>
<td><code>TestType.ACCEPTED_VALUES</code></td>
<td>-</td>
</tr>
<tr>
<td><strong>name</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Optional name for the check</td>
</tr>
<tr>
<td><strong>on_fail</strong></td>
<td>ContractSeverity</td>
<td>No</td>
<td><code>ContractSeverity.FAIL</code></td>
<td>Action on failure</td>
</tr>
<tr>
<td><strong>column</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>Column to check</td>
</tr>
<tr>
<td><strong>values</strong></td>
<td>List[Any]</td>
<td>Yes</td>
<td>-</td>
<td>Allowed values</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="customsqltest"><code>CustomSQLTest</code><a class="headerlink" href="#customsqltest" title="Permanent link">&para;</a></h3>
<blockquote>
<p><em>Used in: <a href="#nodeconfig">NodeConfig</a>, <a href="#validationconfig">ValidationConfig</a></em></p>
</blockquote>
<p>Runs a custom SQL condition and fails if too many rows violate it.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-72-1" name="__codelineno-72-1" href="#__codelineno-72-1"></a><span class="nt">contracts</span><span class="p">:</span>
<a id="__codelineno-72-2" name="__codelineno-72-2" href="#__codelineno-72-2"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">custom_sql</span>
<a id="__codelineno-72-3" name="__codelineno-72-3" href="#__codelineno-72-3"></a><span class="w">    </span><span class="nt">condition</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;amount</span><span class="nv"> </span><span class="s">&gt;</span><span class="nv"> </span><span class="s">0&quot;</span>
<a id="__codelineno-72-4" name="__codelineno-72-4" href="#__codelineno-72-4"></a><span class="w">    </span><span class="nt">threshold</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.01</span><span class="w">  </span><span class="c1"># Allow up to 1% failures</span>
</code></pre></div>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>type</strong></td>
<td>Literal['custom_sql']</td>
<td>No</td>
<td><code>TestType.CUSTOM_SQL</code></td>
<td>-</td>
</tr>
<tr>
<td><strong>name</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Optional name for the check</td>
</tr>
<tr>
<td><strong>on_fail</strong></td>
<td>ContractSeverity</td>
<td>No</td>
<td><code>ContractSeverity.FAIL</code></td>
<td>Action on failure</td>
</tr>
<tr>
<td><strong>condition</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>SQL condition that should be true for valid rows</td>
</tr>
<tr>
<td><strong>threshold</strong></td>
<td>float</td>
<td>No</td>
<td><code>0.0</code></td>
<td>Failure rate threshold (0.0 = strictly no failures allowed)</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="distributioncontract"><code>DistributionContract</code><a class="headerlink" href="#distributioncontract" title="Permanent link">&para;</a></h3>
<blockquote>
<p><em>Used in: <a href="#nodeconfig">NodeConfig</a>, <a href="#validationconfig">ValidationConfig</a></em></p>
</blockquote>
<p>Checks if a column's statistical distribution is within expected bounds.</p>
<p><strong>When to Use:</strong> Detect data drift, anomaly detection, statistical monitoring.</p>
<p><strong>See Also:</strong> <a href="#contracts-data-quality-gates">Contracts Overview</a></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-73-1" name="__codelineno-73-1" href="#__codelineno-73-1"></a><span class="nt">contracts</span><span class="p">:</span>
<a id="__codelineno-73-2" name="__codelineno-73-2" href="#__codelineno-73-2"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">distribution</span>
<a id="__codelineno-73-3" name="__codelineno-73-3" href="#__codelineno-73-3"></a><span class="w">    </span><span class="nt">column</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">price</span>
<a id="__codelineno-73-4" name="__codelineno-73-4" href="#__codelineno-73-4"></a><span class="w">    </span><span class="nt">metric</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mean</span>
<a id="__codelineno-73-5" name="__codelineno-73-5" href="#__codelineno-73-5"></a><span class="w">    </span><span class="nt">threshold</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&gt;100&quot;</span><span class="w">  </span><span class="c1"># Mean must be &gt; 100</span>
<a id="__codelineno-73-6" name="__codelineno-73-6" href="#__codelineno-73-6"></a><span class="w">    </span><span class="nt">on_fail</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">warn</span>
</code></pre></div>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>type</strong></td>
<td>Literal['distribution']</td>
<td>No</td>
<td><code>TestType.DISTRIBUTION</code></td>
<td>-</td>
</tr>
<tr>
<td><strong>name</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Optional name for the check</td>
</tr>
<tr>
<td><strong>on_fail</strong></td>
<td>ContractSeverity</td>
<td>No</td>
<td><code>ContractSeverity.WARN</code></td>
<td>-</td>
</tr>
<tr>
<td><strong>column</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>Column to analyze</td>
</tr>
<tr>
<td><strong>metric</strong></td>
<td>Literal['mean', 'min', 'max', 'null_percentage']</td>
<td>Yes</td>
<td>-</td>
<td>Statistical metric to check</td>
</tr>
<tr>
<td><strong>threshold</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>Threshold expression (e.g., '&gt;100', '&lt;0.05')</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="freshnesscontract"><code>FreshnessContract</code><a class="headerlink" href="#freshnesscontract" title="Permanent link">&para;</a></h3>
<blockquote>
<p><em>Used in: <a href="#nodeconfig">NodeConfig</a>, <a href="#validationconfig">ValidationConfig</a></em></p>
</blockquote>
<p>Validates that data is not stale by checking a timestamp column.</p>
<p><strong>When to Use:</strong> Source systems that should update regularly, SLA monitoring.</p>
<p><strong>See Also:</strong> <a href="#contracts-data-quality-gates">Contracts Overview</a></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-74-1" name="__codelineno-74-1" href="#__codelineno-74-1"></a><span class="nt">contracts</span><span class="p">:</span>
<a id="__codelineno-74-2" name="__codelineno-74-2" href="#__codelineno-74-2"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">freshness</span>
<a id="__codelineno-74-3" name="__codelineno-74-3" href="#__codelineno-74-3"></a><span class="w">    </span><span class="nt">column</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">updated_at</span>
<a id="__codelineno-74-4" name="__codelineno-74-4" href="#__codelineno-74-4"></a><span class="w">    </span><span class="nt">max_age</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;24h&quot;</span><span class="w">  </span><span class="c1"># Fail if no data newer than 24 hours</span>
</code></pre></div>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>type</strong></td>
<td>Literal['freshness']</td>
<td>No</td>
<td><code>TestType.FRESHNESS</code></td>
<td>-</td>
</tr>
<tr>
<td><strong>name</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Optional name for the check</td>
</tr>
<tr>
<td><strong>on_fail</strong></td>
<td>ContractSeverity</td>
<td>No</td>
<td><code>ContractSeverity.FAIL</code></td>
<td>-</td>
</tr>
<tr>
<td><strong>column</strong></td>
<td>str</td>
<td>No</td>
<td><code>updated_at</code></td>
<td>Timestamp column to check</td>
</tr>
<tr>
<td><strong>max_age</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>Maximum allowed age (e.g., '24h', '7d')</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="notnulltest"><code>NotNullTest</code><a class="headerlink" href="#notnulltest" title="Permanent link">&para;</a></h3>
<blockquote>
<p><em>Used in: <a href="#nodeconfig">NodeConfig</a>, <a href="#validationconfig">ValidationConfig</a></em></p>
</blockquote>
<p>Ensures specified columns contain no NULL values.</p>
<p><strong>When to Use:</strong> Primary keys, required fields, foreign keys that must resolve.</p>
<p><strong>See Also:</strong> <a href="#contracts-data-quality-gates">Contracts Overview</a></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-75-1" name="__codelineno-75-1" href="#__codelineno-75-1"></a><span class="nt">contracts</span><span class="p">:</span>
<a id="__codelineno-75-2" name="__codelineno-75-2" href="#__codelineno-75-2"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">not_null</span>
<a id="__codelineno-75-3" name="__codelineno-75-3" href="#__codelineno-75-3"></a><span class="w">    </span><span class="nt">columns</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">order_id</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">customer_id</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">created_at</span><span class="p p-Indicator">]</span>
</code></pre></div>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>type</strong></td>
<td>Literal['not_null']</td>
<td>No</td>
<td><code>TestType.NOT_NULL</code></td>
<td>-</td>
</tr>
<tr>
<td><strong>name</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Optional name for the check</td>
</tr>
<tr>
<td><strong>on_fail</strong></td>
<td>ContractSeverity</td>
<td>No</td>
<td><code>ContractSeverity.FAIL</code></td>
<td>Action on failure</td>
</tr>
<tr>
<td><strong>columns</strong></td>
<td>List[str]</td>
<td>Yes</td>
<td>-</td>
<td>Columns that must not contain nulls</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="rangetest"><code>RangeTest</code><a class="headerlink" href="#rangetest" title="Permanent link">&para;</a></h3>
<blockquote>
<p><em>Used in: <a href="#nodeconfig">NodeConfig</a>, <a href="#validationconfig">ValidationConfig</a></em></p>
</blockquote>
<p>Ensures column values fall within a specified range.</p>
<p><strong>When to Use:</strong> Numeric bounds validation (ages, prices, quantities), date ranges.</p>
<p><strong>See Also:</strong> <a href="#contracts-data-quality-gates">Contracts Overview</a></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-76-1" name="__codelineno-76-1" href="#__codelineno-76-1"></a><span class="nt">contracts</span><span class="p">:</span>
<a id="__codelineno-76-2" name="__codelineno-76-2" href="#__codelineno-76-2"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">range</span>
<a id="__codelineno-76-3" name="__codelineno-76-3" href="#__codelineno-76-3"></a><span class="w">    </span><span class="nt">column</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">age</span>
<a id="__codelineno-76-4" name="__codelineno-76-4" href="#__codelineno-76-4"></a><span class="w">    </span><span class="nt">min</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<a id="__codelineno-76-5" name="__codelineno-76-5" href="#__codelineno-76-5"></a><span class="w">    </span><span class="nt">max</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">150</span>
</code></pre></div>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>type</strong></td>
<td>Literal['range']</td>
<td>No</td>
<td><code>TestType.RANGE</code></td>
<td>-</td>
</tr>
<tr>
<td><strong>name</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Optional name for the check</td>
</tr>
<tr>
<td><strong>on_fail</strong></td>
<td>ContractSeverity</td>
<td>No</td>
<td><code>ContractSeverity.FAIL</code></td>
<td>Action on failure</td>
</tr>
<tr>
<td><strong>column</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>Column to check</td>
</tr>
<tr>
<td><strong>min</strong></td>
<td>int | float | str</td>
<td>No</td>
<td>-</td>
<td>Minimum value (inclusive)</td>
</tr>
<tr>
<td><strong>max</strong></td>
<td>int | float | str</td>
<td>No</td>
<td>-</td>
<td>Maximum value (inclusive)</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="regexmatchtest"><code>RegexMatchTest</code><a class="headerlink" href="#regexmatchtest" title="Permanent link">&para;</a></h3>
<blockquote>
<p><em>Used in: <a href="#nodeconfig">NodeConfig</a>, <a href="#validationconfig">ValidationConfig</a></em></p>
</blockquote>
<p>Ensures column values match a regex pattern.</p>
<p><strong>When to Use:</strong> Format validation (emails, phone numbers, IDs, codes).</p>
<p><strong>See Also:</strong> <a href="#contracts-data-quality-gates">Contracts Overview</a></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-77-1" name="__codelineno-77-1" href="#__codelineno-77-1"></a><span class="nt">contracts</span><span class="p">:</span>
<a id="__codelineno-77-2" name="__codelineno-77-2" href="#__codelineno-77-2"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">regex_match</span>
<a id="__codelineno-77-3" name="__codelineno-77-3" href="#__codelineno-77-3"></a><span class="w">    </span><span class="nt">column</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">email</span>
<a id="__codelineno-77-4" name="__codelineno-77-4" href="#__codelineno-77-4"></a><span class="w">    </span><span class="nt">pattern</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+</span><span class="err">\</span><span class="s">.[a-zA-Z0-9-.]+$&quot;</span>
</code></pre></div>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>type</strong></td>
<td>Literal['regex_match']</td>
<td>No</td>
<td><code>TestType.REGEX_MATCH</code></td>
<td>-</td>
</tr>
<tr>
<td><strong>name</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Optional name for the check</td>
</tr>
<tr>
<td><strong>on_fail</strong></td>
<td>ContractSeverity</td>
<td>No</td>
<td><code>ContractSeverity.FAIL</code></td>
<td>Action on failure</td>
</tr>
<tr>
<td><strong>column</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>Column to check</td>
</tr>
<tr>
<td><strong>pattern</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>Regex pattern to match</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="rowcounttest"><code>RowCountTest</code><a class="headerlink" href="#rowcounttest" title="Permanent link">&para;</a></h3>
<blockquote>
<p><em>Used in: <a href="#nodeconfig">NodeConfig</a>, <a href="#validationconfig">ValidationConfig</a></em></p>
</blockquote>
<p>Validates that row count falls within expected bounds.</p>
<p><strong>When to Use:</strong> Ensure minimum data completeness, detect truncated loads, cap batch sizes.</p>
<p><strong>See Also:</strong> <a href="#contracts-data-quality-gates">Contracts Overview</a>, <a href="#gateconfig">GateConfig</a></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-78-1" name="__codelineno-78-1" href="#__codelineno-78-1"></a><span class="nt">contracts</span><span class="p">:</span>
<a id="__codelineno-78-2" name="__codelineno-78-2" href="#__codelineno-78-2"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">row_count</span>
<a id="__codelineno-78-3" name="__codelineno-78-3" href="#__codelineno-78-3"></a><span class="w">    </span><span class="nt">min</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1000</span>
<a id="__codelineno-78-4" name="__codelineno-78-4" href="#__codelineno-78-4"></a><span class="w">    </span><span class="nt">max</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100000</span>
</code></pre></div>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>type</strong></td>
<td>Literal['row_count']</td>
<td>No</td>
<td><code>TestType.ROW_COUNT</code></td>
<td>-</td>
</tr>
<tr>
<td><strong>name</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Optional name for the check</td>
</tr>
<tr>
<td><strong>on_fail</strong></td>
<td>ContractSeverity</td>
<td>No</td>
<td><code>ContractSeverity.FAIL</code></td>
<td>Action on failure</td>
</tr>
<tr>
<td><strong>min</strong></td>
<td>Optional[int]</td>
<td>No</td>
<td>-</td>
<td>Minimum row count</td>
</tr>
<tr>
<td><strong>max</strong></td>
<td>Optional[int]</td>
<td>No</td>
<td>-</td>
<td>Maximum row count</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="schemacontract"><code>SchemaContract</code><a class="headerlink" href="#schemacontract" title="Permanent link">&para;</a></h3>
<blockquote>
<p><em>Used in: <a href="#nodeconfig">NodeConfig</a>, <a href="#validationconfig">ValidationConfig</a></em></p>
</blockquote>
<p>Validates that the DataFrame schema matches expected columns.</p>
<p><strong>When to Use:</strong> Enforce schema stability, detect upstream schema drift, ensure column presence.</p>
<p><strong>See Also:</strong> <a href="#contracts-data-quality-gates">Contracts Overview</a>, <a href="#schemapolicyconfig">SchemaPolicyConfig</a></p>
<p>Uses the <code>columns</code> metadata from NodeConfig to verify schema.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-79-1" name="__codelineno-79-1" href="#__codelineno-79-1"></a><span class="nt">contracts</span><span class="p">:</span>
<a id="__codelineno-79-2" name="__codelineno-79-2" href="#__codelineno-79-2"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">schema</span>
<a id="__codelineno-79-3" name="__codelineno-79-3" href="#__codelineno-79-3"></a><span class="w">    </span><span class="nt">strict</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w">  </span><span class="c1"># Fail if extra columns present</span>
</code></pre></div>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>type</strong></td>
<td>Literal['schema']</td>
<td>No</td>
<td><code>TestType.SCHEMA</code></td>
<td>-</td>
</tr>
<tr>
<td><strong>name</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Optional name for the check</td>
</tr>
<tr>
<td><strong>on_fail</strong></td>
<td>ContractSeverity</td>
<td>No</td>
<td><code>ContractSeverity.FAIL</code></td>
<td>-</td>
</tr>
<tr>
<td><strong>strict</strong></td>
<td>bool</td>
<td>No</td>
<td><code>True</code></td>
<td>If true, fail on unexpected columns</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="uniquetest"><code>UniqueTest</code><a class="headerlink" href="#uniquetest" title="Permanent link">&para;</a></h3>
<blockquote>
<p><em>Used in: <a href="#nodeconfig">NodeConfig</a>, <a href="#validationconfig">ValidationConfig</a></em></p>
</blockquote>
<p>Ensures specified columns (or combination) contain unique values.</p>
<p><strong>When to Use:</strong> Primary keys, natural keys, deduplication verification.</p>
<p><strong>See Also:</strong> <a href="#contracts-data-quality-gates">Contracts Overview</a></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-80-1" name="__codelineno-80-1" href="#__codelineno-80-1"></a><span class="nt">contracts</span><span class="p">:</span>
<a id="__codelineno-80-2" name="__codelineno-80-2" href="#__codelineno-80-2"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">unique</span>
<a id="__codelineno-80-3" name="__codelineno-80-3" href="#__codelineno-80-3"></a><span class="w">    </span><span class="nt">columns</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">order_id</span><span class="p p-Indicator">]</span><span class="w">  </span><span class="c1"># Single column</span>
<a id="__codelineno-80-4" name="__codelineno-80-4" href="#__codelineno-80-4"></a><span class="w">  </span><span class="c1"># OR composite key:</span>
<a id="__codelineno-80-5" name="__codelineno-80-5" href="#__codelineno-80-5"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">unique</span>
<a id="__codelineno-80-6" name="__codelineno-80-6" href="#__codelineno-80-6"></a><span class="w">    </span><span class="nt">columns</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">customer_id</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">order_date</span><span class="p p-Indicator">]</span><span class="w">  </span><span class="c1"># Composite uniqueness</span>
</code></pre></div>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>type</strong></td>
<td>Literal['unique']</td>
<td>No</td>
<td><code>TestType.UNIQUE</code></td>
<td>-</td>
</tr>
<tr>
<td><strong>name</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Optional name for the check</td>
</tr>
<tr>
<td><strong>on_fail</strong></td>
<td>ContractSeverity</td>
<td>No</td>
<td><code>ContractSeverity.FAIL</code></td>
<td>Action on failure</td>
</tr>
<tr>
<td><strong>columns</strong></td>
<td>List[str]</td>
<td>Yes</td>
<td>-</td>
<td>Columns that must be unique (composite key if multiple)</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="volumedroptest"><code>VolumeDropTest</code><a class="headerlink" href="#volumedroptest" title="Permanent link">&para;</a></h3>
<blockquote>
<p><em>Used in: <a href="#nodeconfig">NodeConfig</a>, <a href="#validationconfig">ValidationConfig</a></em></p>
</blockquote>
<p>Checks if row count dropped significantly compared to history.</p>
<p><strong>When to Use:</strong> Detect source outages, partial loads, or data pipeline issues.</p>
<p><strong>See Also:</strong> <a href="#contracts-data-quality-gates">Contracts Overview</a>, <a href="#rowcounttest">RowCountTest</a></p>
<p>Formula: <code>(current - avg) / avg &lt; -threshold</code></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-81-1" name="__codelineno-81-1" href="#__codelineno-81-1"></a><span class="nt">contracts</span><span class="p">:</span>
<a id="__codelineno-81-2" name="__codelineno-81-2" href="#__codelineno-81-2"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">volume_drop</span>
<a id="__codelineno-81-3" name="__codelineno-81-3" href="#__codelineno-81-3"></a><span class="w">    </span><span class="nt">threshold</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.5</span><span class="w">  </span><span class="c1"># Fail if &gt; 50% drop from 7-day average</span>
<a id="__codelineno-81-4" name="__codelineno-81-4" href="#__codelineno-81-4"></a><span class="w">    </span><span class="nt">lookback_days</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">7</span>
</code></pre></div>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>type</strong></td>
<td>Literal['volume_drop']</td>
<td>No</td>
<td><code>TestType.VOLUME_DROP</code></td>
<td>-</td>
</tr>
<tr>
<td><strong>name</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Optional name for the check</td>
</tr>
<tr>
<td><strong>on_fail</strong></td>
<td>ContractSeverity</td>
<td>No</td>
<td><code>ContractSeverity.FAIL</code></td>
<td>Action on failure</td>
</tr>
<tr>
<td><strong>threshold</strong></td>
<td>float</td>
<td>No</td>
<td><code>0.5</code></td>
<td>Max allowed drop (0.5 = 50% drop)</td>
</tr>
<tr>
<td><strong>lookback_days</strong></td>
<td>int</td>
<td>No</td>
<td><code>7</code></td>
<td>Days of history to average</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="global-settings">Global Settings<a class="headerlink" href="#global-settings" title="Permanent link">&para;</a></h2>
<h3 id="lineageconfig"><code>LineageConfig</code><a class="headerlink" href="#lineageconfig" title="Permanent link">&para;</a></h3>
<blockquote>
<p><em>Used in: <a href="#projectconfig">ProjectConfig</a></em></p>
</blockquote>
<p>Configuration for OpenLineage integration.</p>
<p>Example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-82-1" name="__codelineno-82-1" href="#__codelineno-82-1"></a><span class="nt">lineage</span><span class="p">:</span>
<a id="__codelineno-82-2" name="__codelineno-82-2" href="#__codelineno-82-2"></a><span class="w">  </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://localhost:5000&quot;</span>
<a id="__codelineno-82-3" name="__codelineno-82-3" href="#__codelineno-82-3"></a><span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;my_project&quot;</span>
</code></pre></div></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>url</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>OpenLineage API URL</td>
</tr>
<tr>
<td><strong>namespace</strong></td>
<td>str</td>
<td>No</td>
<td><code>odibi</code></td>
<td>Namespace for jobs</td>
</tr>
<tr>
<td><strong>api_key</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>API Key</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="alertconfig"><code>AlertConfig</code><a class="headerlink" href="#alertconfig" title="Permanent link">&para;</a></h3>
<blockquote>
<p><em>Used in: <a href="#projectconfig">ProjectConfig</a></em></p>
</blockquote>
<p>Configuration for alerts with throttling support.</p>
<p>Supports Slack, Teams, and generic webhooks with event-specific payloads.</p>
<p><strong>Available Events:</strong>
- <code>on_start</code> - Pipeline started
- <code>on_success</code> - Pipeline completed successfully
- <code>on_failure</code> - Pipeline failed
- <code>on_quarantine</code> - Rows were quarantined
- <code>on_gate_block</code> - Quality gate blocked the pipeline
- <code>on_threshold_breach</code> - A threshold was exceeded</p>
<p>Example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-83-1" name="__codelineno-83-1" href="#__codelineno-83-1"></a><span class="nt">alerts</span><span class="p">:</span>
<a id="__codelineno-83-2" name="__codelineno-83-2" href="#__codelineno-83-2"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">slack</span>
<a id="__codelineno-83-3" name="__codelineno-83-3" href="#__codelineno-83-3"></a><span class="w">    </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;${SLACK_WEBHOOK_URL}&quot;</span>
<a id="__codelineno-83-4" name="__codelineno-83-4" href="#__codelineno-83-4"></a><span class="w">    </span><span class="nt">on_events</span><span class="p">:</span>
<a id="__codelineno-83-5" name="__codelineno-83-5" href="#__codelineno-83-5"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">on_failure</span>
<a id="__codelineno-83-6" name="__codelineno-83-6" href="#__codelineno-83-6"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">on_quarantine</span>
<a id="__codelineno-83-7" name="__codelineno-83-7" href="#__codelineno-83-7"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">on_gate_block</span>
<a id="__codelineno-83-8" name="__codelineno-83-8" href="#__codelineno-83-8"></a><span class="w">    </span><span class="nt">metadata</span><span class="p">:</span>
<a id="__codelineno-83-9" name="__codelineno-83-9" href="#__codelineno-83-9"></a><span class="w">      </span><span class="nt">throttle_minutes</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">15</span>
<a id="__codelineno-83-10" name="__codelineno-83-10" href="#__codelineno-83-10"></a><span class="w">      </span><span class="nt">max_per_hour</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
<a id="__codelineno-83-11" name="__codelineno-83-11" href="#__codelineno-83-11"></a><span class="w">      </span><span class="nt">channel</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;#data-alerts&quot;</span>
</code></pre></div></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>type</strong></td>
<td>AlertType</td>
<td>Yes</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td><strong>url</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>Webhook URL</td>
</tr>
<tr>
<td><strong>on_events</strong></td>
<td>List[AlertEvent]</td>
<td>No</td>
<td><code>[&lt;AlertEvent.ON_FAILURE: 'on_failure'&gt;]</code></td>
<td>Events to trigger alert: on_start, on_success, on_failure, on_quarantine, on_gate_block, on_threshold_breach</td>
</tr>
<tr>
<td><strong>metadata</strong></td>
<td>Dict[str, Any]</td>
<td>No</td>
<td><code>PydanticUndefined</code></td>
<td>Extra metadata: throttle_minutes, max_per_hour, channel, etc.</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="loggingconfig"><code>LoggingConfig</code><a class="headerlink" href="#loggingconfig" title="Permanent link">&para;</a></h3>
<blockquote>
<p><em>Used in: <a href="#projectconfig">ProjectConfig</a></em></p>
</blockquote>
<p>Logging configuration.</p>
<p>Example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-84-1" name="__codelineno-84-1" href="#__codelineno-84-1"></a><span class="nt">logging</span><span class="p">:</span>
<a id="__codelineno-84-2" name="__codelineno-84-2" href="#__codelineno-84-2"></a><span class="w">  </span><span class="nt">level</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;INFO&quot;</span>
<a id="__codelineno-84-3" name="__codelineno-84-3" href="#__codelineno-84-3"></a><span class="w">  </span><span class="nt">structured</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>level</strong></td>
<td>LogLevel</td>
<td>No</td>
<td><code>LogLevel.INFO</code></td>
<td>-</td>
</tr>
<tr>
<td><strong>structured</strong></td>
<td>bool</td>
<td>No</td>
<td><code>False</code></td>
<td>Output JSON logs</td>
</tr>
<tr>
<td><strong>metadata</strong></td>
<td>Dict[str, Any]</td>
<td>No</td>
<td><code>PydanticUndefined</code></td>
<td>Extra metadata in logs</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="performanceconfig"><code>PerformanceConfig</code><a class="headerlink" href="#performanceconfig" title="Permanent link">&para;</a></h3>
<blockquote>
<p><em>Used in: <a href="#projectconfig">ProjectConfig</a></em></p>
</blockquote>
<p>Performance tuning configuration.</p>
<p>Example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-85-1" name="__codelineno-85-1" href="#__codelineno-85-1"></a><span class="nt">performance</span><span class="p">:</span>
<a id="__codelineno-85-2" name="__codelineno-85-2" href="#__codelineno-85-2"></a><span class="w">  </span><span class="nt">use_arrow</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id="__codelineno-85-3" name="__codelineno-85-3" href="#__codelineno-85-3"></a><span class="w">  </span><span class="nt">spark_config</span><span class="p">:</span>
<a id="__codelineno-85-4" name="__codelineno-85-4" href="#__codelineno-85-4"></a><span class="w">    </span><span class="s">&quot;spark.sql.shuffle.partitions&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;200&quot;</span>
<a id="__codelineno-85-5" name="__codelineno-85-5" href="#__codelineno-85-5"></a><span class="w">    </span><span class="s">&quot;spark.sql.adaptive.enabled&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span>
<a id="__codelineno-85-6" name="__codelineno-85-6" href="#__codelineno-85-6"></a><span class="w">    </span><span class="s">&quot;spark.databricks.delta.optimizeWrite.enabled&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span>
<a id="__codelineno-85-7" name="__codelineno-85-7" href="#__codelineno-85-7"></a><span class="w">  </span><span class="nt">delta_table_properties</span><span class="p">:</span>
<a id="__codelineno-85-8" name="__codelineno-85-8" href="#__codelineno-85-8"></a><span class="w">    </span><span class="s">&quot;delta.columnMapping.mode&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;name&quot;</span>
</code></pre></div></p>
<p><strong>Spark Config Notes:</strong>
- Configs are applied via <code>spark.conf.set()</code> at runtime
- For existing sessions (e.g., Databricks), only runtime-settable configs will take effect
- Session-level configs (e.g., <code>spark.executor.memory</code>) require session restart
- Common runtime-safe configs: shuffle partitions, adaptive query execution, Delta optimizations</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>use_arrow</strong></td>
<td>bool</td>
<td>No</td>
<td><code>True</code></td>
<td>Use Apache Arrow-backed DataFrames (Pandas only). Reduces memory and speeds up I/O.</td>
</tr>
<tr>
<td><strong>spark_config</strong></td>
<td>Dict[str, str]</td>
<td>No</td>
<td><code>PydanticUndefined</code></td>
<td>Spark configuration settings applied at runtime via spark.conf.set(). Example: {'spark.sql.shuffle.partitions': '200', 'spark.sql.adaptive.enabled': 'true'}. Note: Some configs require session restart and cannot be set at runtime.</td>
</tr>
<tr>
<td><strong>delta_table_properties</strong></td>
<td>Dict[str, str]</td>
<td>No</td>
<td><code>PydanticUndefined</code></td>
<td>Default table properties applied to all Delta writes. Example: {'delta.columnMapping.mode': 'name'} to allow special characters in column names.</td>
</tr>
<tr>
<td><strong>skip_null_profiling</strong></td>
<td>bool</td>
<td>No</td>
<td><code>False</code></td>
<td>Skip null profiling in metadata collection phase. Reduces execution time for large DataFrames by avoiding an additional Spark job.</td>
</tr>
<tr>
<td><strong>skip_catalog_writes</strong></td>
<td>bool</td>
<td>No</td>
<td><code>False</code></td>
<td>Skip catalog metadata writes (register_asset, track_schema, log_pattern, record_lineage) after each node write. Significantly improves performance for high-throughput pipelines like Bronze layer ingestion. Set to true when catalog tracking is not needed.</td>
</tr>
<tr>
<td><strong>skip_run_logging</strong></td>
<td>bool</td>
<td>No</td>
<td><code>False</code></td>
<td>Skip batch catalog writes at pipeline end (log_runs_batch, register_outputs_batch). Saves 10-20s per pipeline run. Enable when you don't need run history in the catalog. Stories are still generated and contain full execution details.</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="retryconfig"><code>RetryConfig</code><a class="headerlink" href="#retryconfig" title="Permanent link">&para;</a></h3>
<blockquote>
<p><em>Used in: <a href="#projectconfig">ProjectConfig</a></em></p>
</blockquote>
<p>Retry configuration for transient failures.</p>
<p>Automatically retries failed operations (database timeouts, network issues, rate limits)
with configurable backoff strategy.</p>
<p>Example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-86-1" name="__codelineno-86-1" href="#__codelineno-86-1"></a><span class="nt">retry</span><span class="p">:</span>
<a id="__codelineno-86-2" name="__codelineno-86-2" href="#__codelineno-86-2"></a><span class="w">  </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id="__codelineno-86-3" name="__codelineno-86-3" href="#__codelineno-86-3"></a><span class="w">  </span><span class="nt">max_attempts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<a id="__codelineno-86-4" name="__codelineno-86-4" href="#__codelineno-86-4"></a><span class="w">  </span><span class="nt">backoff</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;exponential&quot;</span>
</code></pre></div></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>enabled</strong></td>
<td>bool</td>
<td>No</td>
<td><code>True</code></td>
<td>Enable automatic retry on transient failures (timeouts, connection errors)</td>
</tr>
<tr>
<td><strong>max_attempts</strong></td>
<td>int</td>
<td>No</td>
<td><code>3</code></td>
<td>Maximum number of retry attempts before failing. Total attempts = 1 + max_attempts.</td>
</tr>
<tr>
<td><strong>backoff</strong></td>
<td>BackoffStrategy</td>
<td>No</td>
<td><code>BackoffStrategy.EXPONENTIAL</code></td>
<td>Wait strategy between retries. 'exponential' (2^n seconds, recommended), 'linear' (n seconds), or 'constant' (fixed 1 second).</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="storyconfig"><code>StoryConfig</code><a class="headerlink" href="#storyconfig" title="Permanent link">&para;</a></h3>
<blockquote>
<p><em>Used in: <a href="#projectconfig">ProjectConfig</a></em></p>
</blockquote>
<p>Story generation configuration.</p>
<p>Stories are ODIBI's core value - execution reports with lineage.
They must use a connection for consistent, traceable output.</p>
<p>Example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-87-1" name="__codelineno-87-1" href="#__codelineno-87-1"></a><span class="nt">story</span><span class="p">:</span>
<a id="__codelineno-87-2" name="__codelineno-87-2" href="#__codelineno-87-2"></a><span class="w">  </span><span class="nt">connection</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;local_data&quot;</span>
<a id="__codelineno-87-3" name="__codelineno-87-3" href="#__codelineno-87-3"></a><span class="w">  </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;stories/&quot;</span>
<a id="__codelineno-87-4" name="__codelineno-87-4" href="#__codelineno-87-4"></a><span class="w">  </span><span class="nt">retention_days</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30</span>
<a id="__codelineno-87-5" name="__codelineno-87-5" href="#__codelineno-87-5"></a><span class="w">  </span><span class="nt">failure_sample_size</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span>
<a id="__codelineno-87-6" name="__codelineno-87-6" href="#__codelineno-87-6"></a><span class="w">  </span><span class="nt">max_failure_samples</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">500</span>
<a id="__codelineno-87-7" name="__codelineno-87-7" href="#__codelineno-87-7"></a><span class="w">  </span><span class="nt">max_sampled_validations</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
</code></pre></div></p>
<p><strong>Failure Sample Settings:</strong>
- <code>failure_sample_size</code>: Number of failed rows to capture per validation (default: 100)
- <code>max_failure_samples</code>: Total failed rows across all validations (default: 500)
- <code>max_sampled_validations</code>: After this many validations, show only counts (default: 5)</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>connection</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>Connection name for story output (uses connection's path resolution)</td>
</tr>
<tr>
<td><strong>path</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>Path for stories (relative to connection base_path)</td>
</tr>
<tr>
<td><strong>max_sample_rows</strong></td>
<td>int</td>
<td>No</td>
<td><code>10</code></td>
<td>Maximum rows to include in data samples within story reports. Higher values give more debugging context but increase file size. Set to 0 to disable data sampling.</td>
</tr>
<tr>
<td><strong>auto_generate</strong></td>
<td>bool</td>
<td>No</td>
<td><code>True</code></td>
<td>-</td>
</tr>
<tr>
<td><strong>retention_days</strong></td>
<td>Optional[int]</td>
<td>No</td>
<td><code>30</code></td>
<td>Days to keep stories</td>
</tr>
<tr>
<td><strong>retention_count</strong></td>
<td>Optional[int]</td>
<td>No</td>
<td><code>100</code></td>
<td>Max number of stories to keep</td>
</tr>
<tr>
<td><strong>failure_sample_size</strong></td>
<td>int</td>
<td>No</td>
<td><code>100</code></td>
<td>Number of failed rows to capture per validation rule</td>
</tr>
<tr>
<td><strong>max_failure_samples</strong></td>
<td>int</td>
<td>No</td>
<td><code>500</code></td>
<td>Maximum total failed rows across all validations</td>
</tr>
<tr>
<td><strong>max_sampled_validations</strong></td>
<td>int</td>
<td>No</td>
<td><code>5</code></td>
<td>After this many validations, show only counts (no samples)</td>
</tr>
<tr>
<td><strong>async_generation</strong></td>
<td>bool</td>
<td>No</td>
<td><code>False</code></td>
<td>Generate stories asynchronously (fire-and-forget). Pipeline returns immediately while story writes in background. Improves multi-pipeline performance by ~5-10s per pipeline.</td>
</tr>
<tr>
<td><strong>generate_lineage</strong></td>
<td>bool</td>
<td>No</td>
<td><code>True</code></td>
<td>Generate combined lineage graph from all stories. Creates a unified view of data flow across pipelines.</td>
</tr>
<tr>
<td><strong>docs</strong></td>
<td>Optional[ForwardRef('<a href="#docsconfig">DocsConfig</a>')]</td>
<td>No</td>
<td>-</td>
<td>Documentation generation settings. Generates README.md, TECHNICAL_DETAILS.md, NODE_CARDS/*.md from Story data.</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="transformation-reference">Transformation Reference<a class="headerlink" href="#transformation-reference" title="Permanent link">&para;</a></h2>
<h3 id="how-to-use-transformers">How to Use Transformers<a class="headerlink" href="#how-to-use-transformers" title="Permanent link">&para;</a></h3>
<p>You can use any transformer in two ways:</p>
<p><strong>1. As a Top-Level Transformer ("The App")</strong>
Use this for major operations that define the node's purpose (e.g. Merge, SCD2).
<div class="highlight"><pre><span></span><code><a id="__codelineno-88-1" name="__codelineno-88-1" href="#__codelineno-88-1"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;my_node&quot;</span>
<a id="__codelineno-88-2" name="__codelineno-88-2" href="#__codelineno-88-2"></a><span class="w">  </span><span class="nt">transformer</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&lt;transformer_name&gt;&quot;</span>
<a id="__codelineno-88-3" name="__codelineno-88-3" href="#__codelineno-88-3"></a><span class="w">  </span><span class="nt">params</span><span class="p">:</span>
<a id="__codelineno-88-4" name="__codelineno-88-4" href="#__codelineno-88-4"></a><span class="w">    </span><span class="nt">&lt;param_name&gt;</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;value&gt;</span>
</code></pre></div></p>
<p><strong>2. As a Step in a Chain ("The Script")</strong>
Use this for smaller operations within a <code>transform</code> block (e.g. clean_text, filter).
<div class="highlight"><pre><span></span><code><a id="__codelineno-89-1" name="__codelineno-89-1" href="#__codelineno-89-1"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;my_node&quot;</span>
<a id="__codelineno-89-2" name="__codelineno-89-2" href="#__codelineno-89-2"></a><span class="w">  </span><span class="nt">transform</span><span class="p">:</span>
<a id="__codelineno-89-3" name="__codelineno-89-3" href="#__codelineno-89-3"></a><span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
<a id="__codelineno-89-4" name="__codelineno-89-4" href="#__codelineno-89-4"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">function</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&lt;transformer_name&gt;&quot;</span>
<a id="__codelineno-89-5" name="__codelineno-89-5" href="#__codelineno-89-5"></a><span class="w">         </span><span class="nt">params</span><span class="p">:</span>
<a id="__codelineno-89-6" name="__codelineno-89-6" href="#__codelineno-89-6"></a><span class="w">           </span><span class="nt">&lt;param_name&gt;</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;value&gt;</span>
</code></pre></div></p>
<p><strong>Available Transformers:</strong>
The models below describe the <code>params</code> required for each transformer.</p>
<hr />
<h3 id="common-operations">📂 Common Operations<a class="headerlink" href="#common-operations" title="Permanent link">&para;</a></h3>
<h4 id="casewhencase">CaseWhenCase<a class="headerlink" href="#casewhencase" title="Permanent link">&para;</a></h4>
<p><a href="#nodeconfig">Back to Catalog</a></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>condition</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td><strong>value</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>-</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="addprefixparams"><code>add_prefix</code> (AddPrefixParams)<a class="headerlink" href="#addprefixparams" title="Permanent link">&para;</a></h4>
<p>Adds a prefix to column names.</p>
<p>Configuration for adding a prefix to column names.</p>
<p>Example - All columns:
<div class="highlight"><pre><span></span><code><a id="__codelineno-90-1" name="__codelineno-90-1" href="#__codelineno-90-1"></a><span class="nt">add_prefix</span><span class="p">:</span>
<a id="__codelineno-90-2" name="__codelineno-90-2" href="#__codelineno-90-2"></a><span class="w">  </span><span class="nt">prefix</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;src_&quot;</span>
</code></pre></div></p>
<p>Example - Specific columns:
<div class="highlight"><pre><span></span><code><a id="__codelineno-91-1" name="__codelineno-91-1" href="#__codelineno-91-1"></a><span class="nt">add_prefix</span><span class="p">:</span>
<a id="__codelineno-91-2" name="__codelineno-91-2" href="#__codelineno-91-2"></a><span class="w">  </span><span class="nt">prefix</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;raw_&quot;</span>
<a id="__codelineno-91-3" name="__codelineno-91-3" href="#__codelineno-91-3"></a><span class="w">  </span><span class="nt">columns</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;id&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;name&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;value&quot;</span><span class="p p-Indicator">]</span>
</code></pre></div></p>
<p><a href="#nodeconfig">Back to Catalog</a></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>prefix</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>Prefix to add to column names</td>
</tr>
<tr>
<td><strong>columns</strong></td>
<td>Optional[List[str]]</td>
<td>No</td>
<td>-</td>
<td>Columns to prefix (default: all columns)</td>
</tr>
<tr>
<td><strong>exclude</strong></td>
<td>Optional[List[str]]</td>
<td>No</td>
<td>-</td>
<td>Columns to exclude from prefixing</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="addsuffixparams"><code>add_suffix</code> (AddSuffixParams)<a class="headerlink" href="#addsuffixparams" title="Permanent link">&para;</a></h4>
<p>Adds a suffix to column names.</p>
<p>Configuration for adding a suffix to column names.</p>
<p>Example - All columns:
<div class="highlight"><pre><span></span><code><a id="__codelineno-92-1" name="__codelineno-92-1" href="#__codelineno-92-1"></a><span class="nt">add_suffix</span><span class="p">:</span>
<a id="__codelineno-92-2" name="__codelineno-92-2" href="#__codelineno-92-2"></a><span class="w">  </span><span class="nt">suffix</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;_raw&quot;</span>
</code></pre></div></p>
<p>Example - Specific columns:
<div class="highlight"><pre><span></span><code><a id="__codelineno-93-1" name="__codelineno-93-1" href="#__codelineno-93-1"></a><span class="nt">add_suffix</span><span class="p">:</span>
<a id="__codelineno-93-2" name="__codelineno-93-2" href="#__codelineno-93-2"></a><span class="w">  </span><span class="nt">suffix</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;_v2&quot;</span>
<a id="__codelineno-93-3" name="__codelineno-93-3" href="#__codelineno-93-3"></a><span class="w">  </span><span class="nt">columns</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;id&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;name&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;value&quot;</span><span class="p p-Indicator">]</span>
</code></pre></div></p>
<p><a href="#nodeconfig">Back to Catalog</a></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>suffix</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>Suffix to add to column names</td>
</tr>
<tr>
<td><strong>columns</strong></td>
<td>Optional[List[str]]</td>
<td>No</td>
<td>-</td>
<td>Columns to suffix (default: all columns)</td>
</tr>
<tr>
<td><strong>exclude</strong></td>
<td>Optional[List[str]]</td>
<td>No</td>
<td>-</td>
<td>Columns to exclude from suffixing</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="casewhenparams"><code>case_when</code> (CaseWhenParams)<a class="headerlink" href="#casewhenparams" title="Permanent link">&para;</a></h4>
<p>Implements structured CASE WHEN logic.</p>
<p>Configuration for conditional logic.</p>
<p>Example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-94-1" name="__codelineno-94-1" href="#__codelineno-94-1"></a><span class="nt">case_when</span><span class="p">:</span>
<a id="__codelineno-94-2" name="__codelineno-94-2" href="#__codelineno-94-2"></a><span class="w">  </span><span class="nt">output_col</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;age_group&quot;</span>
<a id="__codelineno-94-3" name="__codelineno-94-3" href="#__codelineno-94-3"></a><span class="w">  </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&#39;Adult&#39;&quot;</span>
<a id="__codelineno-94-4" name="__codelineno-94-4" href="#__codelineno-94-4"></a><span class="w">  </span><span class="nt">cases</span><span class="p">:</span>
<a id="__codelineno-94-5" name="__codelineno-94-5" href="#__codelineno-94-5"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">condition</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;age</span><span class="nv"> </span><span class="s">&lt;</span><span class="nv"> </span><span class="s">18&quot;</span>
<a id="__codelineno-94-6" name="__codelineno-94-6" href="#__codelineno-94-6"></a><span class="w">      </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&#39;Minor&#39;&quot;</span>
<a id="__codelineno-94-7" name="__codelineno-94-7" href="#__codelineno-94-7"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">condition</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;age</span><span class="nv"> </span><span class="s">&gt;</span><span class="nv"> </span><span class="s">65&quot;</span>
<a id="__codelineno-94-8" name="__codelineno-94-8" href="#__codelineno-94-8"></a><span class="w">      </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&#39;Senior&#39;&quot;</span>
</code></pre></div></p>
<p><a href="#nodeconfig">Back to Catalog</a></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>cases</strong></td>
<td>List[<a href="#casewhencase">CaseWhenCase</a>]</td>
<td>Yes</td>
<td>-</td>
<td>List of conditional branches</td>
</tr>
<tr>
<td><strong>default</strong></td>
<td>str</td>
<td>No</td>
<td><code>NULL</code></td>
<td>Default value if no condition met</td>
</tr>
<tr>
<td><strong>output_col</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>Name of the resulting column</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="castcolumnsparams"><code>cast_columns</code> (CastColumnsParams)<a class="headerlink" href="#castcolumnsparams" title="Permanent link">&para;</a></h4>
<p>Casts specific columns to new types while keeping others intact.</p>
<p>Configuration for column type casting.</p>
<p>Example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-95-1" name="__codelineno-95-1" href="#__codelineno-95-1"></a><span class="nt">cast_columns</span><span class="p">:</span>
<a id="__codelineno-95-2" name="__codelineno-95-2" href="#__codelineno-95-2"></a><span class="w">  </span><span class="nt">casts</span><span class="p">:</span>
<a id="__codelineno-95-3" name="__codelineno-95-3" href="#__codelineno-95-3"></a><span class="w">    </span><span class="nt">age</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;int&quot;</span>
<a id="__codelineno-95-4" name="__codelineno-95-4" href="#__codelineno-95-4"></a><span class="w">    </span><span class="nt">salary</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;DOUBLE&quot;</span>
<a id="__codelineno-95-5" name="__codelineno-95-5" href="#__codelineno-95-5"></a><span class="w">    </span><span class="nt">created_at</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;TIMESTAMP&quot;</span>
<a id="__codelineno-95-6" name="__codelineno-95-6" href="#__codelineno-95-6"></a><span class="w">    </span><span class="nt">tags</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ARRAY&lt;STRING&gt;&quot;</span><span class="w">  </span><span class="c1"># Raw SQL types allowed</span>
</code></pre></div></p>
<p><a href="#nodeconfig">Back to Catalog</a></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>casts</strong></td>
<td>Dict[str, SimpleType | str]</td>
<td>Yes</td>
<td>-</td>
<td>Map of column to target SQL type</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="cleantextparams"><code>clean_text</code> (CleanTextParams)<a class="headerlink" href="#cleantextparams" title="Permanent link">&para;</a></h4>
<p>Applies string cleaning operations (Trim/Case) via SQL.</p>
<p>Configuration for text cleaning.</p>
<p>Example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-96-1" name="__codelineno-96-1" href="#__codelineno-96-1"></a><span class="nt">clean_text</span><span class="p">:</span>
<a id="__codelineno-96-2" name="__codelineno-96-2" href="#__codelineno-96-2"></a><span class="w">  </span><span class="nt">columns</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;email&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;username&quot;</span><span class="p p-Indicator">]</span>
<a id="__codelineno-96-3" name="__codelineno-96-3" href="#__codelineno-96-3"></a><span class="w">  </span><span class="nt">trim</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id="__codelineno-96-4" name="__codelineno-96-4" href="#__codelineno-96-4"></a><span class="w">  </span><span class="nt">case</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;lower&quot;</span>
</code></pre></div></p>
<p><a href="#nodeconfig">Back to Catalog</a></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>columns</strong></td>
<td>List[str]</td>
<td>Yes</td>
<td>-</td>
<td>List of columns to clean</td>
</tr>
<tr>
<td><strong>trim</strong></td>
<td>bool</td>
<td>No</td>
<td><code>True</code></td>
<td>Apply TRIM()</td>
</tr>
<tr>
<td><strong>case</strong></td>
<td>Literal['lower', 'upper', 'preserve']</td>
<td>No</td>
<td><code>preserve</code></td>
<td>Case conversion</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="coalescecolumnsparams"><code>coalesce_columns</code> (CoalesceColumnsParams)<a class="headerlink" href="#coalescecolumnsparams" title="Permanent link">&para;</a></h4>
<p>Returns the first non-null value from a list of columns.
Useful for fallback/priority scenarios.</p>
<p>Configuration for coalescing columns (first non-null value).</p>
<p>Example - Phone number fallback:
<div class="highlight"><pre><span></span><code><a id="__codelineno-97-1" name="__codelineno-97-1" href="#__codelineno-97-1"></a><span class="nt">coalesce_columns</span><span class="p">:</span>
<a id="__codelineno-97-2" name="__codelineno-97-2" href="#__codelineno-97-2"></a><span class="w">  </span><span class="nt">columns</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;mobile_phone&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;work_phone&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;home_phone&quot;</span><span class="p p-Indicator">]</span>
<a id="__codelineno-97-3" name="__codelineno-97-3" href="#__codelineno-97-3"></a><span class="w">  </span><span class="nt">output_col</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;primary_phone&quot;</span>
</code></pre></div></p>
<p>Example - Timestamp fallback:
<div class="highlight"><pre><span></span><code><a id="__codelineno-98-1" name="__codelineno-98-1" href="#__codelineno-98-1"></a><span class="nt">coalesce_columns</span><span class="p">:</span>
<a id="__codelineno-98-2" name="__codelineno-98-2" href="#__codelineno-98-2"></a><span class="w">  </span><span class="nt">columns</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;updated_at&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;modified_at&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;created_at&quot;</span><span class="p p-Indicator">]</span>
<a id="__codelineno-98-3" name="__codelineno-98-3" href="#__codelineno-98-3"></a><span class="w">  </span><span class="nt">output_col</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;last_change_at&quot;</span>
</code></pre></div></p>
<p><a href="#nodeconfig">Back to Catalog</a></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>columns</strong></td>
<td>List[str]</td>
<td>Yes</td>
<td>-</td>
<td>List of columns to coalesce (in priority order)</td>
</tr>
<tr>
<td><strong>output_col</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>Name of the output column</td>
</tr>
<tr>
<td><strong>drop_source</strong></td>
<td>bool</td>
<td>No</td>
<td><code>False</code></td>
<td>Drop the source columns after coalescing</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="concatcolumnsparams"><code>concat_columns</code> (ConcatColumnsParams)<a class="headerlink" href="#concatcolumnsparams" title="Permanent link">&para;</a></h4>
<p>Concatenates multiple columns into one string.
NULLs are skipped (treated as empty string) using CONCAT_WS behavior.</p>
<p>Configuration for string concatenation.</p>
<p>Example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-99-1" name="__codelineno-99-1" href="#__codelineno-99-1"></a><span class="nt">concat_columns</span><span class="p">:</span>
<a id="__codelineno-99-2" name="__codelineno-99-2" href="#__codelineno-99-2"></a><span class="w">  </span><span class="nt">columns</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;first_name&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;last_name&quot;</span><span class="p p-Indicator">]</span>
<a id="__codelineno-99-3" name="__codelineno-99-3" href="#__codelineno-99-3"></a><span class="w">  </span><span class="nt">separator</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;</span><span class="nv"> </span><span class="s">&quot;</span>
<a id="__codelineno-99-4" name="__codelineno-99-4" href="#__codelineno-99-4"></a><span class="w">  </span><span class="nt">output_col</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;full_name&quot;</span>
</code></pre></div></p>
<p><a href="#nodeconfig">Back to Catalog</a></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>columns</strong></td>
<td>List[str]</td>
<td>Yes</td>
<td>-</td>
<td>Columns to concatenate</td>
</tr>
<tr>
<td><strong>separator</strong></td>
<td>str</td>
<td>No</td>
<td>-</td>
<td>Separator string</td>
</tr>
<tr>
<td><strong>output_col</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>Resulting column name</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="converttimezoneparams"><code>convert_timezone</code> (ConvertTimezoneParams)<a class="headerlink" href="#converttimezoneparams" title="Permanent link">&para;</a></h4>
<p>Converts a timestamp from one timezone to another.
Assumes the input column is a naive timestamp representing time in source_tz,
or a timestamp with timezone.</p>
<p>Configuration for timezone conversion.</p>
<p>Example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-100-1" name="__codelineno-100-1" href="#__codelineno-100-1"></a><span class="nt">convert_timezone</span><span class="p">:</span>
<a id="__codelineno-100-2" name="__codelineno-100-2" href="#__codelineno-100-2"></a><span class="w">  </span><span class="nt">col</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;utc_time&quot;</span>
<a id="__codelineno-100-3" name="__codelineno-100-3" href="#__codelineno-100-3"></a><span class="w">  </span><span class="nt">source_tz</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;UTC&quot;</span>
<a id="__codelineno-100-4" name="__codelineno-100-4" href="#__codelineno-100-4"></a><span class="w">  </span><span class="nt">target_tz</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;America/New_York&quot;</span>
</code></pre></div></p>
<p><a href="#nodeconfig">Back to Catalog</a></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>col</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>Timestamp column to convert</td>
</tr>
<tr>
<td><strong>source_tz</strong></td>
<td>str</td>
<td>No</td>
<td><code>UTC</code></td>
<td>Source timezone (e.g., 'UTC', 'America/New_York')</td>
</tr>
<tr>
<td><strong>target_tz</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>Target timezone (e.g., 'America/Los_Angeles')</td>
</tr>
<tr>
<td><strong>output_col</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Name of the result column (default: {col}_{target_tz})</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="dateaddparams"><code>date_add</code> (DateAddParams)<a class="headerlink" href="#dateaddparams" title="Permanent link">&para;</a></h4>
<p>Adds an interval to a date/timestamp column.</p>
<p>Configuration for date addition.</p>
<p>Example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-101-1" name="__codelineno-101-1" href="#__codelineno-101-1"></a><span class="nt">date_add</span><span class="p">:</span>
<a id="__codelineno-101-2" name="__codelineno-101-2" href="#__codelineno-101-2"></a><span class="w">  </span><span class="nt">col</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;created_at&quot;</span>
<a id="__codelineno-101-3" name="__codelineno-101-3" href="#__codelineno-101-3"></a><span class="w">  </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<a id="__codelineno-101-4" name="__codelineno-101-4" href="#__codelineno-101-4"></a><span class="w">  </span><span class="nt">unit</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;day&quot;</span>
</code></pre></div></p>
<p><a href="#nodeconfig">Back to Catalog</a></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>col</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td><strong>value</strong></td>
<td>int</td>
<td>Yes</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td><strong>unit</strong></td>
<td>Literal['day', 'month', 'year', 'hour', 'minute', 'second']</td>
<td>Yes</td>
<td>-</td>
<td>-</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="datediffparams"><code>date_diff</code> (DateDiffParams)<a class="headerlink" href="#datediffparams" title="Permanent link">&para;</a></h4>
<p>Calculates difference between two dates/timestamps.
Returns the elapsed time in the specified unit (as float for sub-day units).</p>
<p>Configuration for date difference.</p>
<p>Example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-102-1" name="__codelineno-102-1" href="#__codelineno-102-1"></a><span class="nt">date_diff</span><span class="p">:</span>
<a id="__codelineno-102-2" name="__codelineno-102-2" href="#__codelineno-102-2"></a><span class="w">  </span><span class="nt">start_col</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;created_at&quot;</span>
<a id="__codelineno-102-3" name="__codelineno-102-3" href="#__codelineno-102-3"></a><span class="w">  </span><span class="nt">end_col</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;updated_at&quot;</span>
<a id="__codelineno-102-4" name="__codelineno-102-4" href="#__codelineno-102-4"></a><span class="w">  </span><span class="nt">unit</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;day&quot;</span>
</code></pre></div></p>
<p><a href="#nodeconfig">Back to Catalog</a></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>start_col</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td><strong>end_col</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td><strong>unit</strong></td>
<td>Literal['day', 'hour', 'minute', 'second']</td>
<td>No</td>
<td><code>day</code></td>
<td>-</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="datetruncparams"><code>date_trunc</code> (DateTruncParams)<a class="headerlink" href="#datetruncparams" title="Permanent link">&para;</a></h4>
<p>Truncates a date/timestamp to the specified precision.</p>
<p>Configuration for date truncation.</p>
<p>Example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-103-1" name="__codelineno-103-1" href="#__codelineno-103-1"></a><span class="nt">date_trunc</span><span class="p">:</span>
<a id="__codelineno-103-2" name="__codelineno-103-2" href="#__codelineno-103-2"></a><span class="w">  </span><span class="nt">col</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;created_at&quot;</span>
<a id="__codelineno-103-3" name="__codelineno-103-3" href="#__codelineno-103-3"></a><span class="w">  </span><span class="nt">unit</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;month&quot;</span>
</code></pre></div></p>
<p><a href="#nodeconfig">Back to Catalog</a></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>col</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td><strong>unit</strong></td>
<td>Literal['year', 'month', 'day', 'hour', 'minute', 'second']</td>
<td>Yes</td>
<td>-</td>
<td>-</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="derivecolumnsparams"><code>derive_columns</code> (DeriveColumnsParams)<a class="headerlink" href="#derivecolumnsparams" title="Permanent link">&para;</a></h4>
<p>Appends new columns based on SQL expressions.</p>
<p>Design:
- Uses projection to add fields.
- Keeps all existing columns via <code>*</code>.</p>
<p>Configuration for derived columns.</p>
<p>Example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-104-1" name="__codelineno-104-1" href="#__codelineno-104-1"></a><span class="nt">derive_columns</span><span class="p">:</span>
<a id="__codelineno-104-2" name="__codelineno-104-2" href="#__codelineno-104-2"></a><span class="w">  </span><span class="nt">derivations</span><span class="p">:</span>
<a id="__codelineno-104-3" name="__codelineno-104-3" href="#__codelineno-104-3"></a><span class="w">    </span><span class="nt">total_price</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;quantity</span><span class="nv"> </span><span class="s">*</span><span class="nv"> </span><span class="s">unit_price&quot;</span>
<a id="__codelineno-104-4" name="__codelineno-104-4" href="#__codelineno-104-4"></a><span class="w">    </span><span class="nt">full_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;concat(first_name,</span><span class="nv"> </span><span class="s">&#39;</span><span class="nv"> </span><span class="s">&#39;,</span><span class="nv"> </span><span class="s">last_name)&quot;</span>
</code></pre></div></p>
<p>Note: Engine will fail if expressions reference non-existent columns.</p>
<p><a href="#nodeconfig">Back to Catalog</a></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>derivations</strong></td>
<td>Dict[str, str]</td>
<td>Yes</td>
<td>-</td>
<td>Map of column name to SQL expression</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="distinctparams"><code>distinct</code> (DistinctParams)<a class="headerlink" href="#distinctparams" title="Permanent link">&para;</a></h4>
<p>Return unique rows from the dataset using SQL DISTINCT.</p>
<h2 id="parameters">Parameters<a class="headerlink" href="#parameters" title="Permanent link">&para;</a></h2>
<p>context : EngineContext
    The engine context containing the DataFrame to deduplicate.
params : DistinctParams
    Parameters specifying which columns to consider for uniqueness. If None, all columns are used.</p>
<h2 id="returns">Returns<a class="headerlink" href="#returns" title="Permanent link">&para;</a></h2>
<p>EngineContext
    The updated engine context with duplicate rows removed.</p>
<p>Configuration for distinct rows.</p>
<p>Example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-105-1" name="__codelineno-105-1" href="#__codelineno-105-1"></a><span class="nt">distinct</span><span class="p">:</span>
<a id="__codelineno-105-2" name="__codelineno-105-2" href="#__codelineno-105-2"></a><span class="w">  </span><span class="nt">columns</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;category&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;status&quot;</span><span class="p p-Indicator">]</span>
</code></pre></div></p>
<p><a href="#nodeconfig">Back to Catalog</a></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>columns</strong></td>
<td>Optional[List[str]]</td>
<td>No</td>
<td>-</td>
<td>Columns to project (if None, keeps all columns unique)</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="dropcolumnsparams"><code>drop_columns</code> (DropColumnsParams)<a class="headerlink" href="#dropcolumnsparams" title="Permanent link">&para;</a></h4>
<p>Removes the specified columns from the DataFrame.</p>
<p>Configuration for dropping specific columns (blacklist).</p>
<p>Example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-106-1" name="__codelineno-106-1" href="#__codelineno-106-1"></a><span class="nt">drop_columns</span><span class="p">:</span>
<a id="__codelineno-106-2" name="__codelineno-106-2" href="#__codelineno-106-2"></a><span class="w">  </span><span class="nt">columns</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;_internal_id&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;_temp_flag&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;_processing_date&quot;</span><span class="p p-Indicator">]</span>
</code></pre></div></p>
<p><a href="#nodeconfig">Back to Catalog</a></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>columns</strong></td>
<td>List[str]</td>
<td>Yes</td>
<td>-</td>
<td>List of column names to drop</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="extractdateparams"><code>extract_date_parts</code> (ExtractDateParams)<a class="headerlink" href="#extractdateparams" title="Permanent link">&para;</a></h4>
<p>Extracts date parts using ANSI SQL extract/functions.</p>
<p>Configuration for extracting date parts.</p>
<p>Example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-107-1" name="__codelineno-107-1" href="#__codelineno-107-1"></a><span class="nt">extract_date_parts</span><span class="p">:</span>
<a id="__codelineno-107-2" name="__codelineno-107-2" href="#__codelineno-107-2"></a><span class="w">  </span><span class="nt">source_col</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;created_at&quot;</span>
<a id="__codelineno-107-3" name="__codelineno-107-3" href="#__codelineno-107-3"></a><span class="w">  </span><span class="nt">prefix</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;created&quot;</span>
<a id="__codelineno-107-4" name="__codelineno-107-4" href="#__codelineno-107-4"></a><span class="w">  </span><span class="nt">parts</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;year&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;month&quot;</span><span class="p p-Indicator">]</span>
</code></pre></div></p>
<p><a href="#nodeconfig">Back to Catalog</a></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>source_col</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td><strong>prefix</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td><strong>parts</strong></td>
<td>Literal[typing.Literal['year', 'month', 'day', 'hour']]</td>
<td>No</td>
<td><code>['year', 'month', 'day']</code></td>
<td>-</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="fillnullsparams"><code>fill_nulls</code> (FillNullsParams)<a class="headerlink" href="#fillnullsparams" title="Permanent link">&para;</a></h4>
<p>Replaces null values with specified defaults using COALESCE.</p>
<p>Configuration for filling null values.</p>
<p>Example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-108-1" name="__codelineno-108-1" href="#__codelineno-108-1"></a><span class="nt">fill_nulls</span><span class="p">:</span>
<a id="__codelineno-108-2" name="__codelineno-108-2" href="#__codelineno-108-2"></a><span class="w">  </span><span class="nt">values</span><span class="p">:</span>
<a id="__codelineno-108-3" name="__codelineno-108-3" href="#__codelineno-108-3"></a><span class="w">    </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<a id="__codelineno-108-4" name="__codelineno-108-4" href="#__codelineno-108-4"></a><span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;N/A&quot;</span>
</code></pre></div></p>
<p><a href="#nodeconfig">Back to Catalog</a></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>values</strong></td>
<td>Dict[str, str | int | float | bool]</td>
<td>Yes</td>
<td>-</td>
<td>Map of column to fill value</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="filterrowsparams"><code>filter_rows</code> (FilterRowsParams)<a class="headerlink" href="#filterrowsparams" title="Permanent link">&para;</a></h4>
<p>Filters rows using a standard SQL WHERE clause.</p>
<p>Design:
- SQL-First: Pushes filtering to the engine's optimizer.
- Zero-Copy: No data movement to Python.</p>
<p>Configuration for filtering rows.</p>
<p>Example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-109-1" name="__codelineno-109-1" href="#__codelineno-109-1"></a><span class="nt">filter_rows</span><span class="p">:</span>
<a id="__codelineno-109-2" name="__codelineno-109-2" href="#__codelineno-109-2"></a><span class="w">  </span><span class="nt">condition</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;age</span><span class="nv"> </span><span class="s">&gt;</span><span class="nv"> </span><span class="s">18</span><span class="nv"> </span><span class="s">AND</span><span class="nv"> </span><span class="s">status</span><span class="nv"> </span><span class="s">=</span><span class="nv"> </span><span class="s">&#39;active&#39;&quot;</span>
</code></pre></div></p>
<p>Example (Null Check):
<div class="highlight"><pre><span></span><code><a id="__codelineno-110-1" name="__codelineno-110-1" href="#__codelineno-110-1"></a><span class="nt">filter_rows</span><span class="p">:</span>
<a id="__codelineno-110-2" name="__codelineno-110-2" href="#__codelineno-110-2"></a><span class="w">  </span><span class="nt">condition</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;email</span><span class="nv"> </span><span class="s">IS</span><span class="nv"> </span><span class="s">NOT</span><span class="nv"> </span><span class="s">NULL</span><span class="nv"> </span><span class="s">AND</span><span class="nv"> </span><span class="s">email</span><span class="nv"> </span><span class="s">!=</span><span class="nv"> </span><span class="s">&#39;&#39;&quot;</span>
</code></pre></div></p>
<p><a href="#nodeconfig">Back to Catalog</a></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>condition</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>SQL WHERE clause (e.g., 'age &gt; 18 AND status = "active"')</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="limitparams"><code>limit</code> (LimitParams)<a class="headerlink" href="#limitparams" title="Permanent link">&para;</a></h4>
<p>Limit the number of rows returned from the dataset.</p>
<h2 id="parameters_1">Parameters<a class="headerlink" href="#parameters_1" title="Permanent link">&para;</a></h2>
<p>context : EngineContext
    The engine context containing the DataFrame to limit.
params : LimitParams
    Parameters specifying the number of rows to return and the offset.</p>
<h2 id="returns_1">Returns<a class="headerlink" href="#returns_1" title="Permanent link">&para;</a></h2>
<p>EngineContext
    The updated engine context with the limited DataFrame.</p>
<p>Configuration for result limiting.</p>
<p>Example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-111-1" name="__codelineno-111-1" href="#__codelineno-111-1"></a><span class="nt">limit</span><span class="p">:</span>
<a id="__codelineno-111-2" name="__codelineno-111-2" href="#__codelineno-111-2"></a><span class="w">  </span><span class="nt">n</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span>
<a id="__codelineno-111-3" name="__codelineno-111-3" href="#__codelineno-111-3"></a><span class="w">  </span><span class="nt">offset</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
</code></pre></div></p>
<p><a href="#nodeconfig">Back to Catalog</a></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>n</strong></td>
<td>int</td>
<td>Yes</td>
<td>-</td>
<td>Number of rows to return</td>
</tr>
<tr>
<td><strong>offset</strong></td>
<td>int</td>
<td>No</td>
<td><code>0</code></td>
<td>Number of rows to skip</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="normalizecolumnnamesparams"><code>normalize_column_names</code> (NormalizeColumnNamesParams)<a class="headerlink" href="#normalizecolumnnamesparams" title="Permanent link">&para;</a></h4>
<p>Normalizes column names to a consistent style.
Useful for cleaning up messy source data with spaces, mixed case, or special characters.</p>
<p>Configuration for normalizing column names.</p>
<p>Example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-112-1" name="__codelineno-112-1" href="#__codelineno-112-1"></a><span class="nt">normalize_column_names</span><span class="p">:</span>
<a id="__codelineno-112-2" name="__codelineno-112-2" href="#__codelineno-112-2"></a><span class="w">  </span><span class="nt">style</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;snake_case&quot;</span>
<a id="__codelineno-112-3" name="__codelineno-112-3" href="#__codelineno-112-3"></a><span class="w">  </span><span class="nt">lowercase</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div></p>
<p><a href="#nodeconfig">Back to Catalog</a></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>style</strong></td>
<td>Literal['snake_case', 'none']</td>
<td>No</td>
<td><code>snake_case</code></td>
<td>Naming style: 'snake_case' converts spaces/special chars to underscores</td>
</tr>
<tr>
<td><strong>lowercase</strong></td>
<td>bool</td>
<td>No</td>
<td><code>True</code></td>
<td>Convert names to lowercase</td>
</tr>
<tr>
<td><strong>remove_special</strong></td>
<td>bool</td>
<td>No</td>
<td><code>True</code></td>
<td>Remove special characters except underscores</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="normalizeschemaparams"><code>normalize_schema</code> (NormalizeSchemaParams)<a class="headerlink" href="#normalizeschemaparams" title="Permanent link">&para;</a></h4>
<p>Structural transformation to rename, drop, and reorder columns.</p>
<p>Note: This is one of the few that might behave better with native API in some cases,
but SQL projection handles it perfectly and is consistent.</p>
<p>Configuration for schema normalization.</p>
<p>Example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-113-1" name="__codelineno-113-1" href="#__codelineno-113-1"></a><span class="nt">normalize_schema</span><span class="p">:</span>
<a id="__codelineno-113-2" name="__codelineno-113-2" href="#__codelineno-113-2"></a><span class="w">  </span><span class="nt">rename</span><span class="p">:</span>
<a id="__codelineno-113-3" name="__codelineno-113-3" href="#__codelineno-113-3"></a><span class="w">    </span><span class="nt">old_col</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;new_col&quot;</span>
<a id="__codelineno-113-4" name="__codelineno-113-4" href="#__codelineno-113-4"></a><span class="w">  </span><span class="nt">drop</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;unused_col&quot;</span><span class="p p-Indicator">]</span>
<a id="__codelineno-113-5" name="__codelineno-113-5" href="#__codelineno-113-5"></a><span class="w">  </span><span class="nt">select_order</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;id&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;new_col&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;created_at&quot;</span><span class="p p-Indicator">]</span>
</code></pre></div></p>
<p><a href="#nodeconfig">Back to Catalog</a></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>rename</strong></td>
<td>Optional[Dict[str, str]]</td>
<td>No</td>
<td><code>PydanticUndefined</code></td>
<td>old_name -&gt; new_name</td>
</tr>
<tr>
<td><strong>drop</strong></td>
<td>Optional[List[str]]</td>
<td>No</td>
<td><code>PydanticUndefined</code></td>
<td>Columns to remove; ignored if not present</td>
</tr>
<tr>
<td><strong>select_order</strong></td>
<td>Optional[List[str]]</td>
<td>No</td>
<td>-</td>
<td>Final column order; any missing columns appended after</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="renamecolumnsparams"><code>rename_columns</code> (RenameColumnsParams)<a class="headerlink" href="#renamecolumnsparams" title="Permanent link">&para;</a></h4>
<p>Renames columns according to the provided mapping.
Columns not in the mapping are kept unchanged.</p>
<p>Configuration for bulk column renaming.</p>
<p>Example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-114-1" name="__codelineno-114-1" href="#__codelineno-114-1"></a><span class="nt">rename_columns</span><span class="p">:</span>
<a id="__codelineno-114-2" name="__codelineno-114-2" href="#__codelineno-114-2"></a><span class="w">  </span><span class="nt">mapping</span><span class="p">:</span>
<a id="__codelineno-114-3" name="__codelineno-114-3" href="#__codelineno-114-3"></a><span class="w">    </span><span class="nt">customer_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cust_id</span>
<a id="__codelineno-114-4" name="__codelineno-114-4" href="#__codelineno-114-4"></a><span class="w">    </span><span class="nt">order_date</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">date</span>
<a id="__codelineno-114-5" name="__codelineno-114-5" href="#__codelineno-114-5"></a><span class="w">    </span><span class="nt">total_amount</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">amount</span>
</code></pre></div></p>
<p><a href="#nodeconfig">Back to Catalog</a></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>mapping</strong></td>
<td>Dict[str, str]</td>
<td>Yes</td>
<td>-</td>
<td>Map of old column name to new column name</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="replacevaluesparams"><code>replace_values</code> (ReplaceValuesParams)<a class="headerlink" href="#replacevaluesparams" title="Permanent link">&para;</a></h4>
<p>Replaces values in specified columns according to the mapping.
Supports replacing to NULL.</p>
<p>Configuration for bulk value replacement.</p>
<p>Example - Standardize nulls:
<div class="highlight"><pre><span></span><code><a id="__codelineno-115-1" name="__codelineno-115-1" href="#__codelineno-115-1"></a><span class="nt">replace_values</span><span class="p">:</span>
<a id="__codelineno-115-2" name="__codelineno-115-2" href="#__codelineno-115-2"></a><span class="w">  </span><span class="nt">columns</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;status&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;category&quot;</span><span class="p p-Indicator">]</span>
<a id="__codelineno-115-3" name="__codelineno-115-3" href="#__codelineno-115-3"></a><span class="w">  </span><span class="nt">mapping</span><span class="p">:</span>
<a id="__codelineno-115-4" name="__codelineno-115-4" href="#__codelineno-115-4"></a><span class="w">    </span><span class="s">&quot;N/A&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<a id="__codelineno-115-5" name="__codelineno-115-5" href="#__codelineno-115-5"></a><span class="w">    </span><span class="s">&quot;&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<a id="__codelineno-115-6" name="__codelineno-115-6" href="#__codelineno-115-6"></a><span class="w">    </span><span class="s">&quot;Unknown&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
</code></pre></div></p>
<p>Example - Code replacement:
<div class="highlight"><pre><span></span><code><a id="__codelineno-116-1" name="__codelineno-116-1" href="#__codelineno-116-1"></a><span class="nt">replace_values</span><span class="p">:</span>
<a id="__codelineno-116-2" name="__codelineno-116-2" href="#__codelineno-116-2"></a><span class="w">  </span><span class="nt">columns</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;country_code&quot;</span><span class="p p-Indicator">]</span>
<a id="__codelineno-116-3" name="__codelineno-116-3" href="#__codelineno-116-3"></a><span class="w">  </span><span class="nt">mapping</span><span class="p">:</span>
<a id="__codelineno-116-4" name="__codelineno-116-4" href="#__codelineno-116-4"></a><span class="w">    </span><span class="s">&quot;US&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;USA&quot;</span>
<a id="__codelineno-116-5" name="__codelineno-116-5" href="#__codelineno-116-5"></a><span class="w">    </span><span class="s">&quot;UK&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;GBR&quot;</span>
</code></pre></div></p>
<p><a href="#nodeconfig">Back to Catalog</a></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>columns</strong></td>
<td>List[str]</td>
<td>Yes</td>
<td>-</td>
<td>Columns to apply replacements to</td>
</tr>
<tr>
<td><strong>mapping</strong></td>
<td>Dict[str, Optional[str]]</td>
<td>Yes</td>
<td>-</td>
<td>Map of old value to new value (use null for NULL)</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="sampleparams"><code>sample</code> (SampleParams)<a class="headerlink" href="#sampleparams" title="Permanent link">&para;</a></h4>
<p>Return a random sample of rows from the dataset.</p>
<h2 id="parameters_2">Parameters<a class="headerlink" href="#parameters_2" title="Permanent link">&para;</a></h2>
<p>context : EngineContext
    The engine context containing the DataFrame to sample from.
params : SampleParams
    Parameters specifying the fraction of rows to return and the random seed.</p>
<h2 id="returns_2">Returns<a class="headerlink" href="#returns_2" title="Permanent link">&para;</a></h2>
<p>EngineContext
    The updated engine context with the sampled DataFrame.</p>
<p>Configuration for random sampling.</p>
<p>Example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-117-1" name="__codelineno-117-1" href="#__codelineno-117-1"></a><span class="nt">sample</span><span class="p">:</span>
<a id="__codelineno-117-2" name="__codelineno-117-2" href="#__codelineno-117-2"></a><span class="w">  </span><span class="nt">fraction</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.1</span>
<a id="__codelineno-117-3" name="__codelineno-117-3" href="#__codelineno-117-3"></a><span class="w">  </span><span class="nt">seed</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">42</span>
</code></pre></div></p>
<p><a href="#nodeconfig">Back to Catalog</a></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>fraction</strong></td>
<td>float</td>
<td>Yes</td>
<td>-</td>
<td>Fraction of rows to return (0.0 to 1.0)</td>
</tr>
<tr>
<td><strong>seed</strong></td>
<td>Optional[int]</td>
<td>No</td>
<td>-</td>
<td>-</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="selectcolumnsparams"><code>select_columns</code> (SelectColumnsParams)<a class="headerlink" href="#selectcolumnsparams" title="Permanent link">&para;</a></h4>
<p>Keeps only the specified columns, dropping all others.</p>
<p>Configuration for selecting specific columns (whitelist).</p>
<p>Example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-118-1" name="__codelineno-118-1" href="#__codelineno-118-1"></a><span class="nt">select_columns</span><span class="p">:</span>
<a id="__codelineno-118-2" name="__codelineno-118-2" href="#__codelineno-118-2"></a><span class="w">  </span><span class="nt">columns</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;id&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;name&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;created_at&quot;</span><span class="p p-Indicator">]</span>
</code></pre></div></p>
<p><a href="#nodeconfig">Back to Catalog</a></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>columns</strong></td>
<td>List[str]</td>
<td>Yes</td>
<td>-</td>
<td>List of column names to keep</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="sortparams"><code>sort</code> (SortParams)<a class="headerlink" href="#sortparams" title="Permanent link">&para;</a></h4>
<p>Sort the dataset by one or more columns.</p>
<h2 id="parameters_3">Parameters<a class="headerlink" href="#parameters_3" title="Permanent link">&para;</a></h2>
<p>context : EngineContext
    The engine context containing the DataFrame to sort.
params : SortParams
    Parameters specifying columns to sort by and sort order.</p>
<h2 id="returns_3">Returns<a class="headerlink" href="#returns_3" title="Permanent link">&para;</a></h2>
<p>EngineContext
    The updated engine context with the sorted DataFrame.</p>
<p>Configuration for sorting.</p>
<p>Example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-119-1" name="__codelineno-119-1" href="#__codelineno-119-1"></a><span class="nt">sort</span><span class="p">:</span>
<a id="__codelineno-119-2" name="__codelineno-119-2" href="#__codelineno-119-2"></a><span class="w">  </span><span class="nt">by</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;created_at&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;id&quot;</span><span class="p p-Indicator">]</span>
<a id="__codelineno-119-3" name="__codelineno-119-3" href="#__codelineno-119-3"></a><span class="w">  </span><span class="nt">ascending</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
</code></pre></div></p>
<p><a href="#nodeconfig">Back to Catalog</a></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>by</strong></td>
<td>str | List[str]</td>
<td>Yes</td>
<td>-</td>
<td>Column(s) to sort by</td>
</tr>
<tr>
<td><strong>ascending</strong></td>
<td>bool</td>
<td>No</td>
<td><code>True</code></td>
<td>Sort order</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="splitpartparams"><code>split_part</code> (SplitPartParams)<a class="headerlink" href="#splitpartparams" title="Permanent link">&para;</a></h4>
<p>Extracts the Nth part of a string after splitting by a delimiter.</p>
<p>Configuration for splitting strings.</p>
<p>Example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-120-1" name="__codelineno-120-1" href="#__codelineno-120-1"></a><span class="nt">split_part</span><span class="p">:</span>
<a id="__codelineno-120-2" name="__codelineno-120-2" href="#__codelineno-120-2"></a><span class="w">  </span><span class="nt">col</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;email&quot;</span>
<a id="__codelineno-120-3" name="__codelineno-120-3" href="#__codelineno-120-3"></a><span class="w">  </span><span class="nt">delimiter</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;@&quot;</span>
<a id="__codelineno-120-4" name="__codelineno-120-4" href="#__codelineno-120-4"></a><span class="w">  </span><span class="nt">index</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span><span class="w">  </span><span class="c1"># Extracts domain</span>
</code></pre></div></p>
<p><a href="#nodeconfig">Back to Catalog</a></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>col</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>Column to split</td>
</tr>
<tr>
<td><strong>delimiter</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>Delimiter to split by</td>
</tr>
<tr>
<td><strong>index</strong></td>
<td>int</td>
<td>Yes</td>
<td>-</td>
<td>1-based index of the token to extract</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="trimwhitespaceparams"><code>trim_whitespace</code> (TrimWhitespaceParams)<a class="headerlink" href="#trimwhitespaceparams" title="Permanent link">&para;</a></h4>
<p>Trims leading and trailing whitespace from string columns.</p>
<p>Configuration for trimming whitespace from string columns.</p>
<p>Example - All string columns:
<div class="highlight"><pre><span></span><code><a id="__codelineno-121-1" name="__codelineno-121-1" href="#__codelineno-121-1"></a><span class="nt">trim_whitespace</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
</code></pre></div></p>
<p>Example - Specific columns:
<div class="highlight"><pre><span></span><code><a id="__codelineno-122-1" name="__codelineno-122-1" href="#__codelineno-122-1"></a><span class="nt">trim_whitespace</span><span class="p">:</span>
<a id="__codelineno-122-2" name="__codelineno-122-2" href="#__codelineno-122-2"></a><span class="w">  </span><span class="nt">columns</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;name&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;address&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;city&quot;</span><span class="p p-Indicator">]</span>
</code></pre></div></p>
<p><a href="#nodeconfig">Back to Catalog</a></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>columns</strong></td>
<td>Optional[List[str]]</td>
<td>No</td>
<td>-</td>
<td>Columns to trim (default: all string columns detected at runtime)</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="relational-algebra">📂 Relational Algebra<a class="headerlink" href="#relational-algebra" title="Permanent link">&para;</a></h3>
<h4 id="aggregateparams"><code>aggregate</code> (AggregateParams)<a class="headerlink" href="#aggregateparams" title="Permanent link">&para;</a></h4>
<p>Performs grouping and aggregation via SQL.</p>
<p>Configuration for aggregation.</p>
<p>Example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-123-1" name="__codelineno-123-1" href="#__codelineno-123-1"></a><span class="nt">aggregate</span><span class="p">:</span>
<a id="__codelineno-123-2" name="__codelineno-123-2" href="#__codelineno-123-2"></a><span class="w">  </span><span class="nt">group_by</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;department&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;region&quot;</span><span class="p p-Indicator">]</span>
<a id="__codelineno-123-3" name="__codelineno-123-3" href="#__codelineno-123-3"></a><span class="w">  </span><span class="nt">aggregations</span><span class="p">:</span>
<a id="__codelineno-123-4" name="__codelineno-123-4" href="#__codelineno-123-4"></a><span class="w">    </span><span class="nt">salary</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sum&quot;</span>
<a id="__codelineno-123-5" name="__codelineno-123-5" href="#__codelineno-123-5"></a><span class="w">    </span><span class="nt">employee_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;count&quot;</span>
<a id="__codelineno-123-6" name="__codelineno-123-6" href="#__codelineno-123-6"></a><span class="w">    </span><span class="nt">age</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;avg&quot;</span>
</code></pre></div></p>
<p><a href="#nodeconfig">Back to Catalog</a></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>group_by</strong></td>
<td>List[str]</td>
<td>Yes</td>
<td>-</td>
<td>Columns to group by</td>
</tr>
<tr>
<td><strong>aggregations</strong></td>
<td>Dict[str, AggFunc]</td>
<td>Yes</td>
<td>-</td>
<td>Map of column to aggregation function (sum, avg, min, max, count)</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="joinparams"><code>join</code> (JoinParams)<a class="headerlink" href="#joinparams" title="Permanent link">&para;</a></h4>
<p>Joins the current dataset with another dataset from the context.</p>
<p>Configuration for joining datasets.</p>
<p>Scenario 1: Simple Left Join
<div class="highlight"><pre><span></span><code><a id="__codelineno-124-1" name="__codelineno-124-1" href="#__codelineno-124-1"></a><span class="nt">join</span><span class="p">:</span>
<a id="__codelineno-124-2" name="__codelineno-124-2" href="#__codelineno-124-2"></a><span class="w">  </span><span class="nt">right_dataset</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;customers&quot;</span>
<a id="__codelineno-124-3" name="__codelineno-124-3" href="#__codelineno-124-3"></a><span class="w">  </span><span class="nt">on</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;customer_id&quot;</span>
<a id="__codelineno-124-4" name="__codelineno-124-4" href="#__codelineno-124-4"></a><span class="w">  </span><span class="nt">how</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;left&quot;</span>
</code></pre></div></p>
<p>Scenario 2: Join with Prefix (avoid collisions)
<div class="highlight"><pre><span></span><code><a id="__codelineno-125-1" name="__codelineno-125-1" href="#__codelineno-125-1"></a><span class="nt">join</span><span class="p">:</span>
<a id="__codelineno-125-2" name="__codelineno-125-2" href="#__codelineno-125-2"></a><span class="w">  </span><span class="nt">right_dataset</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;orders&quot;</span>
<a id="__codelineno-125-3" name="__codelineno-125-3" href="#__codelineno-125-3"></a><span class="w">  </span><span class="nt">on</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;user_id&quot;</span><span class="p p-Indicator">]</span>
<a id="__codelineno-125-4" name="__codelineno-125-4" href="#__codelineno-125-4"></a><span class="w">  </span><span class="nt">how</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;inner&quot;</span>
<a id="__codelineno-125-5" name="__codelineno-125-5" href="#__codelineno-125-5"></a><span class="w">  </span><span class="nt">prefix</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ord&quot;</span><span class="w">  </span><span class="c1"># Result cols: ord_date, ord_amount...</span>
</code></pre></div></p>
<p><a href="#nodeconfig">Back to Catalog</a></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>right_dataset</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>Name of the node/dataset to join with</td>
</tr>
<tr>
<td><strong>on</strong></td>
<td>str | List[str]</td>
<td>Yes</td>
<td>-</td>
<td>Column(s) to join on</td>
</tr>
<tr>
<td><strong>how</strong></td>
<td>Literal['inner', 'left', 'right', 'full', 'cross', 'anti', 'semi']</td>
<td>No</td>
<td><code>left</code></td>
<td>Join type</td>
</tr>
<tr>
<td><strong>prefix</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Prefix for columns from right dataset to avoid collisions</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="pivotparams"><code>pivot</code> (PivotParams)<a class="headerlink" href="#pivotparams" title="Permanent link">&para;</a></h4>
<p>Pivots row values into columns.</p>
<p>Configuration for pivoting data.</p>
<p>Example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-126-1" name="__codelineno-126-1" href="#__codelineno-126-1"></a><span class="nt">pivot</span><span class="p">:</span>
<a id="__codelineno-126-2" name="__codelineno-126-2" href="#__codelineno-126-2"></a><span class="w">  </span><span class="nt">group_by</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;product_id&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;region&quot;</span><span class="p p-Indicator">]</span>
<a id="__codelineno-126-3" name="__codelineno-126-3" href="#__codelineno-126-3"></a><span class="w">  </span><span class="nt">pivot_col</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;month&quot;</span>
<a id="__codelineno-126-4" name="__codelineno-126-4" href="#__codelineno-126-4"></a><span class="w">  </span><span class="nt">agg_col</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sales&quot;</span>
<a id="__codelineno-126-5" name="__codelineno-126-5" href="#__codelineno-126-5"></a><span class="w">  </span><span class="nt">agg_func</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sum&quot;</span>
</code></pre></div></p>
<p>Example (Optimized for Spark):
<div class="highlight"><pre><span></span><code><a id="__codelineno-127-1" name="__codelineno-127-1" href="#__codelineno-127-1"></a><span class="nt">pivot</span><span class="p">:</span>
<a id="__codelineno-127-2" name="__codelineno-127-2" href="#__codelineno-127-2"></a><span class="w">  </span><span class="nt">group_by</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;id&quot;</span><span class="p p-Indicator">]</span>
<a id="__codelineno-127-3" name="__codelineno-127-3" href="#__codelineno-127-3"></a><span class="w">  </span><span class="nt">pivot_col</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;category&quot;</span>
<a id="__codelineno-127-4" name="__codelineno-127-4" href="#__codelineno-127-4"></a><span class="w">  </span><span class="nt">values</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;A&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;B&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;C&quot;</span><span class="p p-Indicator">]</span><span class="w">  </span><span class="c1"># Explicit values avoid extra pass</span>
<a id="__codelineno-127-5" name="__codelineno-127-5" href="#__codelineno-127-5"></a><span class="w">  </span><span class="nt">agg_col</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;amount&quot;</span>
</code></pre></div></p>
<p><a href="#nodeconfig">Back to Catalog</a></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>group_by</strong></td>
<td>List[str]</td>
<td>Yes</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td><strong>pivot_col</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td><strong>agg_col</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td><strong>agg_func</strong></td>
<td>Literal['sum', 'count', 'avg', 'max', 'min', 'first']</td>
<td>No</td>
<td><code>sum</code></td>
<td>-</td>
</tr>
<tr>
<td><strong>values</strong></td>
<td>Optional[List[str]]</td>
<td>No</td>
<td>-</td>
<td>Specific values to pivot (for Spark optimization)</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="unionparams"><code>union</code> (UnionParams)<a class="headerlink" href="#unionparams" title="Permanent link">&para;</a></h4>
<p>Unions current dataset with others.</p>
<p>Configuration for unioning datasets.</p>
<p>Example (By Name - Default):
<div class="highlight"><pre><span></span><code><a id="__codelineno-128-1" name="__codelineno-128-1" href="#__codelineno-128-1"></a><span class="nt">union</span><span class="p">:</span>
<a id="__codelineno-128-2" name="__codelineno-128-2" href="#__codelineno-128-2"></a><span class="w">  </span><span class="nt">datasets</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;sales_2023&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;sales_2024&quot;</span><span class="p p-Indicator">]</span>
<a id="__codelineno-128-3" name="__codelineno-128-3" href="#__codelineno-128-3"></a><span class="w">  </span><span class="nt">by_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div></p>
<p>Example (By Position):
<div class="highlight"><pre><span></span><code><a id="__codelineno-129-1" name="__codelineno-129-1" href="#__codelineno-129-1"></a><span class="nt">union</span><span class="p">:</span>
<a id="__codelineno-129-2" name="__codelineno-129-2" href="#__codelineno-129-2"></a><span class="w">  </span><span class="nt">datasets</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;legacy_data&quot;</span><span class="p p-Indicator">]</span>
<a id="__codelineno-129-3" name="__codelineno-129-3" href="#__codelineno-129-3"></a><span class="w">  </span><span class="nt">by_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
</code></pre></div></p>
<p><a href="#nodeconfig">Back to Catalog</a></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>datasets</strong></td>
<td>List[str]</td>
<td>Yes</td>
<td>-</td>
<td>List of node names to union with current</td>
</tr>
<tr>
<td><strong>by_name</strong></td>
<td>bool</td>
<td>No</td>
<td><code>True</code></td>
<td>Match columns by name (UNION ALL BY NAME)</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="unpivotparams"><code>unpivot</code> (UnpivotParams)<a class="headerlink" href="#unpivotparams" title="Permanent link">&para;</a></h4>
<p>Unpivots columns into rows (Melt/Stack).</p>
<p>Configuration for unpivoting (melting) data.</p>
<p>Example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-130-1" name="__codelineno-130-1" href="#__codelineno-130-1"></a><span class="nt">unpivot</span><span class="p">:</span>
<a id="__codelineno-130-2" name="__codelineno-130-2" href="#__codelineno-130-2"></a><span class="w">  </span><span class="nt">id_cols</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;product_id&quot;</span><span class="p p-Indicator">]</span>
<a id="__codelineno-130-3" name="__codelineno-130-3" href="#__codelineno-130-3"></a><span class="w">  </span><span class="nt">value_vars</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;jan_sales&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;feb_sales&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;mar_sales&quot;</span><span class="p p-Indicator">]</span>
<a id="__codelineno-130-4" name="__codelineno-130-4" href="#__codelineno-130-4"></a><span class="w">  </span><span class="nt">var_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;month&quot;</span>
<a id="__codelineno-130-5" name="__codelineno-130-5" href="#__codelineno-130-5"></a><span class="w">  </span><span class="nt">value_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sales&quot;</span>
</code></pre></div></p>
<p><a href="#nodeconfig">Back to Catalog</a></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>id_cols</strong></td>
<td>List[str]</td>
<td>Yes</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td><strong>value_vars</strong></td>
<td>List[str]</td>
<td>Yes</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td><strong>var_name</strong></td>
<td>str</td>
<td>No</td>
<td><code>variable</code></td>
<td>-</td>
</tr>
<tr>
<td><strong>value_name</strong></td>
<td>str</td>
<td>No</td>
<td><code>value</code></td>
<td>-</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="data-quality">📂 Data Quality<a class="headerlink" href="#data-quality" title="Permanent link">&para;</a></h3>
<h4 id="crosscheckparams"><code>cross_check</code> (CrossCheckParams)<a class="headerlink" href="#crosscheckparams" title="Permanent link">&para;</a></h4>
<p>Perform cross-node validation checks.</p>
<p>Does not return a DataFrame (returns None).
Raises ValidationError on failure.</p>
<p>Configuration for cross-node validation checks.</p>
<p>Example (Row Count Mismatch):
<div class="highlight"><pre><span></span><code><a id="__codelineno-131-1" name="__codelineno-131-1" href="#__codelineno-131-1"></a><span class="nt">transformer</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;cross_check&quot;</span>
<a id="__codelineno-131-2" name="__codelineno-131-2" href="#__codelineno-131-2"></a><span class="nt">params</span><span class="p">:</span>
<a id="__codelineno-131-3" name="__codelineno-131-3" href="#__codelineno-131-3"></a><span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;row_count_diff&quot;</span>
<a id="__codelineno-131-4" name="__codelineno-131-4" href="#__codelineno-131-4"></a><span class="w">  </span><span class="nt">inputs</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;node_a&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;node_b&quot;</span><span class="p p-Indicator">]</span>
<a id="__codelineno-131-5" name="__codelineno-131-5" href="#__codelineno-131-5"></a><span class="w">  </span><span class="nt">threshold</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.05</span><span class="w">  </span><span class="c1"># Allow 5% difference</span>
</code></pre></div></p>
<p>Example (Schema Match):
<div class="highlight"><pre><span></span><code><a id="__codelineno-132-1" name="__codelineno-132-1" href="#__codelineno-132-1"></a><span class="nt">transformer</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;cross_check&quot;</span>
<a id="__codelineno-132-2" name="__codelineno-132-2" href="#__codelineno-132-2"></a><span class="nt">params</span><span class="p">:</span>
<a id="__codelineno-132-3" name="__codelineno-132-3" href="#__codelineno-132-3"></a><span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;schema_match&quot;</span>
<a id="__codelineno-132-4" name="__codelineno-132-4" href="#__codelineno-132-4"></a><span class="w">  </span><span class="nt">inputs</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;staging_orders&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;prod_orders&quot;</span><span class="p p-Indicator">]</span>
</code></pre></div></p>
<p><a href="#nodeconfig">Back to Catalog</a></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>type</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>Check type: 'row_count_diff', 'schema_match'</td>
</tr>
<tr>
<td><strong>inputs</strong></td>
<td>List[str]</td>
<td>Yes</td>
<td>-</td>
<td>List of node names to compare</td>
</tr>
<tr>
<td><strong>threshold</strong></td>
<td>float</td>
<td>No</td>
<td><code>0.0</code></td>
<td>Threshold for diff (0.0-1.0)</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="warehousing-patterns">📂 Warehousing Patterns<a class="headerlink" href="#warehousing-patterns" title="Permanent link">&para;</a></h3>
<h4 id="auditcolumnsconfig">AuditColumnsConfig<a class="headerlink" href="#auditcolumnsconfig" title="Permanent link">&para;</a></h4>
<p><a href="#nodeconfig">Back to Catalog</a></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>created_col</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Column to set only on first insert</td>
</tr>
<tr>
<td><strong>updated_col</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Column to update on every merge</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="mergeparams"><code>merge</code> (MergeParams)<a class="headerlink" href="#mergeparams" title="Permanent link">&para;</a></h4>
<p>Merge transformer implementation.
Handles Upsert, Append-Only, and Delete-Match strategies.</p>
<p>Args:
    context: EngineContext (preferred) or legacy PandasContext/SparkContext
    params: MergeParams object (when called via function step) or DataFrame (legacy)
    current: DataFrame (legacy positional arg, deprecated)
    **kwargs: Parameters when not using MergeParams</p>
<p>Configuration for Merge transformer (Upsert/Append).</p>
<h3 id="gdpr-compliance-guide">⚖️ "GDPR &amp; Compliance" Guide<a class="headerlink" href="#gdpr-compliance-guide" title="Permanent link">&para;</a></h3>
<p><strong>Business Problem:</strong>
"A user exercised their 'Right to be Forgotten'. We need to remove them from our Silver tables immediately."</p>
<p><strong>The Solution:</strong>
Use the <code>delete_match</code> strategy. The source dataframe contains the IDs to be deleted, and the transformer removes them from the target.</p>
<p><strong>Recipe 1: Right to be Forgotten (Delete)</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-133-1" name="__codelineno-133-1" href="#__codelineno-133-1"></a><span class="nt">transformer</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;merge&quot;</span>
<a id="__codelineno-133-2" name="__codelineno-133-2" href="#__codelineno-133-2"></a><span class="nt">params</span><span class="p">:</span>
<a id="__codelineno-133-3" name="__codelineno-133-3" href="#__codelineno-133-3"></a><span class="w">  </span><span class="nt">target</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;silver.customers&quot;</span>
<a id="__codelineno-133-4" name="__codelineno-133-4" href="#__codelineno-133-4"></a><span class="w">  </span><span class="nt">keys</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;customer_id&quot;</span><span class="p p-Indicator">]</span>
<a id="__codelineno-133-5" name="__codelineno-133-5" href="#__codelineno-133-5"></a><span class="w">  </span><span class="nt">strategy</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;delete_match&quot;</span>
</code></pre></div></p>
<p><strong>Recipe 2: Conditional Update (SCD Type 1)</strong>
"Only update if the source record is newer than the target record."
<div class="highlight"><pre><span></span><code><a id="__codelineno-134-1" name="__codelineno-134-1" href="#__codelineno-134-1"></a><span class="nt">transformer</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;merge&quot;</span>
<a id="__codelineno-134-2" name="__codelineno-134-2" href="#__codelineno-134-2"></a><span class="nt">params</span><span class="p">:</span>
<a id="__codelineno-134-3" name="__codelineno-134-3" href="#__codelineno-134-3"></a><span class="w">  </span><span class="nt">target</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;silver.products&quot;</span>
<a id="__codelineno-134-4" name="__codelineno-134-4" href="#__codelineno-134-4"></a><span class="w">  </span><span class="nt">keys</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;product_id&quot;</span><span class="p p-Indicator">]</span>
<a id="__codelineno-134-5" name="__codelineno-134-5" href="#__codelineno-134-5"></a><span class="w">  </span><span class="nt">strategy</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;upsert&quot;</span>
<a id="__codelineno-134-6" name="__codelineno-134-6" href="#__codelineno-134-6"></a><span class="w">  </span><span class="nt">update_condition</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;source.updated_at</span><span class="nv"> </span><span class="s">&gt;</span><span class="nv"> </span><span class="s">target.updated_at&quot;</span>
</code></pre></div></p>
<p><strong>Recipe 3: Safe Insert (Filter Bad Records)</strong>
"Only insert records that are not marked as deleted."
<div class="highlight"><pre><span></span><code><a id="__codelineno-135-1" name="__codelineno-135-1" href="#__codelineno-135-1"></a><span class="nt">transformer</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;merge&quot;</span>
<a id="__codelineno-135-2" name="__codelineno-135-2" href="#__codelineno-135-2"></a><span class="nt">params</span><span class="p">:</span>
<a id="__codelineno-135-3" name="__codelineno-135-3" href="#__codelineno-135-3"></a><span class="w">  </span><span class="nt">target</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;silver.orders&quot;</span>
<a id="__codelineno-135-4" name="__codelineno-135-4" href="#__codelineno-135-4"></a><span class="w">  </span><span class="nt">keys</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;order_id&quot;</span><span class="p p-Indicator">]</span>
<a id="__codelineno-135-5" name="__codelineno-135-5" href="#__codelineno-135-5"></a><span class="w">  </span><span class="nt">strategy</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;append_only&quot;</span>
<a id="__codelineno-135-6" name="__codelineno-135-6" href="#__codelineno-135-6"></a><span class="w">  </span><span class="nt">insert_condition</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;source.is_deleted</span><span class="nv"> </span><span class="s">=</span><span class="nv"> </span><span class="s">false&quot;</span>
</code></pre></div></p>
<p><strong>Recipe 4: Audit Columns</strong>
"Track when records were created or updated."
<div class="highlight"><pre><span></span><code><a id="__codelineno-136-1" name="__codelineno-136-1" href="#__codelineno-136-1"></a><span class="nt">transformer</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;merge&quot;</span>
<a id="__codelineno-136-2" name="__codelineno-136-2" href="#__codelineno-136-2"></a><span class="nt">params</span><span class="p">:</span>
<a id="__codelineno-136-3" name="__codelineno-136-3" href="#__codelineno-136-3"></a><span class="w">  </span><span class="nt">target</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;silver.users&quot;</span>
<a id="__codelineno-136-4" name="__codelineno-136-4" href="#__codelineno-136-4"></a><span class="w">  </span><span class="nt">keys</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;user_id&quot;</span><span class="p p-Indicator">]</span>
<a id="__codelineno-136-5" name="__codelineno-136-5" href="#__codelineno-136-5"></a><span class="w">  </span><span class="nt">audit_cols</span><span class="p">:</span>
<a id="__codelineno-136-6" name="__codelineno-136-6" href="#__codelineno-136-6"></a><span class="w">    </span><span class="nt">created_col</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;dw_created_at&quot;</span>
<a id="__codelineno-136-7" name="__codelineno-136-7" href="#__codelineno-136-7"></a><span class="w">    </span><span class="nt">updated_col</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;dw_updated_at&quot;</span>
</code></pre></div></p>
<p><strong>Recipe 5: Full Sync (Insert + Update + Delete)</strong>
"Sync target with source: insert new, update changed, and remove soft-deleted."
<div class="highlight"><pre><span></span><code><a id="__codelineno-137-1" name="__codelineno-137-1" href="#__codelineno-137-1"></a><span class="nt">transformer</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;merge&quot;</span>
<a id="__codelineno-137-2" name="__codelineno-137-2" href="#__codelineno-137-2"></a><span class="nt">params</span><span class="p">:</span>
<a id="__codelineno-137-3" name="__codelineno-137-3" href="#__codelineno-137-3"></a><span class="w">  </span><span class="nt">target</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;silver.customers&quot;</span>
<a id="__codelineno-137-4" name="__codelineno-137-4" href="#__codelineno-137-4"></a><span class="w">  </span><span class="nt">keys</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;id&quot;</span><span class="p p-Indicator">]</span>
<a id="__codelineno-137-5" name="__codelineno-137-5" href="#__codelineno-137-5"></a><span class="w">  </span><span class="nt">strategy</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;upsert&quot;</span>
<a id="__codelineno-137-6" name="__codelineno-137-6" href="#__codelineno-137-6"></a><span class="w">  </span><span class="c1"># 1. Delete if source says so</span>
<a id="__codelineno-137-7" name="__codelineno-137-7" href="#__codelineno-137-7"></a><span class="w">  </span><span class="nt">delete_condition</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;source.is_deleted</span><span class="nv"> </span><span class="s">=</span><span class="nv"> </span><span class="s">true&quot;</span>
<a id="__codelineno-137-8" name="__codelineno-137-8" href="#__codelineno-137-8"></a><span class="w">  </span><span class="c1"># 2. Update if changed (and not deleted)</span>
<a id="__codelineno-137-9" name="__codelineno-137-9" href="#__codelineno-137-9"></a><span class="w">  </span><span class="nt">update_condition</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;source.hash</span><span class="nv"> </span><span class="s">!=</span><span class="nv"> </span><span class="s">target.hash&quot;</span>
<a id="__codelineno-137-10" name="__codelineno-137-10" href="#__codelineno-137-10"></a><span class="w">  </span><span class="c1"># 3. Insert new (and not deleted)</span>
<a id="__codelineno-137-11" name="__codelineno-137-11" href="#__codelineno-137-11"></a><span class="w">  </span><span class="nt">insert_condition</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;source.is_deleted</span><span class="nv"> </span><span class="s">=</span><span class="nv"> </span><span class="s">false&quot;</span>
</code></pre></div></p>
<p><strong>Recipe 6: Connection-based Path Resolution (ADLS)</strong>
"Use a connection to resolve paths, just like write config."
<div class="highlight"><pre><span></span><code><a id="__codelineno-138-1" name="__codelineno-138-1" href="#__codelineno-138-1"></a><span class="nt">transform</span><span class="p">:</span>
<a id="__codelineno-138-2" name="__codelineno-138-2" href="#__codelineno-138-2"></a><span class="w">  </span><span class="nt">steps</span><span class="p">:</span>
<a id="__codelineno-138-3" name="__codelineno-138-3" href="#__codelineno-138-3"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">function</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">merge</span>
<a id="__codelineno-138-4" name="__codelineno-138-4" href="#__codelineno-138-4"></a><span class="w">      </span><span class="nt">params</span><span class="p">:</span>
<a id="__codelineno-138-5" name="__codelineno-138-5" href="#__codelineno-138-5"></a><span class="w">        </span><span class="nt">connection</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">goat_prod</span>
<a id="__codelineno-138-6" name="__codelineno-138-6" href="#__codelineno-138-6"></a><span class="w">        </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">OEE/silver/customers</span>
<a id="__codelineno-138-7" name="__codelineno-138-7" href="#__codelineno-138-7"></a><span class="w">        </span><span class="nt">register_table</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">silver.customers</span>
<a id="__codelineno-138-8" name="__codelineno-138-8" href="#__codelineno-138-8"></a><span class="w">        </span><span class="nt">keys</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;customer_id&quot;</span><span class="p p-Indicator">]</span>
<a id="__codelineno-138-9" name="__codelineno-138-9" href="#__codelineno-138-9"></a><span class="w">        </span><span class="nt">strategy</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;upsert&quot;</span>
<a id="__codelineno-138-10" name="__codelineno-138-10" href="#__codelineno-138-10"></a><span class="w">        </span><span class="nt">audit_cols</span><span class="p">:</span>
<a id="__codelineno-138-11" name="__codelineno-138-11" href="#__codelineno-138-11"></a><span class="w">          </span><span class="nt">created_col</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;_created_at&quot;</span>
<a id="__codelineno-138-12" name="__codelineno-138-12" href="#__codelineno-138-12"></a><span class="w">          </span><span class="nt">updated_col</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;_updated_at&quot;</span>
</code></pre></div></p>
<p><strong>Strategies:</strong>
*   <strong>upsert</strong> (Default): Update existing records, insert new ones.
*   <strong>append_only</strong>: Ignore duplicates, only insert new keys.
*   <strong>delete_match</strong>: Delete records in target that match keys in source.</p>
<p><a href="#nodeconfig">Back to Catalog</a></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>target</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Target table name or full path (use this OR connection+path)</td>
</tr>
<tr>
<td><strong>connection</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Connection name to resolve path (use with 'path' param)</td>
</tr>
<tr>
<td><strong>path</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Relative path within connection (e.g., 'OEE/silver/customers')</td>
</tr>
<tr>
<td><strong>register_table</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Register as Unity Catalog/metastore table after merge (e.g., 'silver.customers')</td>
</tr>
<tr>
<td><strong>keys</strong></td>
<td>List[str]</td>
<td>Yes</td>
<td>-</td>
<td>List of join keys</td>
</tr>
<tr>
<td><strong>strategy</strong></td>
<td>MergeStrategy</td>
<td>No</td>
<td><code>MergeStrategy.UPSERT</code></td>
<td>Merge behavior: 'upsert', 'append_only', 'delete_match'</td>
</tr>
<tr>
<td><strong>audit_cols</strong></td>
<td>Optional[<a href="#auditcolumnsconfig">AuditColumnsConfig</a>]</td>
<td>No</td>
<td>-</td>
<td>{'created_col': '...', 'updated_col': '...'}</td>
</tr>
<tr>
<td><strong>optimize_write</strong></td>
<td>bool</td>
<td>No</td>
<td><code>False</code></td>
<td>Run OPTIMIZE after write (Spark)</td>
</tr>
<tr>
<td><strong>vacuum_hours</strong></td>
<td>Optional[int]</td>
<td>No</td>
<td>-</td>
<td>Hours to retain for VACUUM after merge (Spark only). Set to 168 for 7 days. None disables VACUUM.</td>
</tr>
<tr>
<td><strong>zorder_by</strong></td>
<td>Optional[List[str]]</td>
<td>No</td>
<td>-</td>
<td>Columns to Z-Order by</td>
</tr>
<tr>
<td><strong>cluster_by</strong></td>
<td>Optional[List[str]]</td>
<td>No</td>
<td>-</td>
<td>Columns to Liquid Cluster by (Delta)</td>
</tr>
<tr>
<td><strong>update_condition</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>SQL condition for update clause (e.g. 'source.ver &gt; target.ver')</td>
</tr>
<tr>
<td><strong>insert_condition</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>SQL condition for insert clause (e.g. 'source.status != "deleted"')</td>
</tr>
<tr>
<td><strong>delete_condition</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>SQL condition for delete clause (e.g. 'source.status = "deleted"')</td>
</tr>
<tr>
<td><strong>table_properties</strong></td>
<td>Optional[dict]</td>
<td>No</td>
<td>-</td>
<td>Delta table properties for initial table creation (e.g., column mapping)</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="scd2params"><code>scd2</code> (SCD2Params)<a class="headerlink" href="#scd2params" title="Permanent link">&para;</a></h4>
<p>Implements SCD Type 2 Logic.</p>
<p>Returns the FULL history dataset (to be written via Overwrite).</p>
<p>Parameters for SCD Type 2 (Slowly Changing Dimensions) transformer.</p>
<h3 id="the-time-machine-pattern">🕰️ The "Time Machine" Pattern<a class="headerlink" href="#the-time-machine-pattern" title="Permanent link">&para;</a></h3>
<p><strong>Business Problem:</strong>
"I need to know what the customer's address was <em>last month</em>, not just where they live now."</p>
<p><strong>The Solution:</strong>
SCD Type 2 tracks the full history of changes. Each record has an "effective window" (start/end dates) and a flag indicating if it is the current version.</p>
<p><strong>Recipe 1: Using table name</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-139-1" name="__codelineno-139-1" href="#__codelineno-139-1"></a><span class="nt">transformer</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;scd2&quot;</span>
<a id="__codelineno-139-2" name="__codelineno-139-2" href="#__codelineno-139-2"></a><span class="nt">params</span><span class="p">:</span>
<a id="__codelineno-139-3" name="__codelineno-139-3" href="#__codelineno-139-3"></a><span class="w">  </span><span class="nt">target</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;silver.dim_customers&quot;</span><span class="w">   </span><span class="c1"># Registered table name</span>
<a id="__codelineno-139-4" name="__codelineno-139-4" href="#__codelineno-139-4"></a><span class="w">  </span><span class="nt">keys</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;customer_id&quot;</span><span class="p p-Indicator">]</span>
<a id="__codelineno-139-5" name="__codelineno-139-5" href="#__codelineno-139-5"></a><span class="w">  </span><span class="nt">track_cols</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;address&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;tier&quot;</span><span class="p p-Indicator">]</span>
<a id="__codelineno-139-6" name="__codelineno-139-6" href="#__codelineno-139-6"></a><span class="w">  </span><span class="nt">effective_time_col</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;txn_date&quot;</span>
</code></pre></div></p>
<p><strong>Recipe 2: Using connection + path (ADLS)</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-140-1" name="__codelineno-140-1" href="#__codelineno-140-1"></a><span class="nt">transformer</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;scd2&quot;</span>
<a id="__codelineno-140-2" name="__codelineno-140-2" href="#__codelineno-140-2"></a><span class="nt">params</span><span class="p">:</span>
<a id="__codelineno-140-3" name="__codelineno-140-3" href="#__codelineno-140-3"></a><span class="w">  </span><span class="nt">connection</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">adls_prod</span><span class="w">            </span><span class="c1"># Connection name</span>
<a id="__codelineno-140-4" name="__codelineno-140-4" href="#__codelineno-140-4"></a><span class="w">  </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">OEE/silver/dim_customers</span><span class="w">   </span><span class="c1"># Relative path</span>
<a id="__codelineno-140-5" name="__codelineno-140-5" href="#__codelineno-140-5"></a><span class="w">  </span><span class="nt">keys</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;customer_id&quot;</span><span class="p p-Indicator">]</span>
<a id="__codelineno-140-6" name="__codelineno-140-6" href="#__codelineno-140-6"></a><span class="w">  </span><span class="nt">track_cols</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;address&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;tier&quot;</span><span class="p p-Indicator">]</span>
<a id="__codelineno-140-7" name="__codelineno-140-7" href="#__codelineno-140-7"></a><span class="w">  </span><span class="nt">effective_time_col</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;txn_date&quot;</span>
</code></pre></div></p>
<p><strong>How it works:</strong>
1. <strong>Match</strong>: Finds existing records using <code>keys</code>.
2. <strong>Compare</strong>: Checks <code>track_cols</code> to see if data changed.
3. <strong>Close</strong>: If changed, updates the old record's <code>valid_to</code> to the new effective time.
4. <strong>Insert</strong>: Adds a new record with <code>valid_from</code> (renamed from <code>effective_time_col</code>), <code>valid_to = NULL</code>, and <code>is_current = true</code>.</p>
<p><strong>Note:</strong> SCD2 is self-contained — it writes directly to the target table on all engines. No <code>write:</code> block is needed.</p>
<p><a href="#nodeconfig">Back to Catalog</a></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>target</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Target table name or full path (use this OR connection+path)</td>
</tr>
<tr>
<td><strong>connection</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Connection name to resolve path (use with 'path' param)</td>
</tr>
<tr>
<td><strong>path</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Relative path within connection (e.g., 'OEE/silver/dim_customers')</td>
</tr>
<tr>
<td><strong>keys</strong></td>
<td>List[str]</td>
<td>Yes</td>
<td>-</td>
<td>Natural keys to identify unique entities</td>
</tr>
<tr>
<td><strong>track_cols</strong></td>
<td>List[str]</td>
<td>Yes</td>
<td>-</td>
<td>Columns to monitor for changes</td>
</tr>
<tr>
<td><strong>effective_time_col</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>Source column indicating when the change occurred.</td>
</tr>
<tr>
<td><strong>start_time_col</strong></td>
<td>str</td>
<td>No</td>
<td><code>valid_from</code></td>
<td>Name of the start timestamp column in target. The effective_time_col is renamed to this.</td>
</tr>
<tr>
<td><strong>end_time_col</strong></td>
<td>str</td>
<td>No</td>
<td><code>valid_to</code></td>
<td>Name of the end timestamp column</td>
</tr>
<tr>
<td><strong>current_flag_col</strong></td>
<td>str</td>
<td>No</td>
<td><code>is_current</code></td>
<td>Name of the current record flag column</td>
</tr>
<tr>
<td><strong>delete_col</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Column indicating soft deletion (boolean)</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="manufacturing-iot">📂 Manufacturing &amp; IoT<a class="headerlink" href="#manufacturing-iot" title="Permanent link">&para;</a></h3>
<h4 id="phaseconfig">PhaseConfig<a class="headerlink" href="#phaseconfig" title="Permanent link">&para;</a></h4>
<p>Configuration for a single phase.</p>
<p><a href="#nodeconfig">Back to Catalog</a></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>timer_col</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>Timer column name for this phase</td>
</tr>
<tr>
<td><strong>start_threshold</strong></td>
<td>Optional[int]</td>
<td>No</td>
<td>-</td>
<td>Override default start threshold for this phase (seconds)</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="detectsequentialphasesparams"><code>detect_sequential_phases</code> (DetectSequentialPhasesParams)<a class="headerlink" href="#detectsequentialphasesparams" title="Permanent link">&para;</a></h4>
<p>Detect and analyze sequential manufacturing phases.</p>
<p>For each group (e.g., batch), this transformer:
1. Processes phases sequentially (each starts after previous ends)
2. Detects phase start by finding first valid timer reading and back-calculating
3. Detects phase end by finding first repeated (plateaued) timer value
4. Calculates time spent in each status during each phase
5. Aggregates specified metrics within each phase window
6. Outputs one summary row per group</p>
<p>Output columns per phase:
- {phase}<em status="status">start: Phase start timestamp
- {phase}_end: Phase end timestamp
- {phase}_max_minutes: Maximum timer value converted to minutes
- {phase}</em><em metric="metric">minutes: Time in each status (if status_col provided)
- {phase}</em>: Aggregated metrics (if phase_metrics provided)</p>
<p>Detect and analyze sequential manufacturing phases from timer columns.</p>
<p>This transformer processes raw sensor/PLC data where timer columns increment
during each phase. It detects phase boundaries, calculates durations, and
tracks time spent in each equipment status.</p>
<p>Common use cases:
- Batch reactor cycle analysis
- CIP (Clean-in-Place) phase timing
- Food processing (cook, cool, package cycles)
- Any multi-step batch process with PLC timers</p>
<p>Scenario: Analyze FBR cycle times
<div class="highlight"><pre><span></span><code><a id="__codelineno-141-1" name="__codelineno-141-1" href="#__codelineno-141-1"></a><span class="nt">detect_sequential_phases</span><span class="p">:</span>
<a id="__codelineno-141-2" name="__codelineno-141-2" href="#__codelineno-141-2"></a><span class="w">  </span><span class="nt">group_by</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">BatchID</span>
<a id="__codelineno-141-3" name="__codelineno-141-3" href="#__codelineno-141-3"></a><span class="w">  </span><span class="nt">timestamp_col</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ts</span>
<a id="__codelineno-141-4" name="__codelineno-141-4" href="#__codelineno-141-4"></a><span class="w">  </span><span class="nt">phases</span><span class="p">:</span>
<a id="__codelineno-141-5" name="__codelineno-141-5" href="#__codelineno-141-5"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">timer_col</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LoadTime</span>
<a id="__codelineno-141-6" name="__codelineno-141-6" href="#__codelineno-141-6"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">timer_col</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AcidTime</span>
<a id="__codelineno-141-7" name="__codelineno-141-7" href="#__codelineno-141-7"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">timer_col</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DryTime</span>
<a id="__codelineno-141-8" name="__codelineno-141-8" href="#__codelineno-141-8"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">timer_col</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CookTime</span>
<a id="__codelineno-141-9" name="__codelineno-141-9" href="#__codelineno-141-9"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">timer_col</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CoolTime</span>
<a id="__codelineno-141-10" name="__codelineno-141-10" href="#__codelineno-141-10"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">timer_col</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">UnloadTime</span>
<a id="__codelineno-141-11" name="__codelineno-141-11" href="#__codelineno-141-11"></a><span class="w">  </span><span class="nt">start_threshold</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">240</span>
<a id="__codelineno-141-12" name="__codelineno-141-12" href="#__codelineno-141-12"></a><span class="w">  </span><span class="nt">status_col</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Status</span>
<a id="__codelineno-141-13" name="__codelineno-141-13" href="#__codelineno-141-13"></a><span class="w">  </span><span class="nt">status_mapping</span><span class="p">:</span>
<a id="__codelineno-141-14" name="__codelineno-141-14" href="#__codelineno-141-14"></a><span class="w">    </span><span class="nt">1</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">idle</span>
<a id="__codelineno-141-15" name="__codelineno-141-15" href="#__codelineno-141-15"></a><span class="w">    </span><span class="nt">2</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">active</span>
<a id="__codelineno-141-16" name="__codelineno-141-16" href="#__codelineno-141-16"></a><span class="w">    </span><span class="nt">3</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">hold</span>
<a id="__codelineno-141-17" name="__codelineno-141-17" href="#__codelineno-141-17"></a><span class="w">    </span><span class="nt">4</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">faulted</span>
<a id="__codelineno-141-18" name="__codelineno-141-18" href="#__codelineno-141-18"></a><span class="w">  </span><span class="nt">phase_metrics</span><span class="p">:</span>
<a id="__codelineno-141-19" name="__codelineno-141-19" href="#__codelineno-141-19"></a><span class="w">    </span><span class="nt">Level</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">max</span>
<a id="__codelineno-141-20" name="__codelineno-141-20" href="#__codelineno-141-20"></a><span class="w">  </span><span class="nt">metadata</span><span class="p">:</span>
<a id="__codelineno-141-21" name="__codelineno-141-21" href="#__codelineno-141-21"></a><span class="w">    </span><span class="nt">ProductCode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">first_after_start</span>
<a id="__codelineno-141-22" name="__codelineno-141-22" href="#__codelineno-141-22"></a><span class="w">    </span><span class="nt">Weight</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">max</span>
</code></pre></div></p>
<p>Scenario: Group by multiple columns
<div class="highlight"><pre><span></span><code><a id="__codelineno-142-1" name="__codelineno-142-1" href="#__codelineno-142-1"></a><span class="nt">detect_sequential_phases</span><span class="p">:</span>
<a id="__codelineno-142-2" name="__codelineno-142-2" href="#__codelineno-142-2"></a><span class="w">  </span><span class="nt">group_by</span><span class="p">:</span>
<a id="__codelineno-142-3" name="__codelineno-142-3" href="#__codelineno-142-3"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">BatchID</span>
<a id="__codelineno-142-4" name="__codelineno-142-4" href="#__codelineno-142-4"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AssetID</span>
<a id="__codelineno-142-5" name="__codelineno-142-5" href="#__codelineno-142-5"></a><span class="w">  </span><span class="nt">phases</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">LoadTime</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">CookTime</span><span class="p p-Indicator">]</span>
</code></pre></div></p>
<p><a href="#nodeconfig">Back to Catalog</a></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>group_by</strong></td>
<td>str | List[str]</td>
<td>Yes</td>
<td>-</td>
<td>Column(s) to group by. Can be a single column name or list of columns. E.g., 'BatchID' or ['BatchID', 'AssetID']</td>
</tr>
<tr>
<td><strong>timestamp_col</strong></td>
<td>str</td>
<td>No</td>
<td><code>ts</code></td>
<td>Timestamp column for ordering events</td>
</tr>
<tr>
<td><strong>phases</strong></td>
<td>List[str | <a href="#phaseconfig">PhaseConfig</a>]</td>
<td>Yes</td>
<td>-</td>
<td>List of phase timer columns (strings) or PhaseConfig objects. Phases are processed sequentially - each phase starts after the previous ends.</td>
</tr>
<tr>
<td><strong>start_threshold</strong></td>
<td>int</td>
<td>No</td>
<td><code>240</code></td>
<td>Default max timer value (seconds) to consider as valid phase start. Filters out late readings where timer already shows large elapsed time.</td>
</tr>
<tr>
<td><strong>status_col</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Column containing equipment status codes</td>
</tr>
<tr>
<td><strong>status_mapping</strong></td>
<td>Optional[Dict[int, str]]</td>
<td>No</td>
<td>-</td>
<td 1:="1:" 2:="2:" 3:="3:" 4:="4:" _active_="'active'," _faulted_="'faulted'" _hold_="'hold'," _idle_="'idle',">Mapping of status codes to names. E.g.,</td>
</tr>
<tr>
<td><strong>phase_metrics</strong></td>
<td>Optional[Dict[str, str]]</td>
<td>No</td>
<td>-</td>
<td>Columns to aggregate within each phase window. E.g., {Level: max, Pressure: max}. Outputs {Phase}_{Column} columns.</td>
</tr>
<tr>
<td><strong>metadata</strong></td>
<td>Optional[Dict[str, str]]</td>
<td>No</td>
<td>-</td>
<td ProductCode:="ProductCode:" Weight:="Weight:" first_after_start_="first_after_start," max="max">Columns to include in output with aggregation method. Options: 'first', 'last', 'first_after_start', 'max', 'min', 'mean', 'sum'. E.g.,</td>
</tr>
<tr>
<td><strong>output_time_format</strong></td>
<td>str</td>
<td>No</td>
<td><code>%Y-%m-%d %H:%M:%S</code></td>
<td>Format for output timestamp columns</td>
</tr>
<tr>
<td><strong>fill_null_minutes</strong></td>
<td>bool</td>
<td>No</td>
<td><code>False</code></td>
<td>If True, fill null numeric columns (_max_minutes, _status_minutes, _metrics) with 0. Timestamp columns remain null for skipped phases.</td>
</tr>
<tr>
<td><strong>spark_native</strong></td>
<td>bool</td>
<td>No</td>
<td><code>False</code></td>
<td>If True, use native Spark window functions. If False (default), use applyInPandas which is often faster for datasets with many batches.</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="advanced-feature-engineering">📂 Advanced &amp; Feature Engineering<a class="headerlink" href="#advanced-feature-engineering" title="Permanent link">&para;</a></h3>
<h4 id="shiftdefinition">ShiftDefinition<a class="headerlink" href="#shiftdefinition" title="Permanent link">&para;</a></h4>
<p>Definition of a single shift.</p>
<p><a href="#nodeconfig">Back to Catalog</a></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>name</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>Name of the shift (e.g., 'Day', 'Night')</td>
</tr>
<tr>
<td><strong>start</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>Start time in HH:MM format (e.g., '06:00')</td>
</tr>
<tr>
<td><strong>end</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>End time in HH:MM format (e.g., '14:00')</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="deduplicateparams"><code>deduplicate</code> (DeduplicateParams)<a class="headerlink" href="#deduplicateparams" title="Permanent link">&para;</a></h4>
<p>Deduplicates data using Window functions.</p>
<p>Configuration for deduplication.</p>
<p>Scenario: Keep latest record
<div class="highlight"><pre><span></span><code><a id="__codelineno-143-1" name="__codelineno-143-1" href="#__codelineno-143-1"></a><span class="nt">deduplicate</span><span class="p">:</span>
<a id="__codelineno-143-2" name="__codelineno-143-2" href="#__codelineno-143-2"></a><span class="w">  </span><span class="nt">keys</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;id&quot;</span><span class="p p-Indicator">]</span>
<a id="__codelineno-143-3" name="__codelineno-143-3" href="#__codelineno-143-3"></a><span class="w">  </span><span class="nt">order_by</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;updated_at</span><span class="nv"> </span><span class="s">DESC&quot;</span>
</code></pre></div></p>
<p><a href="#nodeconfig">Back to Catalog</a></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>keys</strong></td>
<td>List[str]</td>
<td>Yes</td>
<td>-</td>
<td>List of columns to partition by (columns that define uniqueness)</td>
</tr>
<tr>
<td><strong>order_by</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>SQL Order by clause (e.g. 'updated_at DESC') to determine which record to keep (first one is kept)</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="dictmappingparams"><code>dict_based_mapping</code> (DictMappingParams)<a class="headerlink" href="#dictmappingparams" title="Permanent link">&para;</a></h4>
<p>Maps values in a column using a provided dictionary.</p>
<p>For each value in the specified column, replaces it with the mapped value.
If 'default' is provided, uses it for values not found in the mapping.
Supports Spark and Pandas engines.</p>
<p>Configuration for dictionary mapping.</p>
<p>Scenario: Map status codes to labels
<div class="highlight"><pre><span></span><code><a id="__codelineno-144-1" name="__codelineno-144-1" href="#__codelineno-144-1"></a><span class="nt">dict_based_mapping</span><span class="p">:</span>
<a id="__codelineno-144-2" name="__codelineno-144-2" href="#__codelineno-144-2"></a><span class="w">  </span><span class="nt">column</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;status_code&quot;</span>
<a id="__codelineno-144-3" name="__codelineno-144-3" href="#__codelineno-144-3"></a><span class="w">  </span><span class="nt">mapping</span><span class="p">:</span>
<a id="__codelineno-144-4" name="__codelineno-144-4" href="#__codelineno-144-4"></a><span class="w">    </span><span class="s">&quot;1&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;Active&quot;</span>
<a id="__codelineno-144-5" name="__codelineno-144-5" href="#__codelineno-144-5"></a><span class="w">    </span><span class="s">&quot;0&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;Inactive&quot;</span>
<a id="__codelineno-144-6" name="__codelineno-144-6" href="#__codelineno-144-6"></a><span class="w">  </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Unknown&quot;</span>
<a id="__codelineno-144-7" name="__codelineno-144-7" href="#__codelineno-144-7"></a><span class="w">  </span><span class="nt">output_column</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;status_desc&quot;</span>
</code></pre></div></p>
<p><a href="#nodeconfig">Back to Catalog</a></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>column</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>Column to map values from</td>
</tr>
<tr>
<td><strong>mapping</strong></td>
<td>Dict[str, str | int | float | bool]</td>
<td>Yes</td>
<td>-</td>
<td>Dictionary of source value -&gt; target value</td>
</tr>
<tr>
<td><strong>default</strong></td>
<td>str | int | float | bool</td>
<td>No</td>
<td>-</td>
<td>Default value if source value is not found in mapping</td>
</tr>
<tr>
<td><strong>output_column</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Name of output column. If not provided, overwrites source column.</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="explodeparams"><code>explode_list_column</code> (ExplodeParams)<a class="headerlink" href="#explodeparams" title="Permanent link">&para;</a></h4>
<p>Explodes a list/array column into multiple rows.</p>
<p>For each element in the specified list column, creates a new row.
If 'outer' is True, keeps rows with empty lists (like explode_outer).
Supports Spark and Pandas engines.</p>
<p>Configuration for exploding lists.</p>
<p>Scenario: Flatten list of items per order
<div class="highlight"><pre><span></span><code><a id="__codelineno-145-1" name="__codelineno-145-1" href="#__codelineno-145-1"></a><span class="nt">explode_list_column</span><span class="p">:</span>
<a id="__codelineno-145-2" name="__codelineno-145-2" href="#__codelineno-145-2"></a><span class="w">  </span><span class="nt">column</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;items&quot;</span>
<a id="__codelineno-145-3" name="__codelineno-145-3" href="#__codelineno-145-3"></a><span class="w">  </span><span class="nt">outer</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w">  </span><span class="c1"># Keep orders with empty items list</span>
</code></pre></div></p>
<p><a href="#nodeconfig">Back to Catalog</a></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>column</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>Column containing the list/array to explode</td>
</tr>
<tr>
<td><strong>outer</strong></td>
<td>bool</td>
<td>No</td>
<td><code>False</code></td>
<td>If True, keep rows with empty lists (explode_outer behavior). If False, drops them.</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="numerickeyparams"><code>generate_numeric_key</code> (NumericKeyParams)<a class="headerlink" href="#numerickeyparams" title="Permanent link">&para;</a></h4>
<p>Generates a deterministic BIGINT surrogate key from a hash of columns.</p>
<p>This is useful when:
- Unioning data from multiple sources
- Some sources have IDs, some don't
- You need stable numeric IDs for gold layer</p>
<p>The key is generated by:
1. Concatenating columns with separator
2. Computing MD5 hash
3. Converting first 15 hex chars to BIGINT</p>
<p>If coalesce_with is specified, keeps the existing value when not null.
If output_col == coalesce_with, the original column is replaced.</p>
<p>Configuration for numeric surrogate key generation.</p>
<p>Generates a deterministic BIGINT key from a hash of specified columns.
Useful when unioning data from multiple sources where some have IDs
and others don't.</p>
<p>Example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-146-1" name="__codelineno-146-1" href="#__codelineno-146-1"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">function</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">generate_numeric_key</span>
<a id="__codelineno-146-2" name="__codelineno-146-2" href="#__codelineno-146-2"></a><span class="w">  </span><span class="nt">params</span><span class="p">:</span>
<a id="__codelineno-146-3" name="__codelineno-146-3" href="#__codelineno-146-3"></a><span class="w">    </span><span class="nt">columns</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">DateID</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">store_id</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">reason_id</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">duration_min</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">notes</span><span class="p p-Indicator">]</span>
<a id="__codelineno-146-4" name="__codelineno-146-4" href="#__codelineno-146-4"></a><span class="w">    </span><span class="nt">output_col</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ID</span>
<a id="__codelineno-146-5" name="__codelineno-146-5" href="#__codelineno-146-5"></a><span class="w">    </span><span class="nt">coalesce_with</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ID</span><span class="w">  </span><span class="c1"># Keep existing ID if not null</span>
</code></pre></div></p>
<p>The generated key is:
- Deterministic: same input data = same ID every time
- BIGINT: large numeric space to avoid collisions
- Stable: safe for gold layer / incremental loads</p>
<p><a href="#nodeconfig">Back to Catalog</a></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>columns</strong></td>
<td>List[str]</td>
<td>Yes</td>
<td>-</td>
<td>Columns to combine for the key</td>
</tr>
<tr>
<td><strong>separator</strong></td>
<td>str</td>
<td>No</td>
<td><code>|</code></td>
<td>Separator between values</td>
</tr>
<tr>
<td><strong>output_col</strong></td>
<td>str</td>
<td>No</td>
<td><code>numeric_key</code></td>
<td>Name of the output column</td>
</tr>
<tr>
<td><strong>coalesce_with</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Existing column to coalesce with (keep existing value if not null)</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="surrogatekeyparams"><code>generate_surrogate_key</code> (SurrogateKeyParams)<a class="headerlink" href="#surrogatekeyparams" title="Permanent link">&para;</a></h4>
<p>Generates a deterministic surrogate key (MD5) from a combination of columns.
Handles NULLs by treating them as empty strings to ensure consistency.</p>
<p>Configuration for surrogate key generation.</p>
<p>Example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-147-1" name="__codelineno-147-1" href="#__codelineno-147-1"></a><span class="nt">generate_surrogate_key</span><span class="p">:</span>
<a id="__codelineno-147-2" name="__codelineno-147-2" href="#__codelineno-147-2"></a><span class="w">  </span><span class="nt">columns</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;region&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;product_id&quot;</span><span class="p p-Indicator">]</span>
<a id="__codelineno-147-3" name="__codelineno-147-3" href="#__codelineno-147-3"></a><span class="w">  </span><span class="nt">separator</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;-&quot;</span>
<a id="__codelineno-147-4" name="__codelineno-147-4" href="#__codelineno-147-4"></a><span class="w">  </span><span class="nt">output_col</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;unique_id&quot;</span>
</code></pre></div></p>
<p><a href="#nodeconfig">Back to Catalog</a></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>columns</strong></td>
<td>List[str]</td>
<td>Yes</td>
<td>-</td>
<td>Columns to combine for the key</td>
</tr>
<tr>
<td><strong>separator</strong></td>
<td>str</td>
<td>No</td>
<td><code>-</code></td>
<td>Separator between values</td>
</tr>
<tr>
<td><strong>output_col</strong></td>
<td>str</td>
<td>No</td>
<td><code>surrogate_key</code></td>
<td>Name of the output column</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="geocodeparams"><code>geocode</code> (GeocodeParams)<a class="headerlink" href="#geocodeparams" title="Permanent link">&para;</a></h4>
<p>Geocoding Stub.</p>
<p>Configuration for geocoding.</p>
<p>Example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-148-1" name="__codelineno-148-1" href="#__codelineno-148-1"></a><span class="nt">geocode</span><span class="p">:</span>
<a id="__codelineno-148-2" name="__codelineno-148-2" href="#__codelineno-148-2"></a><span class="w">  </span><span class="nt">address_col</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;full_address&quot;</span>
<a id="__codelineno-148-3" name="__codelineno-148-3" href="#__codelineno-148-3"></a><span class="w">  </span><span class="nt">output_col</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;lat_long&quot;</span>
</code></pre></div></p>
<p><a href="#nodeconfig">Back to Catalog</a></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>address_col</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>Column containing the address to geocode</td>
</tr>
<tr>
<td><strong>output_col</strong></td>
<td>str</td>
<td>No</td>
<td><code>lat_long</code></td>
<td>Name of the output column for coordinates</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="hashparams"><code>hash_columns</code> (HashParams)<a class="headerlink" href="#hashparams" title="Permanent link">&para;</a></h4>
<p>Hashes columns for PII/Anonymization.</p>
<p>Configuration for column hashing.</p>
<p>Example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-149-1" name="__codelineno-149-1" href="#__codelineno-149-1"></a><span class="nt">hash_columns</span><span class="p">:</span>
<a id="__codelineno-149-2" name="__codelineno-149-2" href="#__codelineno-149-2"></a><span class="w">  </span><span class="nt">columns</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;email&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;ssn&quot;</span><span class="p p-Indicator">]</span>
<a id="__codelineno-149-3" name="__codelineno-149-3" href="#__codelineno-149-3"></a><span class="w">  </span><span class="nt">algorithm</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sha256&quot;</span>
</code></pre></div></p>
<p><a href="#nodeconfig">Back to Catalog</a></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>columns</strong></td>
<td>List[str]</td>
<td>Yes</td>
<td>-</td>
<td>List of columns to hash</td>
</tr>
<tr>
<td><strong>algorithm</strong></td>
<td>HashAlgorithm</td>
<td>No</td>
<td><code>HashAlgorithm.SHA256</code></td>
<td>Hashing algorithm. Options: 'sha256', 'md5'</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="normalizejsonparams"><code>normalize_json</code> (NormalizeJsonParams)<a class="headerlink" href="#normalizejsonparams" title="Permanent link">&para;</a></h4>
<p>Flattens a nested JSON/Struct column.</p>
<p>Configuration for JSON normalization.</p>
<p>Example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-150-1" name="__codelineno-150-1" href="#__codelineno-150-1"></a><span class="nt">normalize_json</span><span class="p">:</span>
<a id="__codelineno-150-2" name="__codelineno-150-2" href="#__codelineno-150-2"></a><span class="w">  </span><span class="nt">column</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;json_data&quot;</span>
<a id="__codelineno-150-3" name="__codelineno-150-3" href="#__codelineno-150-3"></a><span class="w">  </span><span class="nt">sep</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;_&quot;</span>
</code></pre></div></p>
<p><a href="#nodeconfig">Back to Catalog</a></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>column</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>Column containing nested JSON/Struct</td>
</tr>
<tr>
<td><strong>sep</strong></td>
<td>str</td>
<td>No</td>
<td><code>_</code></td>
<td>Separator for nested fields (e.g., 'parent_child')</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="parsejsonparams"><code>parse_json</code> (ParseJsonParams)<a class="headerlink" href="#parsejsonparams" title="Permanent link">&para;</a></h4>
<p>Parses a JSON string column into a Struct/Map column.</p>
<p>Configuration for JSON parsing.</p>
<p>Example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-151-1" name="__codelineno-151-1" href="#__codelineno-151-1"></a><span class="nt">parse_json</span><span class="p">:</span>
<a id="__codelineno-151-2" name="__codelineno-151-2" href="#__codelineno-151-2"></a><span class="w">  </span><span class="nt">column</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;raw_json&quot;</span>
<a id="__codelineno-151-3" name="__codelineno-151-3" href="#__codelineno-151-3"></a><span class="w">  </span><span class="nt">json_schema</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;id</span><span class="nv"> </span><span class="s">INT,</span><span class="nv"> </span><span class="s">name</span><span class="nv"> </span><span class="s">STRING&quot;</span>
<a id="__codelineno-151-4" name="__codelineno-151-4" href="#__codelineno-151-4"></a><span class="w">  </span><span class="nt">output_col</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;parsed_struct&quot;</span>
</code></pre></div></p>
<p><a href="#nodeconfig">Back to Catalog</a></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>column</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>String column containing JSON</td>
</tr>
<tr>
<td><strong>json_schema</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>DDL schema string (e.g. 'a INT, b STRING') or Spark StructType DDL</td>
</tr>
<tr>
<td><strong>output_col</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>-</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="regexreplaceparams"><code>regex_replace</code> (RegexReplaceParams)<a class="headerlink" href="#regexreplaceparams" title="Permanent link">&para;</a></h4>
<p>Applies a regex replacement to a column.</p>
<p>Uses SQL-based REGEXP_REPLACE to replace all matches of the pattern in the specified column
with the given replacement string. Works on both Spark and DuckDB/Pandas engines.</p>
<p>Configuration for regex replacement.</p>
<p>Example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-152-1" name="__codelineno-152-1" href="#__codelineno-152-1"></a><span class="nt">regex_replace</span><span class="p">:</span>
<a id="__codelineno-152-2" name="__codelineno-152-2" href="#__codelineno-152-2"></a><span class="w">  </span><span class="nt">column</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;phone&quot;</span>
<a id="__codelineno-152-3" name="__codelineno-152-3" href="#__codelineno-152-3"></a><span class="w">  </span><span class="nt">pattern</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;[^0-9]&quot;</span>
<a id="__codelineno-152-4" name="__codelineno-152-4" href="#__codelineno-152-4"></a><span class="w">  </span><span class="nt">replacement</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
</code></pre></div></p>
<p><a href="#nodeconfig">Back to Catalog</a></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>column</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>Column to apply regex replacement on</td>
</tr>
<tr>
<td><strong>pattern</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>Regex pattern to match</td>
</tr>
<tr>
<td><strong>replacement</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>String to replace matches with</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="sessionizeparams"><code>sessionize</code> (SessionizeParams)<a class="headerlink" href="#sessionizeparams" title="Permanent link">&para;</a></h4>
<p>Assigns session IDs based on inactivity threshold.</p>
<p>Configuration for sessionization.</p>
<p>Example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-153-1" name="__codelineno-153-1" href="#__codelineno-153-1"></a><span class="nt">sessionize</span><span class="p">:</span>
<a id="__codelineno-153-2" name="__codelineno-153-2" href="#__codelineno-153-2"></a><span class="w">  </span><span class="nt">timestamp_col</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;event_time&quot;</span>
<a id="__codelineno-153-3" name="__codelineno-153-3" href="#__codelineno-153-3"></a><span class="w">  </span><span class="nt">user_col</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;user_id&quot;</span>
<a id="__codelineno-153-4" name="__codelineno-153-4" href="#__codelineno-153-4"></a><span class="w">  </span><span class="nt">threshold_seconds</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1800</span>
</code></pre></div></p>
<p><a href="#nodeconfig">Back to Catalog</a></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>timestamp_col</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>Timestamp column to calculate session duration from</td>
</tr>
<tr>
<td><strong>user_col</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>User identifier to partition sessions by</td>
</tr>
<tr>
<td><strong>threshold_seconds</strong></td>
<td>int</td>
<td>No</td>
<td><code>1800</code></td>
<td>Inactivity threshold in seconds (default: 30 minutes). If gap &gt; threshold, new session starts.</td>
</tr>
<tr>
<td><strong>session_col</strong></td>
<td>str</td>
<td>No</td>
<td><code>session_id</code></td>
<td>Output column name for the generated session ID</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="spliteventsbyperiodparams"><code>split_events_by_period</code> (SplitEventsByPeriodParams)<a class="headerlink" href="#spliteventsbyperiodparams" title="Permanent link">&para;</a></h4>
<p>Splits events that span multiple time periods into individual segments.</p>
<p>For events spanning multiple days/hours/shifts, this creates separate rows
for each period with adjusted start/end times and recalculated durations.</p>
<p>Configuration for splitting events that span multiple time periods.</p>
<p>Splits events that span multiple days, hours, or shifts into individual
segments per period. Useful for OEE/downtime analysis, billing, and
time-based aggregations.</p>
<p>Example - Split by day:
<div class="highlight"><pre><span></span><code><a id="__codelineno-154-1" name="__codelineno-154-1" href="#__codelineno-154-1"></a><span class="nt">split_events_by_period</span><span class="p">:</span>
<a id="__codelineno-154-2" name="__codelineno-154-2" href="#__codelineno-154-2"></a><span class="w">  </span><span class="nt">start_col</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Shutdown_Start_Time&quot;</span>
<a id="__codelineno-154-3" name="__codelineno-154-3" href="#__codelineno-154-3"></a><span class="w">  </span><span class="nt">end_col</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Shutdown_End_Time&quot;</span>
<a id="__codelineno-154-4" name="__codelineno-154-4" href="#__codelineno-154-4"></a><span class="w">  </span><span class="nt">period</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;day&quot;</span>
<a id="__codelineno-154-5" name="__codelineno-154-5" href="#__codelineno-154-5"></a><span class="w">  </span><span class="nt">duration_col</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Shutdown_Duration_Min&quot;</span>
</code></pre></div></p>
<p>Example - Split by shift:
<div class="highlight"><pre><span></span><code><a id="__codelineno-155-1" name="__codelineno-155-1" href="#__codelineno-155-1"></a><span class="nt">split_events_by_period</span><span class="p">:</span>
<a id="__codelineno-155-2" name="__codelineno-155-2" href="#__codelineno-155-2"></a><span class="w">  </span><span class="nt">start_col</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;event_start&quot;</span>
<a id="__codelineno-155-3" name="__codelineno-155-3" href="#__codelineno-155-3"></a><span class="w">  </span><span class="nt">end_col</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;event_end&quot;</span>
<a id="__codelineno-155-4" name="__codelineno-155-4" href="#__codelineno-155-4"></a><span class="w">  </span><span class="nt">period</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;shift&quot;</span>
<a id="__codelineno-155-5" name="__codelineno-155-5" href="#__codelineno-155-5"></a><span class="w">  </span><span class="nt">duration_col</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;duration_minutes&quot;</span>
<a id="__codelineno-155-6" name="__codelineno-155-6" href="#__codelineno-155-6"></a><span class="w">  </span><span class="nt">shifts</span><span class="p">:</span>
<a id="__codelineno-155-7" name="__codelineno-155-7" href="#__codelineno-155-7"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Day&quot;</span>
<a id="__codelineno-155-8" name="__codelineno-155-8" href="#__codelineno-155-8"></a><span class="w">      </span><span class="nt">start</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;06:00&quot;</span>
<a id="__codelineno-155-9" name="__codelineno-155-9" href="#__codelineno-155-9"></a><span class="w">      </span><span class="nt">end</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;14:00&quot;</span>
<a id="__codelineno-155-10" name="__codelineno-155-10" href="#__codelineno-155-10"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Swing&quot;</span>
<a id="__codelineno-155-11" name="__codelineno-155-11" href="#__codelineno-155-11"></a><span class="w">      </span><span class="nt">start</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;14:00&quot;</span>
<a id="__codelineno-155-12" name="__codelineno-155-12" href="#__codelineno-155-12"></a><span class="w">      </span><span class="nt">end</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;22:00&quot;</span>
<a id="__codelineno-155-13" name="__codelineno-155-13" href="#__codelineno-155-13"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Night&quot;</span>
<a id="__codelineno-155-14" name="__codelineno-155-14" href="#__codelineno-155-14"></a><span class="w">      </span><span class="nt">start</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;22:00&quot;</span>
<a id="__codelineno-155-15" name="__codelineno-155-15" href="#__codelineno-155-15"></a><span class="w">      </span><span class="nt">end</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;06:00&quot;</span>
</code></pre></div></p>
<p><a href="#nodeconfig">Back to Catalog</a></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>start_col</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>Column containing the event start timestamp</td>
</tr>
<tr>
<td><strong>end_col</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>Column containing the event end timestamp</td>
</tr>
<tr>
<td><strong>period</strong></td>
<td>str</td>
<td>No</td>
<td><code>day</code></td>
<td>Period type to split by: 'day', 'hour', or 'shift'</td>
</tr>
<tr>
<td><strong>duration_col</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Output column name for duration in minutes. If not set, no duration column is added.</td>
</tr>
<tr>
<td><strong>shifts</strong></td>
<td>Optional[List[<a href="#shiftdefinition">ShiftDefinition</a>]]</td>
<td>No</td>
<td>-</td>
<td>List of shift definitions (required when period='shift')</td>
</tr>
<tr>
<td><strong>shift_col</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td><code>shift_name</code></td>
<td>Output column name for shift name (only used when period='shift')</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="unpackstructparams"><code>unpack_struct</code> (UnpackStructParams)<a class="headerlink" href="#unpackstructparams" title="Permanent link">&para;</a></h4>
<p>Flattens a struct/dict column into top-level columns.</p>
<p>Configuration for unpacking structs.</p>
<p>Example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-156-1" name="__codelineno-156-1" href="#__codelineno-156-1"></a><span class="nt">unpack_struct</span><span class="p">:</span>
<a id="__codelineno-156-2" name="__codelineno-156-2" href="#__codelineno-156-2"></a><span class="w">  </span><span class="nt">column</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;user_info&quot;</span>
</code></pre></div></p>
<p><a href="#nodeconfig">Back to Catalog</a></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>column</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>Struct/Dictionary column to unpack/flatten into individual columns</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="validateandflagparams"><code>validate_and_flag</code> (ValidateAndFlagParams)<a class="headerlink" href="#validateandflagparams" title="Permanent link">&para;</a></h4>
<p>Validates rules and appends a column with a list/string of failed rule names.</p>
<p>Configuration for validation flagging.</p>
<p>Example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-157-1" name="__codelineno-157-1" href="#__codelineno-157-1"></a><span class="nt">validate_and_flag</span><span class="p">:</span>
<a id="__codelineno-157-2" name="__codelineno-157-2" href="#__codelineno-157-2"></a><span class="w">  </span><span class="nt">flag_col</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;data_issues&quot;</span>
<a id="__codelineno-157-3" name="__codelineno-157-3" href="#__codelineno-157-3"></a><span class="w">  </span><span class="nt">rules</span><span class="p">:</span>
<a id="__codelineno-157-4" name="__codelineno-157-4" href="#__codelineno-157-4"></a><span class="w">    </span><span class="nt">age_check</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;age</span><span class="nv"> </span><span class="s">&gt;=</span><span class="nv"> </span><span class="s">0&quot;</span>
<a id="__codelineno-157-5" name="__codelineno-157-5" href="#__codelineno-157-5"></a><span class="w">    </span><span class="nt">email_format</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;email</span><span class="nv"> </span><span class="s">LIKE</span><span class="nv"> </span><span class="s">&#39;%@%&#39;&quot;</span>
</code></pre></div></p>
<p><a href="#nodeconfig">Back to Catalog</a></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>rules</strong></td>
<td>Dict[str, str]</td>
<td>Yes</td>
<td>-</td>
<td>Map of rule name to SQL condition (must be TRUE)</td>
</tr>
<tr>
<td><strong>flag_col</strong></td>
<td>str</td>
<td>No</td>
<td><code>_issues</code></td>
<td>Name of the column to store failed rules</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="windowcalculationparams"><code>window_calculation</code> (WindowCalculationParams)<a class="headerlink" href="#windowcalculationparams" title="Permanent link">&para;</a></h4>
<p>Generic wrapper for Window functions.</p>
<p>Configuration for window functions.</p>
<p>Example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-158-1" name="__codelineno-158-1" href="#__codelineno-158-1"></a><span class="nt">window_calculation</span><span class="p">:</span>
<a id="__codelineno-158-2" name="__codelineno-158-2" href="#__codelineno-158-2"></a><span class="w">  </span><span class="nt">target_col</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;cumulative_sales&quot;</span>
<a id="__codelineno-158-3" name="__codelineno-158-3" href="#__codelineno-158-3"></a><span class="w">  </span><span class="nt">function</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sum(sales)&quot;</span>
<a id="__codelineno-158-4" name="__codelineno-158-4" href="#__codelineno-158-4"></a><span class="w">  </span><span class="nt">partition_by</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;region&quot;</span><span class="p p-Indicator">]</span>
<a id="__codelineno-158-5" name="__codelineno-158-5" href="#__codelineno-158-5"></a><span class="w">  </span><span class="nt">order_by</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;date</span><span class="nv"> </span><span class="s">ASC&quot;</span>
</code></pre></div></p>
<p><a href="#nodeconfig">Back to Catalog</a></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>target_col</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td><strong>function</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>Window function e.g. 'sum(amount)', 'rank()'</td>
</tr>
<tr>
<td><strong>partition_by</strong></td>
<td>List[str]</td>
<td>No</td>
<td><code>PydanticUndefined</code></td>
<td>-</td>
</tr>
<tr>
<td><strong>order_by</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>-</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="other-transformers">📂 Other Transformers<a class="headerlink" href="#other-transformers" title="Permanent link">&para;</a></h3>
<h4 id="conversionspec">ConversionSpec<a class="headerlink" href="#conversionspec" title="Permanent link">&para;</a></h4>
<p>Specification for a single unit conversion.</p>
<p><a href="#nodeconfig">Back to Catalog</a></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>from_unit</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>Source unit (e.g., 'psig', 'degF', 'BTU/lb')</td>
</tr>
<tr>
<td><strong>to</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>Target unit (e.g., 'bar', 'degC', 'kJ/kg')</td>
</tr>
<tr>
<td><strong>output</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Output column name. If not specified, overwrites the source column.</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="propertyoutputconfig">PropertyOutputConfig<a class="headerlink" href="#propertyoutputconfig" title="Permanent link">&para;</a></h4>
<p>Configuration for a single output property.</p>
<p><a href="#nodeconfig">Back to Catalog</a></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>property</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>CoolProp property key: H (enthalpy), S (entropy), D (density), C (specific heat Cp), CVMASS (Cv), V (viscosity), L (conductivity), T (temperature), P (pressure), Q (quality)</td>
</tr>
<tr>
<td><strong>unit</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Output unit for this property. If not specified, uses SI units.</td>
</tr>
<tr>
<td><strong>output_column</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Custom output column name. Defaults to {prefix}_{property}.</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="psychrometricoutputconfig">PsychrometricOutputConfig<a class="headerlink" href="#psychrometricoutputconfig" title="Permanent link">&para;</a></h4>
<p>Configuration for psychrometric output property.</p>
<p><a href="#nodeconfig">Back to Catalog</a></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>property</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>Property: W (humidity ratio), B (wet bulb), D (dew point), H (enthalpy), V (specific volume), R (relative humidity)</td>
</tr>
<tr>
<td><strong>unit</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Output unit</td>
</tr>
<tr>
<td><strong>output_column</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Custom output column name</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="fluidpropertiesparams"><code>fluid_properties</code> (FluidPropertiesParams)<a class="headerlink" href="#fluidpropertiesparams" title="Permanent link">&para;</a></h4>
<p>Calculate thermodynamic properties for any fluid using CoolProp.</p>
<p>Supports 122+ fluids including Water, Ammonia, R134a, Air, CO2, etc.
Uses IAPWS-IF97 formulation for water/steam calculations.</p>
<p>Engine parity: Pandas, Spark (via Pandas UDF), Polars</p>
<p>Configuration for fluid property calculations using CoolProp.</p>
<p>Supports 122+ fluids including Water, Ammonia, R134a, Air, CO2, etc.
See CoolProp documentation for full list: http://www.coolprop.org/fluid_properties/PurePseudoPure.html</p>
<p>State is defined by two independent properties. Common combinations:
- P + T (pressure + temperature) - subcooled/superheated regions
- P + Q (pressure + quality) - two-phase region
- P + H (pressure + enthalpy) - when enthalpy is known</p>
<p>Scenario: Calculate steam properties from pressure and temperature
<div class="highlight"><pre><span></span><code><a id="__codelineno-159-1" name="__codelineno-159-1" href="#__codelineno-159-1"></a><span class="nt">fluid_properties</span><span class="p">:</span>
<a id="__codelineno-159-2" name="__codelineno-159-2" href="#__codelineno-159-2"></a><span class="w">  </span><span class="nt">fluid</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Water</span>
<a id="__codelineno-159-3" name="__codelineno-159-3" href="#__codelineno-159-3"></a><span class="w">  </span><span class="nt">pressure_col</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">steam_pressure</span>
<a id="__codelineno-159-4" name="__codelineno-159-4" href="#__codelineno-159-4"></a><span class="w">  </span><span class="nt">temperature_col</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">steam_temp</span>
<a id="__codelineno-159-5" name="__codelineno-159-5" href="#__codelineno-159-5"></a><span class="w">  </span><span class="nt">pressure_unit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">psig</span>
<a id="__codelineno-159-6" name="__codelineno-159-6" href="#__codelineno-159-6"></a><span class="w">  </span><span class="nt">temperature_unit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">degF</span>
<a id="__codelineno-159-7" name="__codelineno-159-7" href="#__codelineno-159-7"></a><span class="w">  </span><span class="nt">gauge_offset</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">14.696</span>
<a id="__codelineno-159-8" name="__codelineno-159-8" href="#__codelineno-159-8"></a><span class="w">  </span><span class="nt">outputs</span><span class="p">:</span>
<a id="__codelineno-159-9" name="__codelineno-159-9" href="#__codelineno-159-9"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">property</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">H</span>
<a id="__codelineno-159-10" name="__codelineno-159-10" href="#__codelineno-159-10"></a><span class="w">      </span><span class="nt">unit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">BTU/lb</span>
<a id="__codelineno-159-11" name="__codelineno-159-11" href="#__codelineno-159-11"></a><span class="w">      </span><span class="nt">output_column</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">steam_enthalpy</span>
<a id="__codelineno-159-12" name="__codelineno-159-12" href="#__codelineno-159-12"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">property</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">S</span>
<a id="__codelineno-159-13" name="__codelineno-159-13" href="#__codelineno-159-13"></a><span class="w">      </span><span class="nt">unit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">BTU/(lb·R)</span>
<a id="__codelineno-159-14" name="__codelineno-159-14" href="#__codelineno-159-14"></a><span class="w">      </span><span class="nt">output_column</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">steam_entropy</span>
</code></pre></div></p>
<p>Scenario: Calculate saturated steam properties from pressure only
<div class="highlight"><pre><span></span><code><a id="__codelineno-160-1" name="__codelineno-160-1" href="#__codelineno-160-1"></a><span class="nt">fluid_properties</span><span class="p">:</span>
<a id="__codelineno-160-2" name="__codelineno-160-2" href="#__codelineno-160-2"></a><span class="w">  </span><span class="nt">fluid</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Water</span>
<a id="__codelineno-160-3" name="__codelineno-160-3" href="#__codelineno-160-3"></a><span class="w">  </span><span class="nt">pressure_col</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">steam_pressure</span>
<a id="__codelineno-160-4" name="__codelineno-160-4" href="#__codelineno-160-4"></a><span class="w">  </span><span class="nt">quality</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0</span><span class="w">  </span><span class="c1"># Saturated vapor</span>
<a id="__codelineno-160-5" name="__codelineno-160-5" href="#__codelineno-160-5"></a><span class="w">  </span><span class="nt">pressure_unit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">psia</span>
<a id="__codelineno-160-6" name="__codelineno-160-6" href="#__codelineno-160-6"></a><span class="w">  </span><span class="nt">outputs</span><span class="p">:</span>
<a id="__codelineno-160-7" name="__codelineno-160-7" href="#__codelineno-160-7"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">property</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">H</span>
<a id="__codelineno-160-8" name="__codelineno-160-8" href="#__codelineno-160-8"></a><span class="w">      </span><span class="nt">unit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">BTU/lb</span>
<a id="__codelineno-160-9" name="__codelineno-160-9" href="#__codelineno-160-9"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">property</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">T</span>
<a id="__codelineno-160-10" name="__codelineno-160-10" href="#__codelineno-160-10"></a><span class="w">      </span><span class="nt">unit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">degF</span>
</code></pre></div></p>
<p><a href="#nodeconfig">Back to Catalog</a></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>fluid</strong></td>
<td>str</td>
<td>No</td>
<td><code>Water</code></td>
<td>CoolProp fluid name (e.g., Water, Ammonia, R134a, Air, CO2)</td>
</tr>
<tr>
<td><strong>pressure_col</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Column containing pressure values</td>
</tr>
<tr>
<td><strong>temperature_col</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Column containing temperature values</td>
</tr>
<tr>
<td><strong>enthalpy_col</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Column containing enthalpy values</td>
</tr>
<tr>
<td><strong>quality_col</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Column containing quality values (0-1)</td>
</tr>
<tr>
<td><strong>pressure</strong></td>
<td>Optional[float]</td>
<td>No</td>
<td>-</td>
<td>Fixed pressure value</td>
</tr>
<tr>
<td><strong>temperature</strong></td>
<td>Optional[float]</td>
<td>No</td>
<td>-</td>
<td>Fixed temperature value</td>
</tr>
<tr>
<td><strong>enthalpy</strong></td>
<td>Optional[float]</td>
<td>No</td>
<td>-</td>
<td>Fixed enthalpy value (in input unit)</td>
</tr>
<tr>
<td><strong>quality</strong></td>
<td>Optional[float]</td>
<td>No</td>
<td>-</td>
<td>Fixed quality value (0=sat liquid, 1=sat vapor)</td>
</tr>
<tr>
<td><strong>pressure_unit</strong></td>
<td>str</td>
<td>No</td>
<td><code>Pa</code></td>
<td>Pressure unit: Pa, kPa, MPa, bar, psia, psig, atm</td>
</tr>
<tr>
<td><strong>temperature_unit</strong></td>
<td>str</td>
<td>No</td>
<td><code>K</code></td>
<td>Temperature unit: K, degC, degF, degR</td>
</tr>
<tr>
<td><strong>enthalpy_unit</strong></td>
<td>str</td>
<td>No</td>
<td><code>J/kg</code></td>
<td>Input enthalpy unit: J/kg, kJ/kg, BTU/lb</td>
</tr>
<tr>
<td><strong>gauge_offset</strong></td>
<td>float</td>
<td>No</td>
<td><code>14.696</code></td>
<td>Atmospheric pressure offset for psig (default 14.696 psia)</td>
</tr>
<tr>
<td><strong>outputs</strong></td>
<td>List[<a href="#propertyoutputconfig">PropertyOutputConfig</a>]</td>
<td>No</td>
<td><code>PydanticUndefined</code></td>
<td>List of properties to calculate with their units</td>
</tr>
<tr>
<td><strong>prefix</strong></td>
<td>str</td>
<td>No</td>
<td>-</td>
<td>Prefix for output column names (e.g., 'steam' -&gt; 'steam_H')</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="psychrometricsparams"><code>psychrometrics</code> (PsychrometricsParams)<a class="headerlink" href="#psychrometricsparams" title="Permanent link">&para;</a></h4>
<p>Calculate psychrometric (humid air) properties using CoolProp HAPropsSI.</p>
<p>Engine parity: Pandas, Spark (via Pandas UDF), Polars</p>
<p>Psychrometric (humid air) calculations using CoolProp HAPropsSI.</p>
<p>Calculates moist air properties from dry bulb temperature and one other
property (typically relative humidity or humidity ratio).</p>
<p>CoolProp property keys for humid air:
- W: Humidity ratio (kg water / kg dry air)
- B: Wet bulb temperature
- D: Dew point temperature
- H: Enthalpy (per kg dry air)
- V: Specific volume (per kg dry air)
- R: Relative humidity (0-1)
- T: Dry bulb temperature
- P: Total pressure</p>
<p>Scenario: Calculate humidity ratio from T and RH
<div class="highlight"><pre><span></span><code><a id="__codelineno-161-1" name="__codelineno-161-1" href="#__codelineno-161-1"></a><span class="nt">psychrometrics</span><span class="p">:</span>
<a id="__codelineno-161-2" name="__codelineno-161-2" href="#__codelineno-161-2"></a><span class="w">  </span><span class="nt">dry_bulb_col</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ambient_temp</span>
<a id="__codelineno-161-3" name="__codelineno-161-3" href="#__codelineno-161-3"></a><span class="w">  </span><span class="nt">relative_humidity_col</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rh_percent</span>
<a id="__codelineno-161-4" name="__codelineno-161-4" href="#__codelineno-161-4"></a><span class="w">  </span><span class="nt">temperature_unit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">degF</span>
<a id="__codelineno-161-5" name="__codelineno-161-5" href="#__codelineno-161-5"></a><span class="w">  </span><span class="nt">rh_is_percent</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id="__codelineno-161-6" name="__codelineno-161-6" href="#__codelineno-161-6"></a><span class="w">  </span><span class="nt">pressure_unit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">psia</span>
<a id="__codelineno-161-7" name="__codelineno-161-7" href="#__codelineno-161-7"></a><span class="w">  </span><span class="nt">elevation_ft</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">875</span>
<a id="__codelineno-161-8" name="__codelineno-161-8" href="#__codelineno-161-8"></a><span class="w">  </span><span class="nt">outputs</span><span class="p">:</span>
<a id="__codelineno-161-9" name="__codelineno-161-9" href="#__codelineno-161-9"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">property</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">W</span>
<a id="__codelineno-161-10" name="__codelineno-161-10" href="#__codelineno-161-10"></a><span class="w">      </span><span class="nt">unit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">lb/lb</span>
<a id="__codelineno-161-11" name="__codelineno-161-11" href="#__codelineno-161-11"></a><span class="w">      </span><span class="nt">output_column</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">humidity_ratio</span>
<a id="__codelineno-161-12" name="__codelineno-161-12" href="#__codelineno-161-12"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">property</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">B</span>
<a id="__codelineno-161-13" name="__codelineno-161-13" href="#__codelineno-161-13"></a><span class="w">      </span><span class="nt">unit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">degF</span>
<a id="__codelineno-161-14" name="__codelineno-161-14" href="#__codelineno-161-14"></a><span class="w">      </span><span class="nt">output_column</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">wet_bulb</span>
<a id="__codelineno-161-15" name="__codelineno-161-15" href="#__codelineno-161-15"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">property</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">D</span>
<a id="__codelineno-161-16" name="__codelineno-161-16" href="#__codelineno-161-16"></a><span class="w">      </span><span class="nt">unit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">degF</span>
<a id="__codelineno-161-17" name="__codelineno-161-17" href="#__codelineno-161-17"></a><span class="w">      </span><span class="nt">output_column</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dew_point</span>
</code></pre></div></p>
<p>Scenario: Calculate RH from temperature and humidity ratio
<div class="highlight"><pre><span></span><code><a id="__codelineno-162-1" name="__codelineno-162-1" href="#__codelineno-162-1"></a><span class="nt">psychrometrics</span><span class="p">:</span>
<a id="__codelineno-162-2" name="__codelineno-162-2" href="#__codelineno-162-2"></a><span class="w">  </span><span class="nt">dry_bulb_col</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">temp_f</span>
<a id="__codelineno-162-3" name="__codelineno-162-3" href="#__codelineno-162-3"></a><span class="w">  </span><span class="nt">humidity_ratio_col</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">w</span>
<a id="__codelineno-162-4" name="__codelineno-162-4" href="#__codelineno-162-4"></a><span class="w">  </span><span class="nt">temperature_unit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">degF</span>
<a id="__codelineno-162-5" name="__codelineno-162-5" href="#__codelineno-162-5"></a><span class="w">  </span><span class="nt">pressure</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">14.696</span>
<a id="__codelineno-162-6" name="__codelineno-162-6" href="#__codelineno-162-6"></a><span class="w">  </span><span class="nt">pressure_unit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">psia</span>
<a id="__codelineno-162-7" name="__codelineno-162-7" href="#__codelineno-162-7"></a><span class="w">  </span><span class="nt">outputs</span><span class="p">:</span>
<a id="__codelineno-162-8" name="__codelineno-162-8" href="#__codelineno-162-8"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">property</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">R</span>
<a id="__codelineno-162-9" name="__codelineno-162-9" href="#__codelineno-162-9"></a><span class="w">      </span><span class="nt">output_column</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">relative_humidity</span>
</code></pre></div></p>
<p><a href="#nodeconfig">Back to Catalog</a></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>dry_bulb_col</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>Column containing dry bulb temperature</td>
</tr>
<tr>
<td><strong>relative_humidity_col</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Column containing relative humidity</td>
</tr>
<tr>
<td><strong>humidity_ratio_col</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Column containing humidity ratio (kg/kg or lb/lb)</td>
</tr>
<tr>
<td><strong>wet_bulb_col</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Column containing wet bulb temperature</td>
</tr>
<tr>
<td><strong>dew_point_col</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Column containing dew point temperature</td>
</tr>
<tr>
<td><strong>relative_humidity</strong></td>
<td>Optional[float]</td>
<td>No</td>
<td>-</td>
<td>Fixed relative humidity</td>
</tr>
<tr>
<td><strong>humidity_ratio</strong></td>
<td>Optional[float]</td>
<td>No</td>
<td>-</td>
<td>Fixed humidity ratio</td>
</tr>
<tr>
<td><strong>pressure_col</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Column containing pressure</td>
</tr>
<tr>
<td><strong>pressure</strong></td>
<td>Optional[float]</td>
<td>No</td>
<td>-</td>
<td>Fixed pressure value</td>
</tr>
<tr>
<td><strong>elevation_ft</strong></td>
<td>Optional[float]</td>
<td>No</td>
<td>-</td>
<td>Elevation in feet (used to estimate pressure if not provided)</td>
</tr>
<tr>
<td><strong>elevation_m</strong></td>
<td>Optional[float]</td>
<td>No</td>
<td>-</td>
<td>Elevation in meters (used to estimate pressure if not provided)</td>
</tr>
<tr>
<td><strong>temperature_unit</strong></td>
<td>str</td>
<td>No</td>
<td><code>K</code></td>
<td>Temperature unit for all temps</td>
</tr>
<tr>
<td><strong>pressure_unit</strong></td>
<td>str</td>
<td>No</td>
<td><code>Pa</code></td>
<td>Pressure unit</td>
</tr>
<tr>
<td><strong>humidity_ratio_unit</strong></td>
<td>str</td>
<td>No</td>
<td><code>kg/kg</code></td>
<td>Humidity ratio unit (kg/kg, lb/lb, g/kg)</td>
</tr>
<tr>
<td><strong>rh_is_percent</strong></td>
<td>bool</td>
<td>No</td>
<td><code>False</code></td>
<td>If True, RH input is 0-100%, otherwise 0-1</td>
</tr>
<tr>
<td><strong>outputs</strong></td>
<td>List[<a href="#psychrometricoutputconfig">PsychrometricOutputConfig</a>]</td>
<td>No</td>
<td><code>PydanticUndefined</code></td>
<td>Properties to calculate</td>
</tr>
<tr>
<td><strong>prefix</strong></td>
<td>str</td>
<td>No</td>
<td>-</td>
<td>Prefix for output columns</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="saturationpropertiesparams"><code>saturation_properties</code> (SaturationPropertiesParams)<a class="headerlink" href="#saturationpropertiesparams" title="Permanent link">&para;</a></h4>
<p>Calculate saturated liquid or vapor properties.</p>
<p>Convenience wrapper that sets Q=0 (liquid) or Q=1 (vapor) automatically.</p>
<p>Convenience wrapper for saturated liquid (Q=0) or saturated vapor (Q=1) properties.</p>
<p>This is a simplified interface for common saturation calculations.</p>
<p>Scenario: Get saturated steam properties at a given pressure
<div class="highlight"><pre><span></span><code><a id="__codelineno-163-1" name="__codelineno-163-1" href="#__codelineno-163-1"></a><span class="nt">saturation_properties</span><span class="p">:</span>
<a id="__codelineno-163-2" name="__codelineno-163-2" href="#__codelineno-163-2"></a><span class="w">  </span><span class="nt">fluid</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Water</span>
<a id="__codelineno-163-3" name="__codelineno-163-3" href="#__codelineno-163-3"></a><span class="w">  </span><span class="nt">pressure_col</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">steam_pressure</span>
<a id="__codelineno-163-4" name="__codelineno-163-4" href="#__codelineno-163-4"></a><span class="w">  </span><span class="nt">pressure_unit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">psig</span>
<a id="__codelineno-163-5" name="__codelineno-163-5" href="#__codelineno-163-5"></a><span class="w">  </span><span class="nt">phase</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vapor</span>
<a id="__codelineno-163-6" name="__codelineno-163-6" href="#__codelineno-163-6"></a><span class="w">  </span><span class="nt">outputs</span><span class="p">:</span>
<a id="__codelineno-163-7" name="__codelineno-163-7" href="#__codelineno-163-7"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">property</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">H</span>
<a id="__codelineno-163-8" name="__codelineno-163-8" href="#__codelineno-163-8"></a><span class="w">      </span><span class="nt">unit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">BTU/lb</span>
<a id="__codelineno-163-9" name="__codelineno-163-9" href="#__codelineno-163-9"></a><span class="w">      </span><span class="nt">output_column</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">hg</span>
<a id="__codelineno-163-10" name="__codelineno-163-10" href="#__codelineno-163-10"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">property</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">T</span>
<a id="__codelineno-163-11" name="__codelineno-163-11" href="#__codelineno-163-11"></a><span class="w">      </span><span class="nt">unit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">degF</span>
<a id="__codelineno-163-12" name="__codelineno-163-12" href="#__codelineno-163-12"></a><span class="w">      </span><span class="nt">output_column</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sat_temp</span>
</code></pre></div></p>
<p>Scenario: Get saturated liquid enthalpy (hf)
<div class="highlight"><pre><span></span><code><a id="__codelineno-164-1" name="__codelineno-164-1" href="#__codelineno-164-1"></a><span class="nt">saturation_properties</span><span class="p">:</span>
<a id="__codelineno-164-2" name="__codelineno-164-2" href="#__codelineno-164-2"></a><span class="w">  </span><span class="nt">pressure_col</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pressure_psia</span>
<a id="__codelineno-164-3" name="__codelineno-164-3" href="#__codelineno-164-3"></a><span class="w">  </span><span class="nt">pressure_unit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">psia</span>
<a id="__codelineno-164-4" name="__codelineno-164-4" href="#__codelineno-164-4"></a><span class="w">  </span><span class="nt">phase</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">liquid</span>
<a id="__codelineno-164-5" name="__codelineno-164-5" href="#__codelineno-164-5"></a><span class="w">  </span><span class="nt">outputs</span><span class="p">:</span>
<a id="__codelineno-164-6" name="__codelineno-164-6" href="#__codelineno-164-6"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">property</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">H</span>
<a id="__codelineno-164-7" name="__codelineno-164-7" href="#__codelineno-164-7"></a><span class="w">      </span><span class="nt">unit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">BTU/lb</span>
<a id="__codelineno-164-8" name="__codelineno-164-8" href="#__codelineno-164-8"></a><span class="w">      </span><span class="nt">output_column</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">hf</span>
</code></pre></div></p>
<p><a href="#nodeconfig">Back to Catalog</a></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>fluid</strong></td>
<td>str</td>
<td>No</td>
<td><code>Water</code></td>
<td>CoolProp fluid name</td>
</tr>
<tr>
<td><strong>pressure_col</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Column containing pressure values</td>
</tr>
<tr>
<td><strong>pressure</strong></td>
<td>Optional[float]</td>
<td>No</td>
<td>-</td>
<td>Fixed pressure value</td>
</tr>
<tr>
<td><strong>temperature_col</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Column containing saturation temp</td>
</tr>
<tr>
<td><strong>temperature</strong></td>
<td>Optional[float]</td>
<td>No</td>
<td>-</td>
<td>Fixed saturation temperature</td>
</tr>
<tr>
<td><strong>pressure_unit</strong></td>
<td>str</td>
<td>No</td>
<td><code>Pa</code></td>
<td>Pressure unit</td>
</tr>
<tr>
<td><strong>temperature_unit</strong></td>
<td>str</td>
<td>No</td>
<td><code>K</code></td>
<td>Temperature unit</td>
</tr>
<tr>
<td><strong>gauge_offset</strong></td>
<td>float</td>
<td>No</td>
<td><code>14.696</code></td>
<td>Gauge pressure offset for psig</td>
</tr>
<tr>
<td><strong>phase</strong></td>
<td>Literal['liquid', 'vapor']</td>
<td>No</td>
<td><code>vapor</code></td>
<td>Phase: 'liquid' (Q=0) or 'vapor' (Q=1)</td>
</tr>
<tr>
<td><strong>outputs</strong></td>
<td>List[<a href="#propertyoutputconfig">PropertyOutputConfig</a>]</td>
<td>No</td>
<td><code>PydanticUndefined</code></td>
<td>Properties to calculate</td>
</tr>
<tr>
<td><strong>prefix</strong></td>
<td>str</td>
<td>No</td>
<td>-</td>
<td>Prefix for output columns</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="unitconvertparams"><code>unit_convert</code> (UnitConvertParams)<a class="headerlink" href="#unitconvertparams" title="Permanent link">&para;</a></h4>
<p>Convert columns from one unit to another.</p>
<p>Uses Pint for comprehensive unit conversion support. Handles all SI units,
imperial units, and common engineering units out of the box.</p>
<p>Engine parity: Pandas, Spark, Polars</p>
<p>Configuration for unit conversion transformer.</p>
<p>Converts columns from one unit to another using Pint's comprehensive
unit database. Supports all SI units, imperial units, and common
engineering units.</p>
<p>Scenario: Normalize sensor data to SI units
<div class="highlight"><pre><span></span><code><a id="__codelineno-165-1" name="__codelineno-165-1" href="#__codelineno-165-1"></a><span class="nt">unit_convert</span><span class="p">:</span>
<a id="__codelineno-165-2" name="__codelineno-165-2" href="#__codelineno-165-2"></a><span class="w">  </span><span class="nt">conversions</span><span class="p">:</span>
<a id="__codelineno-165-3" name="__codelineno-165-3" href="#__codelineno-165-3"></a><span class="w">    </span><span class="nt">pressure_psig</span><span class="p">:</span>
<a id="__codelineno-165-4" name="__codelineno-165-4" href="#__codelineno-165-4"></a><span class="w">      </span><span class="nt">from</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">psig</span>
<a id="__codelineno-165-5" name="__codelineno-165-5" href="#__codelineno-165-5"></a><span class="w">      </span><span class="nt">to</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bar</span>
<a id="__codelineno-165-6" name="__codelineno-165-6" href="#__codelineno-165-6"></a><span class="w">      </span><span class="nt">output</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pressure_bar</span>
<a id="__codelineno-165-7" name="__codelineno-165-7" href="#__codelineno-165-7"></a><span class="w">    </span><span class="nt">temperature_f</span><span class="p">:</span>
<a id="__codelineno-165-8" name="__codelineno-165-8" href="#__codelineno-165-8"></a><span class="w">      </span><span class="nt">from</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">degF</span>
<a id="__codelineno-165-9" name="__codelineno-165-9" href="#__codelineno-165-9"></a><span class="w">      </span><span class="nt">to</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">degC</span>
<a id="__codelineno-165-10" name="__codelineno-165-10" href="#__codelineno-165-10"></a><span class="w">      </span><span class="nt">output</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">temperature_c</span>
<a id="__codelineno-165-11" name="__codelineno-165-11" href="#__codelineno-165-11"></a><span class="w">    </span><span class="nt">flow_gpm</span><span class="p">:</span>
<a id="__codelineno-165-12" name="__codelineno-165-12" href="#__codelineno-165-12"></a><span class="w">      </span><span class="nt">from</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gpm</span>
<a id="__codelineno-165-13" name="__codelineno-165-13" href="#__codelineno-165-13"></a><span class="w">      </span><span class="nt">to</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">m³/s</span>
<a id="__codelineno-165-14" name="__codelineno-165-14" href="#__codelineno-165-14"></a><span class="w">      </span><span class="nt">output</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">flow_si</span>
</code></pre></div></p>
<p>Scenario: Convert in-place (overwrite original columns)
<div class="highlight"><pre><span></span><code><a id="__codelineno-166-1" name="__codelineno-166-1" href="#__codelineno-166-1"></a><span class="nt">unit_convert</span><span class="p">:</span>
<a id="__codelineno-166-2" name="__codelineno-166-2" href="#__codelineno-166-2"></a><span class="w">  </span><span class="nt">conversions</span><span class="p">:</span>
<a id="__codelineno-166-3" name="__codelineno-166-3" href="#__codelineno-166-3"></a><span class="w">    </span><span class="nt">pressure</span><span class="p">:</span>
<a id="__codelineno-166-4" name="__codelineno-166-4" href="#__codelineno-166-4"></a><span class="w">      </span><span class="nt">from</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">psia</span>
<a id="__codelineno-166-5" name="__codelineno-166-5" href="#__codelineno-166-5"></a><span class="w">      </span><span class="nt">to</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kPa</span>
<a id="__codelineno-166-6" name="__codelineno-166-6" href="#__codelineno-166-6"></a><span class="w">    </span><span class="nt">temperature</span><span class="p">:</span>
<a id="__codelineno-166-7" name="__codelineno-166-7" href="#__codelineno-166-7"></a><span class="w">      </span><span class="nt">from</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">degF</span>
<a id="__codelineno-166-8" name="__codelineno-166-8" href="#__codelineno-166-8"></a><span class="w">      </span><span class="nt">to</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">K</span>
</code></pre></div></p>
<p>Scenario: Handle gauge pressure with custom atmospheric reference
<div class="highlight"><pre><span></span><code><a id="__codelineno-167-1" name="__codelineno-167-1" href="#__codelineno-167-1"></a><span class="nt">unit_convert</span><span class="p">:</span>
<a id="__codelineno-167-2" name="__codelineno-167-2" href="#__codelineno-167-2"></a><span class="w">  </span><span class="nt">gauge_pressure_offset</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">14.696 psia</span>
<a id="__codelineno-167-3" name="__codelineno-167-3" href="#__codelineno-167-3"></a><span class="w">  </span><span class="nt">conversions</span><span class="p">:</span>
<a id="__codelineno-167-4" name="__codelineno-167-4" href="#__codelineno-167-4"></a><span class="w">    </span><span class="nt">steam_pressure</span><span class="p">:</span>
<a id="__codelineno-167-5" name="__codelineno-167-5" href="#__codelineno-167-5"></a><span class="w">      </span><span class="nt">from</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">psig</span>
<a id="__codelineno-167-6" name="__codelineno-167-6" href="#__codelineno-167-6"></a><span class="w">      </span><span class="nt">to</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">psia</span>
<a id="__codelineno-167-7" name="__codelineno-167-7" href="#__codelineno-167-7"></a><span class="w">      </span><span class="nt">output</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">steam_pressure_abs</span>
</code></pre></div></p>
<p>Scenario: Complex engineering units
<div class="highlight"><pre><span></span><code><a id="__codelineno-168-1" name="__codelineno-168-1" href="#__codelineno-168-1"></a><span class="nt">unit_convert</span><span class="p">:</span>
<a id="__codelineno-168-2" name="__codelineno-168-2" href="#__codelineno-168-2"></a><span class="w">  </span><span class="nt">conversions</span><span class="p">:</span>
<a id="__codelineno-168-3" name="__codelineno-168-3" href="#__codelineno-168-3"></a><span class="w">    </span><span class="nt">heat_transfer_coeff</span><span class="p">:</span>
<a id="__codelineno-168-4" name="__codelineno-168-4" href="#__codelineno-168-4"></a><span class="w">      </span><span class="nt">from</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">BTU/(hr * ft² * degF)</span>
<a id="__codelineno-168-5" name="__codelineno-168-5" href="#__codelineno-168-5"></a><span class="w">      </span><span class="nt">to</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">W/(m² * K)</span>
<a id="__codelineno-168-6" name="__codelineno-168-6" href="#__codelineno-168-6"></a><span class="w">      </span><span class="nt">output</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">htc_si</span>
<a id="__codelineno-168-7" name="__codelineno-168-7" href="#__codelineno-168-7"></a><span class="w">    </span><span class="nt">thermal_conductivity</span><span class="p">:</span>
<a id="__codelineno-168-8" name="__codelineno-168-8" href="#__codelineno-168-8"></a><span class="w">      </span><span class="nt">from</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">BTU/(hr * ft * degF)</span>
<a id="__codelineno-168-9" name="__codelineno-168-9" href="#__codelineno-168-9"></a><span class="w">      </span><span class="nt">to</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">W/(m * K)</span>
<a id="__codelineno-168-10" name="__codelineno-168-10" href="#__codelineno-168-10"></a><span class="w">      </span><span class="nt">output</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">k_si</span>
<a id="__codelineno-168-11" name="__codelineno-168-11" href="#__codelineno-168-11"></a><span class="w">    </span><span class="nt">specific_heat</span><span class="p">:</span>
<a id="__codelineno-168-12" name="__codelineno-168-12" href="#__codelineno-168-12"></a><span class="w">      </span><span class="nt">from</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">BTU/(lb * degF)</span>
<a id="__codelineno-168-13" name="__codelineno-168-13" href="#__codelineno-168-13"></a><span class="w">      </span><span class="nt">to</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kJ/(kg * K)</span>
<a id="__codelineno-168-14" name="__codelineno-168-14" href="#__codelineno-168-14"></a><span class="w">      </span><span class="nt">output</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cp_si</span>
</code></pre></div></p>
<p><a href="#nodeconfig">Back to Catalog</a></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>conversions</strong></td>
<td>Dict[str, <a href="#conversionspec">ConversionSpec</a>]</td>
<td>Yes</td>
<td>-</td>
<td>Mapping of source column names to conversion specifications</td>
</tr>
<tr>
<td><strong>gauge_pressure_offset</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td><code>14.696 psia</code></td>
<td>Atmospheric pressure for gauge-to-absolute conversions. Default is sea level (14.696 psia).</td>
</tr>
<tr>
<td><strong>errors</strong></td>
<td>str</td>
<td>No</td>
<td><code>null</code></td>
<td>How to handle conversion errors: 'null' (default), 'raise', or 'ignore'</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="semantic-layer">Semantic Layer<a class="headerlink" href="#semantic-layer" title="Permanent link">&para;</a></h2>
<h3 id="semantic-layer_1">Semantic Layer<a class="headerlink" href="#semantic-layer_1" title="Permanent link">&para;</a></h3>
<p>The semantic layer provides a unified interface for defining and querying business metrics.
Define metrics once, query them by name across dimensions.</p>
<p><strong>Core Components:</strong>
- <strong>MetricDefinition</strong>: Define aggregation expressions (SUM, COUNT, AVG)
- <strong>DimensionDefinition</strong>: Define grouping attributes with hierarchies
- <strong>MaterializationConfig</strong>: Pre-compute metrics at specific grain
- <strong>SemanticQuery</strong>: Execute queries like "revenue BY region, month"
- <strong>Project</strong>: Unified API that connects pipelines and semantic layer</p>
<p><strong>Unified Project API (Recommended):</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-169-1" name="__codelineno-169-1" href="#__codelineno-169-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">odibi</span><span class="w"> </span><span class="kn">import</span> <span class="n">Project</span>
<a id="__codelineno-169-2" name="__codelineno-169-2" href="#__codelineno-169-2"></a>
<a id="__codelineno-169-3" name="__codelineno-169-3" href="#__codelineno-169-3"></a><span class="n">project</span> <span class="o">=</span> <span class="n">Project</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;odibi.yaml&quot;</span><span class="p">)</span>
<a id="__codelineno-169-4" name="__codelineno-169-4" href="#__codelineno-169-4"></a><span class="n">result</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">&quot;revenue BY region&quot;</span><span class="p">)</span>
<a id="__codelineno-169-5" name="__codelineno-169-5" href="#__codelineno-169-5"></a><span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">df</span><span class="p">)</span>
</code></pre></div></p>
<p><strong>YAML Configuration:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-170-1" name="__codelineno-170-1" href="#__codelineno-170-1"></a><span class="nt">project</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_warehouse</span>
<a id="__codelineno-170-2" name="__codelineno-170-2" href="#__codelineno-170-2"></a><span class="nt">engine</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pandas</span>
<a id="__codelineno-170-3" name="__codelineno-170-3" href="#__codelineno-170-3"></a>
<a id="__codelineno-170-4" name="__codelineno-170-4" href="#__codelineno-170-4"></a><span class="nt">connections</span><span class="p">:</span>
<a id="__codelineno-170-5" name="__codelineno-170-5" href="#__codelineno-170-5"></a><span class="w">  </span><span class="nt">gold</span><span class="p">:</span>
<a id="__codelineno-170-6" name="__codelineno-170-6" href="#__codelineno-170-6"></a><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">delta</span>
<a id="__codelineno-170-7" name="__codelineno-170-7" href="#__codelineno-170-7"></a><span class="w">    </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/mnt/data/gold</span>
<a id="__codelineno-170-8" name="__codelineno-170-8" href="#__codelineno-170-8"></a>
<a id="__codelineno-170-9" name="__codelineno-170-9" href="#__codelineno-170-9"></a><span class="c1"># Semantic layer at project level</span>
<a id="__codelineno-170-10" name="__codelineno-170-10" href="#__codelineno-170-10"></a><span class="nt">semantic</span><span class="p">:</span>
<a id="__codelineno-170-11" name="__codelineno-170-11" href="#__codelineno-170-11"></a><span class="w">  </span><span class="nt">metrics</span><span class="p">:</span>
<a id="__codelineno-170-12" name="__codelineno-170-12" href="#__codelineno-170-12"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">revenue</span>
<a id="__codelineno-170-13" name="__codelineno-170-13" href="#__codelineno-170-13"></a><span class="w">      </span><span class="nt">expr</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;SUM(total_amount)&quot;</span>
<a id="__codelineno-170-14" name="__codelineno-170-14" href="#__codelineno-170-14"></a><span class="w">      </span><span class="nt">source</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gold.fact_orders</span><span class="w">    </span><span class="c1"># connection.table notation</span>
<a id="__codelineno-170-15" name="__codelineno-170-15" href="#__codelineno-170-15"></a><span class="w">      </span><span class="nt">filters</span><span class="p">:</span>
<a id="__codelineno-170-16" name="__codelineno-170-16" href="#__codelineno-170-16"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;status</span><span class="nv"> </span><span class="s">=</span><span class="nv"> </span><span class="s">&#39;completed&#39;&quot;</span>
<a id="__codelineno-170-17" name="__codelineno-170-17" href="#__codelineno-170-17"></a>
<a id="__codelineno-170-18" name="__codelineno-170-18" href="#__codelineno-170-18"></a><span class="w">  </span><span class="nt">dimensions</span><span class="p">:</span>
<a id="__codelineno-170-19" name="__codelineno-170-19" href="#__codelineno-170-19"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">region</span>
<a id="__codelineno-170-20" name="__codelineno-170-20" href="#__codelineno-170-20"></a><span class="w">      </span><span class="nt">source</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gold.dim_customer</span>
<a id="__codelineno-170-21" name="__codelineno-170-21" href="#__codelineno-170-21"></a><span class="w">      </span><span class="nt">column</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">region</span>
<a id="__codelineno-170-22" name="__codelineno-170-22" href="#__codelineno-170-22"></a>
<a id="__codelineno-170-23" name="__codelineno-170-23" href="#__codelineno-170-23"></a><span class="nt">materializations</span><span class="p">:</span>
<a id="__codelineno-170-24" name="__codelineno-170-24" href="#__codelineno-170-24"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">monthly_revenue</span>
<a id="__codelineno-170-25" name="__codelineno-170-25" href="#__codelineno-170-25"></a><span class="w">    </span><span class="nt">metrics</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">revenue</span><span class="p p-Indicator">]</span>
<a id="__codelineno-170-26" name="__codelineno-170-26" href="#__codelineno-170-26"></a><span class="w">    </span><span class="nt">dimensions</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">region</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">month</span><span class="p p-Indicator">]</span>
<a id="__codelineno-170-27" name="__codelineno-170-27" href="#__codelineno-170-27"></a><span class="w">    </span><span class="nt">output</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gold/agg_monthly_revenue</span>
</code></pre></div></p>
<p>The <code>source: gold.fact_orders</code> notation resolves paths automatically from connections.</p>
<hr />
<h3 id="dimensiondefinition"><code>DimensionDefinition</code><a class="headerlink" href="#dimensiondefinition" title="Permanent link">&para;</a></h3>
<blockquote>
<p><em>Used in: <a href="#semanticlayerconfig">SemanticLayerConfig</a></em></p>
</blockquote>
<p>Definition of a semantic dimension.</p>
<p>A dimension represents an attribute for grouping and filtering
metrics (e.g., date, product, region).</p>
<p>Attributes:
    name: Unique dimension identifier
    label: Display name for column alias in generated views. Defaults to name.
    source: Source table reference. Supports three formats:
        - <code>$pipeline.node</code> (recommended): e.g., <code>$build_warehouse.dim_customer</code>
        - <code>connection.path</code>: e.g., <code>gold.dim_customer</code> or <code>gold.dims/customer</code>
        - <code>table_name</code>: Uses default connection
    column: Column name in source (defaults to name)
    expr: Custom SQL expression. If provided, overrides column and grain.
        Example: "YEAR(DATEADD(month, 6, Date))" for fiscal year
    hierarchy: Optional ordered list of columns for drill-down
    description: Human-readable description
    grain: Time grain transformation (day, week, month, quarter, year).
        Ignored if expr is provided.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>name</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>Unique dimension identifier</td>
</tr>
<tr>
<td><strong>label</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Display name for column alias (defaults to name)</td>
</tr>
<tr>
<td><strong>source</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Source table reference. Formats: $pipeline.node (e.g., $build_warehouse.dim_customer), connection.path (e.g., gold.dim_customer or gold.dims/customer), or bare table_name</td>
</tr>
<tr>
<td><strong>column</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Column name (defaults to name)</td>
</tr>
<tr>
<td><strong>expr</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Custom SQL expression. Overrides column and grain. Example: YEAR(DATEADD(month, 6, Date)) for fiscal year</td>
</tr>
<tr>
<td><strong>hierarchy</strong></td>
<td>List[str]</td>
<td>No</td>
<td><code>PydanticUndefined</code></td>
<td>Drill-down hierarchy</td>
</tr>
<tr>
<td><strong>description</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Human-readable description</td>
</tr>
<tr>
<td><strong>grain</strong></td>
<td>Optional[TimeGrain]</td>
<td>No</td>
<td>-</td>
<td>Time grain transformation</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="materializationconfig"><code>MaterializationConfig</code><a class="headerlink" href="#materializationconfig" title="Permanent link">&para;</a></h3>
<blockquote>
<p><em>Used in: <a href="#semanticlayerconfig">SemanticLayerConfig</a></em></p>
</blockquote>
<p>Configuration for materializing metrics to a table.</p>
<p>Materialization pre-computes aggregated metrics at a specific
grain and persists them for faster querying.</p>
<p>Attributes:
    name: Unique materialization identifier
    metrics: List of metric names to include
    dimensions: List of dimension names (determines grain)
    output: Output table path
    schedule: Optional cron schedule for refresh
    incremental: Configuration for incremental refresh</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>name</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>Unique materialization identifier</td>
</tr>
<tr>
<td><strong>metrics</strong></td>
<td>List[str]</td>
<td>Yes</td>
<td>-</td>
<td>Metrics to materialize</td>
</tr>
<tr>
<td><strong>dimensions</strong></td>
<td>List[str]</td>
<td>Yes</td>
<td>-</td>
<td>Dimensions for grouping</td>
</tr>
<tr>
<td><strong>output</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>Output table path</td>
</tr>
<tr>
<td><strong>schedule</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Cron schedule</td>
</tr>
<tr>
<td><strong>incremental</strong></td>
<td>Optional[Dict[str, Any]]</td>
<td>No</td>
<td>-</td>
<td>Incremental refresh config</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="metricdefinition"><code>MetricDefinition</code><a class="headerlink" href="#metricdefinition" title="Permanent link">&para;</a></h3>
<blockquote>
<p><em>Used in: <a href="#semanticlayerconfig">SemanticLayerConfig</a></em></p>
</blockquote>
<p>Definition of a semantic metric.</p>
<p>A metric represents a measurable value that can be aggregated
across dimensions (e.g., revenue, order_count, avg_order_value).</p>
<p>Attributes:
    name: Unique metric identifier
    label: Display name for column alias in generated views. Defaults to name.
    description: Human-readable description
    expr: SQL aggregation expression (e.g., "SUM(total_amount)").
        Optional for derived metrics.
    source: Source table reference. Supports three formats:
        - <code>$pipeline.node</code> (recommended): e.g., <code>$build_warehouse.fact_orders</code>
        - <code>connection.path</code>: e.g., <code>gold.fact_orders</code> or <code>gold.oee/plant_a/metrics</code>
        - <code>table_name</code>: Uses default connection
    filters: Optional WHERE conditions to apply
    type: "simple" (direct aggregation) or "derived" (references other metrics)
    components: List of component metric names (required for derived metrics).
        These metrics must be additive (e.g., SUM-based) for correct
        recalculation at different grains.
    formula: Calculation formula using component names (required for derived).
        Example: "(total_revenue - total_cost) / total_revenue"</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>name</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>Unique metric identifier</td>
</tr>
<tr>
<td><strong>label</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Display name for column alias (defaults to name)</td>
</tr>
<tr>
<td><strong>description</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Human-readable description</td>
</tr>
<tr>
<td><strong>expr</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>SQL aggregation expression</td>
</tr>
<tr>
<td><strong>source</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Source table reference. Formats: $pipeline.node (e.g., $build_warehouse.fact_orders), connection.path (e.g., gold.fact_orders or gold.oee/plant_a/table), or bare table_name</td>
</tr>
<tr>
<td><strong>filters</strong></td>
<td>List[str]</td>
<td>No</td>
<td><code>PydanticUndefined</code></td>
<td>WHERE conditions</td>
</tr>
<tr>
<td><strong>type</strong></td>
<td>MetricType</td>
<td>No</td>
<td><code>MetricType.SIMPLE</code></td>
<td>Metric type</td>
</tr>
<tr>
<td><strong>components</strong></td>
<td>Optional[List[str]]</td>
<td>No</td>
<td>-</td>
<td>Component metric names for derived metrics</td>
</tr>
<tr>
<td><strong>formula</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Calculation formula using component names</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="semanticlayerconfig"><code>SemanticLayerConfig</code><a class="headerlink" href="#semanticlayerconfig" title="Permanent link">&para;</a></h3>
<p>Complete semantic layer configuration.</p>
<p>Contains all metrics, dimensions, materializations, and views
for a semantic layer deployment.</p>
<p>Attributes:
    metrics: List of metric definitions
    dimensions: List of dimension definitions
    materializations: List of materialization configurations
    views: List of view configurations</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>metrics</strong></td>
<td>List[<a href="#metricdefinition">MetricDefinition</a>]</td>
<td>No</td>
<td><code>PydanticUndefined</code></td>
<td>Metric definitions</td>
</tr>
<tr>
<td><strong>dimensions</strong></td>
<td>List[<a href="#dimensiondefinition">DimensionDefinition</a>]</td>
<td>No</td>
<td><code>PydanticUndefined</code></td>
<td>Dimension definitions</td>
</tr>
<tr>
<td><strong>materializations</strong></td>
<td>List[<a href="#materializationconfig">MaterializationConfig</a>]</td>
<td>No</td>
<td><code>PydanticUndefined</code></td>
<td>Materialization configs</td>
</tr>
<tr>
<td><strong>views</strong></td>
<td>List[<a href="#viewconfig">ViewConfig</a>]</td>
<td>No</td>
<td><code>PydanticUndefined</code></td>
<td>View configurations</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="fk-validation">FK Validation<a class="headerlink" href="#fk-validation" title="Permanent link">&para;</a></h2>
<h3 id="fk-validation_1">FK Validation<a class="headerlink" href="#fk-validation_1" title="Permanent link">&para;</a></h3>
<p>Declare and validate referential integrity between fact and dimension tables.</p>
<p><strong>Features:</strong>
- Declare relationships in YAML
- Validate FK constraints on fact load
- Detect orphan records
- Generate lineage from relationships</p>
<p><strong>Example:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-171-1" name="__codelineno-171-1" href="#__codelineno-171-1"></a><span class="nt">relationships</span><span class="p">:</span>
<a id="__codelineno-171-2" name="__codelineno-171-2" href="#__codelineno-171-2"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">orders_to_customers</span>
<a id="__codelineno-171-3" name="__codelineno-171-3" href="#__codelineno-171-3"></a><span class="w">    </span><span class="nt">fact</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fact_orders</span>
<a id="__codelineno-171-4" name="__codelineno-171-4" href="#__codelineno-171-4"></a><span class="w">    </span><span class="nt">dimension</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dim_customer</span>
<a id="__codelineno-171-5" name="__codelineno-171-5" href="#__codelineno-171-5"></a><span class="w">    </span><span class="nt">fact_key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">customer_sk</span>
<a id="__codelineno-171-6" name="__codelineno-171-6" href="#__codelineno-171-6"></a><span class="w">    </span><span class="nt">dimension_key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">customer_sk</span>
<a id="__codelineno-171-7" name="__codelineno-171-7" href="#__codelineno-171-7"></a><span class="w">    </span><span class="nt">on_violation</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">error</span>
</code></pre></div></p>
<hr />
<h3 id="relationshipconfig"><code>RelationshipConfig</code><a class="headerlink" href="#relationshipconfig" title="Permanent link">&para;</a></h3>
<blockquote>
<p><em>Used in: <a href="#relationshipregistry">RelationshipRegistry</a></em></p>
</blockquote>
<p>Configuration for a foreign key relationship.</p>
<p>Attributes:
    name: Unique relationship identifier
    fact: Fact table name
    dimension: Dimension table name
    fact_key: Foreign key column in fact table
    dimension_key: Primary/surrogate key column in dimension
    nullable: Whether nulls are allowed in fact_key
    on_violation: Action on violation ("warn", "error", "quarantine")</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>name</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>Unique relationship identifier</td>
</tr>
<tr>
<td><strong>fact</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>Fact table name</td>
</tr>
<tr>
<td><strong>dimension</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>Dimension table name</td>
</tr>
<tr>
<td><strong>fact_key</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>FK column in fact table</td>
</tr>
<tr>
<td><strong>dimension_key</strong></td>
<td>str</td>
<td>Yes</td>
<td>-</td>
<td>PK/SK column in dimension</td>
</tr>
<tr>
<td><strong>nullable</strong></td>
<td>bool</td>
<td>No</td>
<td><code>False</code></td>
<td>Allow nulls in fact_key</td>
</tr>
<tr>
<td><strong>on_violation</strong></td>
<td>str</td>
<td>No</td>
<td><code>error</code></td>
<td>Action on violation</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="relationshipregistry"><code>RelationshipRegistry</code><a class="headerlink" href="#relationshipregistry" title="Permanent link">&para;</a></h3>
<p>Registry of all declared relationships.</p>
<p>Attributes:
    relationships: List of relationship configurations</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>relationships</strong></td>
<td>List[<a href="#relationshipconfig">RelationshipConfig</a>]</td>
<td>No</td>
<td><code>PydanticUndefined</code></td>
<td>Relationship definitions</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="data-patterns">Data Patterns<a class="headerlink" href="#data-patterns" title="Permanent link">&para;</a></h2>
<h3 id="data-patterns_1">Data Patterns<a class="headerlink" href="#data-patterns_1" title="Permanent link">&para;</a></h3>
<p>Declarative patterns for common data warehouse building blocks. Patterns encapsulate
best practices for dimensional modeling, ensuring consistent implementation across
your data warehouse.</p>
<hr />
<h2 id="dimensionpattern">DimensionPattern<a class="headerlink" href="#dimensionpattern" title="Permanent link">&para;</a></h2>
<p>Build complete dimension tables with surrogate keys and SCD (Slowly Changing Dimension) support.</p>
<p><strong>When to Use:</strong>
- Building dimension tables from source systems (customers, products, locations)
- Need surrogate keys for star schema joins
- Need to track historical changes (SCD Type 2)</p>
<p><strong>Beginner Note:</strong>
Dimensions are the "who, what, where, when" of your data warehouse.
A customer dimension has customer_id (natural key) and customer_sk (surrogate key).
Fact tables join to dimensions via surrogate keys.</p>
<p><strong>See Also:</strong> <a href="#factpattern">FactPattern</a>, <a href="#datedimensionpattern">DateDimensionPattern</a></p>
<p><strong>Features:</strong>
- Auto-generate integer surrogate keys (MAX(existing) + ROW_NUMBER)
- SCD Type 0 (static), 1 (overwrite), 2 (history tracking)
- Optional unknown member row (SK=0) for orphan FK handling
- Audit columns (load_timestamp, source_system)</p>
<p><strong>Params:</strong></p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>natural_key</code></td>
<td>str</td>
<td>Yes</td>
<td>Natural/business key column name</td>
</tr>
<tr>
<td><code>surrogate_key</code></td>
<td>str</td>
<td>Yes</td>
<td>Surrogate key column name to generate</td>
</tr>
<tr>
<td><code>scd_type</code></td>
<td>int</td>
<td>No</td>
<td>0=static, 1=overwrite, 2=history (default: 1)</td>
</tr>
<tr>
<td><code>track_cols</code></td>
<td>list</td>
<td>SCD1/2</td>
<td>Columns to track for change detection</td>
</tr>
<tr>
<td><code>target</code></td>
<td>str</td>
<td>SCD2</td>
<td>Target table path to read existing history</td>
</tr>
<tr>
<td><code>unknown_member</code></td>
<td>bool</td>
<td>No</td>
<td>Insert row with SK=0 for orphan handling</td>
</tr>
<tr>
<td><code>audit.load_timestamp</code></td>
<td>bool</td>
<td>No</td>
<td>Add load_timestamp column</td>
</tr>
<tr>
<td><code>audit.source_system</code></td>
<td>str</td>
<td>No</td>
<td>Add source_system column with value</td>
</tr>
</tbody>
</table>
<p><strong>Supported Target Formats:</strong>
- Spark: catalog.table, Delta paths, .parquet, .csv, .json, .orc
- Pandas: .parquet, .csv, .json, .xlsx, .feather, .pickle</p>
<p><strong>Example:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-172-1" name="__codelineno-172-1" href="#__codelineno-172-1"></a><span class="nt">pattern</span><span class="p">:</span>
<a id="__codelineno-172-2" name="__codelineno-172-2" href="#__codelineno-172-2"></a><span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dimension</span>
<a id="__codelineno-172-3" name="__codelineno-172-3" href="#__codelineno-172-3"></a><span class="w">  </span><span class="nt">params</span><span class="p">:</span>
<a id="__codelineno-172-4" name="__codelineno-172-4" href="#__codelineno-172-4"></a><span class="w">    </span><span class="nt">natural_key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">customer_id</span>
<a id="__codelineno-172-5" name="__codelineno-172-5" href="#__codelineno-172-5"></a><span class="w">    </span><span class="nt">surrogate_key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">customer_sk</span>
<a id="__codelineno-172-6" name="__codelineno-172-6" href="#__codelineno-172-6"></a><span class="w">    </span><span class="nt">scd_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<a id="__codelineno-172-7" name="__codelineno-172-7" href="#__codelineno-172-7"></a><span class="w">    </span><span class="nt">track_cols</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">name</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">email</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">address</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">city</span><span class="p p-Indicator">]</span>
<a id="__codelineno-172-8" name="__codelineno-172-8" href="#__codelineno-172-8"></a><span class="w">    </span><span class="nt">target</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">warehouse.dim_customer</span>
<a id="__codelineno-172-9" name="__codelineno-172-9" href="#__codelineno-172-9"></a><span class="w">    </span><span class="nt">unknown_member</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id="__codelineno-172-10" name="__codelineno-172-10" href="#__codelineno-172-10"></a><span class="w">    </span><span class="nt">audit</span><span class="p">:</span>
<a id="__codelineno-172-11" name="__codelineno-172-11" href="#__codelineno-172-11"></a><span class="w">      </span><span class="nt">load_timestamp</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id="__codelineno-172-12" name="__codelineno-172-12" href="#__codelineno-172-12"></a><span class="w">      </span><span class="nt">source_system</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;crm&quot;</span>
</code></pre></div></p>
<hr />
<h2 id="datedimensionpattern">DateDimensionPattern<a class="headerlink" href="#datedimensionpattern" title="Permanent link">&para;</a></h2>
<p>Generate a complete date dimension table with pre-calculated attributes for BI/reporting.</p>
<p><strong>When to Use:</strong>
- Every data warehouse needs a date dimension for time-based analytics
- Enable date filtering, grouping by week/month/quarter, fiscal year reporting</p>
<p><strong>Beginner Note:</strong>
The date dimension is foundational for any BI/reporting system.
It lets you query "sales by month" or "orders in fiscal Q2" without complex date calculations.</p>
<p><strong>See Also:</strong> <a href="#dimensionpattern">DimensionPattern</a></p>
<p><strong>Features:</strong>
- Generates all dates in a range with rich attributes
- Calendar and fiscal year support
- ISO week numbering
- Weekend/month-end flags</p>
<p><strong>Params:</strong></p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>start_date</code></td>
<td>str</td>
<td>Yes</td>
<td>Start date (YYYY-MM-DD)</td>
</tr>
<tr>
<td><code>end_date</code></td>
<td>str</td>
<td>Yes</td>
<td>End date (YYYY-MM-DD)</td>
</tr>
<tr>
<td><code>date_key_format</code></td>
<td>str</td>
<td>No</td>
<td>Format for date_sk (default: yyyyMMdd)</td>
</tr>
<tr>
<td><code>fiscal_year_start_month</code></td>
<td>int</td>
<td>No</td>
<td>Month fiscal year starts (1-12, default: 1)</td>
</tr>
<tr>
<td><code>unknown_member</code></td>
<td>bool</td>
<td>No</td>
<td>Add unknown date row with date_sk=0</td>
</tr>
</tbody>
</table>
<p><strong>Generated Columns:</strong>
<code>date_sk</code>, <code>full_date</code>, <code>day_of_week</code>, <code>day_of_week_num</code>, <code>day_of_month</code>,
<code>day_of_year</code>, <code>is_weekend</code>, <code>week_of_year</code>, <code>month</code>, <code>month_name</code>, <code>quarter</code>,
<code>quarter_name</code>, <code>year</code>, <code>fiscal_year</code>, <code>fiscal_quarter</code>, <code>is_month_start</code>,
<code>is_month_end</code>, <code>is_year_start</code>, <code>is_year_end</code></p>
<p><strong>Example:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-173-1" name="__codelineno-173-1" href="#__codelineno-173-1"></a><span class="nt">pattern</span><span class="p">:</span>
<a id="__codelineno-173-2" name="__codelineno-173-2" href="#__codelineno-173-2"></a><span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">date_dimension</span>
<a id="__codelineno-173-3" name="__codelineno-173-3" href="#__codelineno-173-3"></a><span class="w">  </span><span class="nt">params</span><span class="p">:</span>
<a id="__codelineno-173-4" name="__codelineno-173-4" href="#__codelineno-173-4"></a><span class="w">    </span><span class="nt">start_date</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2020-01-01&quot;</span>
<a id="__codelineno-173-5" name="__codelineno-173-5" href="#__codelineno-173-5"></a><span class="w">    </span><span class="nt">end_date</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2030-12-31&quot;</span>
<a id="__codelineno-173-6" name="__codelineno-173-6" href="#__codelineno-173-6"></a><span class="w">    </span><span class="nt">fiscal_year_start_month</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">7</span>
<a id="__codelineno-173-7" name="__codelineno-173-7" href="#__codelineno-173-7"></a><span class="w">    </span><span class="nt">unknown_member</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div></p>
<hr />
<h2 id="factpattern">FactPattern<a class="headerlink" href="#factpattern" title="Permanent link">&para;</a></h2>
<p>Build fact tables with automatic surrogate key lookups from dimensions.</p>
<p><strong>When to Use:</strong>
- Building fact tables from transactional data (orders, events, transactions)
- Need to look up surrogate keys from dimension tables
- Need to handle orphan records (missing dimension matches)</p>
<p><strong>Beginner Note:</strong>
Facts are the "how much, how many" of your data warehouse.
An orders fact has measures (quantity, revenue) and dimension keys (customer_sk, product_sk).
The pattern automatically looks up SKs from dimensions.</p>
<p><strong>See Also:</strong> <a href="#dimensionpattern">DimensionPattern</a>, <a href="#quarantineconfig">QuarantineConfig</a></p>
<p><strong>Features:</strong>
- Automatic SK lookups from dimension tables (with SCD2 current-record filtering)
- Orphan handling: unknown (SK=0), reject (error), quarantine (route to table)
- Grain validation (detect duplicates)
- Calculated measures and column renaming
- Audit columns</p>
<p><strong>Params:</strong></p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>grain</code></td>
<td>list</td>
<td>No</td>
<td>Columns defining uniqueness (validates no duplicates)</td>
</tr>
<tr>
<td><code>dimensions</code></td>
<td>list</td>
<td>No</td>
<td>Dimension lookup configurations (see below)</td>
</tr>
<tr>
<td><code>orphan_handling</code></td>
<td>str</td>
<td>No</td>
<td>"unknown" | "reject" | "quarantine" (default: unknown)</td>
</tr>
<tr>
<td><code>quarantine</code></td>
<td>dict</td>
<td>quarantine</td>
<td>Quarantine config (see below)</td>
</tr>
<tr>
<td><code>measures</code></td>
<td>list</td>
<td>No</td>
<td>Measure definitions (passthrough, rename, or calculated)</td>
</tr>
<tr>
<td><code>deduplicate</code></td>
<td>bool</td>
<td>No</td>
<td>Remove duplicates before processing</td>
</tr>
<tr>
<td><code>keys</code></td>
<td>list</td>
<td>dedupe</td>
<td>Keys for deduplication</td>
</tr>
<tr>
<td><code>audit.load_timestamp</code></td>
<td>bool</td>
<td>No</td>
<td>Add load_timestamp column</td>
</tr>
<tr>
<td><code>audit.source_system</code></td>
<td>str</td>
<td>No</td>
<td>Add source_system column</td>
</tr>
</tbody>
</table>
<p><strong>Dimension Lookup Config:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-174-1" name="__codelineno-174-1" href="#__codelineno-174-1"></a><span class="nt">dimensions</span><span class="p">:</span>
<a id="__codelineno-174-2" name="__codelineno-174-2" href="#__codelineno-174-2"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">source_column</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">customer_id</span><span class="w">      </span><span class="c1"># Column in source fact</span>
<a id="__codelineno-174-3" name="__codelineno-174-3" href="#__codelineno-174-3"></a><span class="w">    </span><span class="nt">dimension_table</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dim_customer</span><span class="w">   </span><span class="c1"># Dimension in context</span>
<a id="__codelineno-174-4" name="__codelineno-174-4" href="#__codelineno-174-4"></a><span class="w">    </span><span class="nt">dimension_key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">customer_id</span><span class="w">      </span><span class="c1"># Natural key in dimension</span>
<a id="__codelineno-174-5" name="__codelineno-174-5" href="#__codelineno-174-5"></a><span class="w">    </span><span class="nt">surrogate_key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">customer_sk</span><span class="w">      </span><span class="c1"># SK to retrieve</span>
<a id="__codelineno-174-6" name="__codelineno-174-6" href="#__codelineno-174-6"></a><span class="w">    </span><span class="nt">scd2</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w">                      </span><span class="c1"># Filter is_current=true</span>
</code></pre></div></p>
<p><strong>Quarantine Config (for orphan_handling: quarantine):</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-175-1" name="__codelineno-175-1" href="#__codelineno-175-1"></a><span class="nt">quarantine</span><span class="p">:</span>
<a id="__codelineno-175-2" name="__codelineno-175-2" href="#__codelineno-175-2"></a><span class="w">  </span><span class="nt">connection</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">silver</span><span class="w">                </span><span class="c1"># Required: connection name</span>
<a id="__codelineno-175-3" name="__codelineno-175-3" href="#__codelineno-175-3"></a><span class="w">  </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fact_orders_orphans</span><span class="w">         </span><span class="c1"># OR table: quarantine_table</span>
<a id="__codelineno-175-4" name="__codelineno-175-4" href="#__codelineno-175-4"></a><span class="w">  </span><span class="nt">add_columns</span><span class="p">:</span>
<a id="__codelineno-175-5" name="__codelineno-175-5" href="#__codelineno-175-5"></a><span class="w">    </span><span class="nt">_rejection_reason</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w">         </span><span class="c1"># Add rejection reason</span>
<a id="__codelineno-175-6" name="__codelineno-175-6" href="#__codelineno-175-6"></a><span class="w">    </span><span class="nt">_rejected_at</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w">              </span><span class="c1"># Add rejection timestamp</span>
<a id="__codelineno-175-7" name="__codelineno-175-7" href="#__codelineno-175-7"></a><span class="w">    </span><span class="nt">_source_dimension</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w">         </span><span class="c1"># Add dimension name</span>
</code></pre></div></p>
<p><strong>Example:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-176-1" name="__codelineno-176-1" href="#__codelineno-176-1"></a><span class="nt">pattern</span><span class="p">:</span>
<a id="__codelineno-176-2" name="__codelineno-176-2" href="#__codelineno-176-2"></a><span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fact</span>
<a id="__codelineno-176-3" name="__codelineno-176-3" href="#__codelineno-176-3"></a><span class="w">  </span><span class="nt">params</span><span class="p">:</span>
<a id="__codelineno-176-4" name="__codelineno-176-4" href="#__codelineno-176-4"></a><span class="w">    </span><span class="nt">grain</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">order_id</span><span class="p p-Indicator">]</span>
<a id="__codelineno-176-5" name="__codelineno-176-5" href="#__codelineno-176-5"></a><span class="w">    </span><span class="nt">dimensions</span><span class="p">:</span>
<a id="__codelineno-176-6" name="__codelineno-176-6" href="#__codelineno-176-6"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">source_column</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">customer_id</span>
<a id="__codelineno-176-7" name="__codelineno-176-7" href="#__codelineno-176-7"></a><span class="w">        </span><span class="nt">dimension_table</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dim_customer</span>
<a id="__codelineno-176-8" name="__codelineno-176-8" href="#__codelineno-176-8"></a><span class="w">        </span><span class="nt">dimension_key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">customer_id</span>
<a id="__codelineno-176-9" name="__codelineno-176-9" href="#__codelineno-176-9"></a><span class="w">        </span><span class="nt">surrogate_key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">customer_sk</span>
<a id="__codelineno-176-10" name="__codelineno-176-10" href="#__codelineno-176-10"></a><span class="w">        </span><span class="nt">scd2</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id="__codelineno-176-11" name="__codelineno-176-11" href="#__codelineno-176-11"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">source_column</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">product_id</span>
<a id="__codelineno-176-12" name="__codelineno-176-12" href="#__codelineno-176-12"></a><span class="w">        </span><span class="nt">dimension_table</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dim_product</span>
<a id="__codelineno-176-13" name="__codelineno-176-13" href="#__codelineno-176-13"></a><span class="w">        </span><span class="nt">dimension_key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">product_id</span>
<a id="__codelineno-176-14" name="__codelineno-176-14" href="#__codelineno-176-14"></a><span class="w">        </span><span class="nt">surrogate_key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">product_sk</span>
<a id="__codelineno-176-15" name="__codelineno-176-15" href="#__codelineno-176-15"></a><span class="w">    </span><span class="nt">orphan_handling</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">unknown</span>
<a id="__codelineno-176-16" name="__codelineno-176-16" href="#__codelineno-176-16"></a><span class="w">    </span><span class="nt">measures</span><span class="p">:</span>
<a id="__codelineno-176-17" name="__codelineno-176-17" href="#__codelineno-176-17"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">quantity</span>
<a id="__codelineno-176-18" name="__codelineno-176-18" href="#__codelineno-176-18"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">revenue</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;quantity</span><span class="nv"> </span><span class="s">*</span><span class="nv"> </span><span class="s">unit_price&quot;</span>
<a id="__codelineno-176-19" name="__codelineno-176-19" href="#__codelineno-176-19"></a><span class="w">    </span><span class="nt">audit</span><span class="p">:</span>
<a id="__codelineno-176-20" name="__codelineno-176-20" href="#__codelineno-176-20"></a><span class="w">      </span><span class="nt">load_timestamp</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id="__codelineno-176-21" name="__codelineno-176-21" href="#__codelineno-176-21"></a><span class="w">      </span><span class="nt">source_system</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;pos&quot;</span>
</code></pre></div></p>
<hr />
<h2 id="aggregationpattern">AggregationPattern<a class="headerlink" href="#aggregationpattern" title="Permanent link">&para;</a></h2>
<p>Declarative aggregation with GROUP BY and optional incremental merge.</p>
<p><strong>When to Use:</strong>
- Building summary/aggregate tables (daily sales, monthly metrics)
- Need incremental aggregation (update existing aggregates)
- Gold layer reporting tables</p>
<p><strong>Beginner Note:</strong>
Aggregations summarize facts at a higher grain.
Example: daily_sales aggregates orders by date with SUM(revenue).</p>
<p><strong>See Also:</strong> <a href="#factpattern">FactPattern</a></p>
<p><strong>Features:</strong>
- Declare grain (GROUP BY columns)
- Define measures with SQL aggregation expressions
- Optional HAVING filter
- Audit columns</p>
<p><strong>Params:</strong></p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>grain</code></td>
<td>list</td>
<td>Yes</td>
<td>Columns to GROUP BY (defines uniqueness)</td>
</tr>
<tr>
<td><code>measures</code></td>
<td>list</td>
<td>Yes</td>
<td>Measure definitions with name and expr</td>
</tr>
<tr>
<td><code>having</code></td>
<td>str</td>
<td>No</td>
<td>HAVING clause for filtering aggregates</td>
</tr>
<tr>
<td><code>incremental.timestamp_column</code></td>
<td>str</td>
<td>No</td>
<td>Column to identify new data</td>
</tr>
<tr>
<td><code>incremental.merge_strategy</code></td>
<td>str</td>
<td>No</td>
<td>"replace", "sum", "min", or "max"</td>
</tr>
<tr>
<td><code>audit.load_timestamp</code></td>
<td>bool</td>
<td>No</td>
<td>Add load_timestamp column</td>
</tr>
<tr>
<td><code>audit.source_system</code></td>
<td>str</td>
<td>No</td>
<td>Add source_system column</td>
</tr>
</tbody>
</table>
<p><strong>Example:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-177-1" name="__codelineno-177-1" href="#__codelineno-177-1"></a><span class="nt">pattern</span><span class="p">:</span>
<a id="__codelineno-177-2" name="__codelineno-177-2" href="#__codelineno-177-2"></a><span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">aggregation</span>
<a id="__codelineno-177-3" name="__codelineno-177-3" href="#__codelineno-177-3"></a><span class="w">  </span><span class="nt">params</span><span class="p">:</span>
<a id="__codelineno-177-4" name="__codelineno-177-4" href="#__codelineno-177-4"></a><span class="w">    </span><span class="nt">grain</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">date_sk</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">product_sk</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">region</span><span class="p p-Indicator">]</span>
<a id="__codelineno-177-5" name="__codelineno-177-5" href="#__codelineno-177-5"></a><span class="w">    </span><span class="nt">measures</span><span class="p">:</span>
<a id="__codelineno-177-6" name="__codelineno-177-6" href="#__codelineno-177-6"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">total_revenue</span>
<a id="__codelineno-177-7" name="__codelineno-177-7" href="#__codelineno-177-7"></a><span class="w">        </span><span class="nt">expr</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;SUM(total_amount)&quot;</span>
<a id="__codelineno-177-8" name="__codelineno-177-8" href="#__codelineno-177-8"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">order_count</span>
<a id="__codelineno-177-9" name="__codelineno-177-9" href="#__codelineno-177-9"></a><span class="w">        </span><span class="nt">expr</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;COUNT(*)&quot;</span>
<a id="__codelineno-177-10" name="__codelineno-177-10" href="#__codelineno-177-10"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">avg_order_value</span>
<a id="__codelineno-177-11" name="__codelineno-177-11" href="#__codelineno-177-11"></a><span class="w">        </span><span class="nt">expr</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;AVG(total_amount)&quot;</span>
<a id="__codelineno-177-12" name="__codelineno-177-12" href="#__codelineno-177-12"></a><span class="w">    </span><span class="nt">having</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;COUNT(*)</span><span class="nv"> </span><span class="s">&gt;</span><span class="nv"> </span><span class="s">0&quot;</span>
<a id="__codelineno-177-13" name="__codelineno-177-13" href="#__codelineno-177-13"></a><span class="w">    </span><span class="nt">audit</span><span class="p">:</span>
<a id="__codelineno-177-14" name="__codelineno-177-14" href="#__codelineno-177-14"></a><span class="w">      </span><span class="nt">load_timestamp</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div></p>
<hr />
<h3 id="auditconfig"><code>AuditConfig</code><a class="headerlink" href="#auditconfig" title="Permanent link">&para;</a></h3>
<p>Configuration for audit columns.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>load_timestamp</strong></td>
<td>bool</td>
<td>No</td>
<td><code>True</code></td>
<td>Add load_timestamp column</td>
</tr>
<tr>
<td><strong>source_system</strong></td>
<td>Optional[str]</td>
<td>No</td>
<td>-</td>
<td>Source system name for source_system column</td>
</tr>
</tbody>
</table>
<hr />












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.tabs", "navigation.sections", "navigation.top", "navigation.expand", "toc.integrate", "content.code.copy"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>